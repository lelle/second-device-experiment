!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ludo=t():e.ludo=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="/js/",t(0)}(function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))switch(typeof e[t]){case"function":break;case"object":e[t]=function(t){var n=t.slice(1),r=e[t[0]];return function(e,t,i){r.apply(this,[e,t,i].concat(n))}}(e[t]);break;default:e[t]=e[e[t]]}return e}([function(e,t,n){e.exports=n(92)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={LOADING:"loading",LOAD:"load",LOADED:"loaded",ENDED:"ended",SEEKING:"seeking",SEEKED:"seeked",PLAY:"play",PLAYING:"playing",PAUSE:"pause",TIMEUPDATE:"timeupdate",ERROR:"error",ERROR_READABLE:"error-readable",ADAPTER:"adapter",PLAYER:"player",BEFOREPLAY:"beforeplay",MUTED:"muted",UNMUTED:"unmuted",OPTIONCHANGED:"optionchanged",PREPARE:"prepare",PREPARED:"prepared",PREPARATORSCOMPLETE:"preparatorscomplete",CUE:"cue",CUED:"cued",READY:"ready",ITEM_CHANGED:"item-changed",SUBTITLESOFF:"subtitlesoff",SUBTITLESON:"subtitleson",SUBTITLESDISABLED:"subtitlesdisabled",CANPLAYTHROUGH:"canplaythrough",BUFFERSTART:"bufferstart",BUFFEREND:"bufferend",BITRATESWITCH:"bitrateswitch",LOADEDDATA:"loadeddata",VOLUMECHANGE:"volumechange",RATECHANGE:"ratechange",FULLSCREENON:"fullscreenon",FULLSCREENOFF:"fullscreenoff",AIRPLAYON:"airplayon",AIRPLAYOFF:"airplayoff",PIPON:"pipon",PIPOFF:"pipoff"}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(14),o=r(a),s=n(13),u=r(s),l=n(15),d=r(l),c=n(16),f=r(c),h=n(17),p=n(18),v=r(p),m=n(19),g=r(m);e.exports=i({arrayFind:o.default,arrayFindIndex:u.default,arrayIncludes:d.default,classList:f.default,numberIsNaN:Number.isNaN||function(e){return e!==e},objectAssign:Object.assign||h.assign,Promise:g.default},(0,v.default)({Promise:g.default}))},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={USE:"use",STAGE_ELEMENT:"stageElement",VIDEO_ELEMENT:"videoElement",POSTER_ELEMENT:"posterElement",ADAPTER:"adapter",AUTOPLAY:"autoplay",SUBTITLES:"subtitles",FULLSCREEN:"fullscreen",AIRPLAY:"airplay",LOOP:"loop",AUTOADVANCE:"autoadvance",MUTE:"mute",PLAYBACKRATE:"playbackrate",CONTROLS:"controls"}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={TYPES:{NETWORK_ERROR:"NETWORK_ERROR",MEDIA_ERROR:"MEDIA_ERROR",OTHER_ERROR:"OTHER_ERROR"},REASONS:{INITIALIZATION_ERROR:"INITIALIZATION_ERROR",METADATA_LOADING_ERROR:"METADATA_LOADING_ERROR",MEDIA_BLOCKED_ERROR:"MEDIA_BLOCKED_ERROR",MEDIA_PREPARATION_ERROR:"MEDIA_PREPARATION_ERROR",MEDIA_SUPPORT_ERROR:"MEDIA_SUPPORT_ERROR",MEDIA_LOAD_ERROR:"MEDIA_LOAD_ERROR",MEDIA_PLAYBACK_ERROR:"MEDIA_PLAYBACK_ERROR",MEDIA_PLAYBACK_ERROR_ABORTED:"MEDIA_PLAYBACK_ERROR_ABORTED",MEDIA_PLAYBACK_ERROR_NETWORK:"MEDIA_PLAYBACK_ERROR_NETWORK",MEDIA_PLAYBACK_ERROR_DECODE:"MEDIA_PLAYBACK_ERROR_DECODE",MEDIA_PLAYBACK_ERROR_SRC_NOT_SUPPORTED:"MEDIA_PLAYBACK_ERROR_SRC_NOT_SUPPORTED",UNKNOWN_ERROR:"UNKNOWN_ERROR"}};t.default=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(21),o=r(a),s=n(22),u=r(s),l=n(23),d=r(l),c=["log","debug","info","warn","error"],f=1e3,h=d.default.console,p=function(){var e="__ludoLogging";return"undefined"==typeof d.default[e]&&(d.default[e]={}),d.default[e]}(),v=function(e){var t=15,n=e.substr(0,t);return""+n+Array(t+3-n.length).join(" ")+"|"},m=function(){return"undefined"==typeof p.hue&&(p.hue=0),p.hue=(p.hue+Math.E/7)%1,360*p.hue},g=function(e){if(!p.prefixes[e]){var t=v(e);if((0,o.default)()){var n=m();p.prefixes[e]=["%c"+t,"color:hsl("+n+",99%,40%);font-weight:bold"]}else p.prefixes[e]=[t]}return p.prefixes[e]},y=function(e){h[e.level].apply(h,i(g(e.name).concat(e.messages)))},b=function(){p.browserConsoleEnabled||"undefined"==typeof h||(p.browserConsoleEnabled=!0,p.entries.forEach(y),p.events.on("entry",y))};t.default=function(e){p.entries||(p.entries=[]),p.events||(p.events=new u.default),p.prefixes||(p.prefixes={});var t=function(t){return function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var a={timestamp:new Date,stack:(new Error).stack,name:e,level:t,messages:r};for(p.entries.push(a);p.entries.length>f;)p.entries.shift();p.events.emit("entry",a)}},n=t("log");return c.forEach(function(e){n[e]=t(e)}),n.events=p.events,n.getLog=function(){return p.entries},n.enableBrowserConsole=b,n}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.IS_AIRPLAY_SUPPORTED=t.IS_CORS_SUPPORTED=t.SUPPORTS_TOUCH=t.SUPPORTS_INLINE_PLAYBACK=t.SUPPORTS_AUTOPLAY=t.SUPPORTS_NATIVE_HLS=t.IS_SUPPORTED=t.IS_EDGE=t.IS_IPHONE=t.IS_IOS=t.IS_SAFARI=void 0;var i=n(12),a=r(i),o=n(30),s=r(o),u=s.default.navigator||{},l=t.IS_SAFARI=/^((?!chrome|android).)*safari/i.test(u.userAgent),d=t.IS_IOS=/iPad|iPhone|iPod/.test(u.userAgent)&&!s.default.MSStream,c=t.IS_IPHONE=/iPhone|iPod/.test(u.userAgent)&&!s.default.MSStream,f=t.IS_EDGE=/Edge\/12\./.test(u.userAgent);t.IS_SUPPORTED=a.default&&a.default.body&&"defineProperty"in Object&&"keys"in Object&&"assign"in Object&&"classList"in a.default.body&&"addEventListener"in s.default&&"localStorage"in s.default&&"querySelector"in a.default,t.SUPPORTS_NATIVE_HLS=l||f,t.SUPPORTS_AUTOPLAY=!d,t.SUPPORTS_INLINE_PLAYBACK=!c,t.SUPPORTS_TOUCH="ontouchstart"in s.default,t.IS_CORS_SUPPORTED=function(){return"undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest||("undefined"!=typeof XDomainRequest,!1)}(),t.IS_AIRPLAY_SUPPORTED=function(){return!!s.default.WebKitPlaybackTargetAvailabilityEvent}()},function(e,t){"use strict";function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"==typeof t?"undefined":a(t))&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s="Not Implemented",u=function(){function e(t){i(this,e),this.options=t}return e.prototype.create=function(e){this.player=e},e.prototype.mount=function(e){this.__element__=e},e.prototype.unmount=function(){this.__element__=null},e.prototype.destroy=function(){throw new Error(s)},e.prototype.element=function(){return this.__element__},e.prototype.play=function(){throw new Error(s)},e.prototype.prepareMedia=function(){throw new Error(s)},e.prototype.loadMedia=function(){throw new Error(s)},e.prototype.selectSource=function(){throw new Error(s)},e.prototype.canPlay=function(e){return null!==this.selectSource(e)},o(e,[{key:"adapterName",get:function(){return""}}]),e}();t.default=u;t.LudoPlayerAdapter=function(e){function t(){return i(this,t),n(this,e.apply(this,arguments))}return r(t,e),t.prototype.currentTime=function(){return 0},t.prototype.currentLiveTime=function(){return new Date},t.prototype.duration=function(){return 0},t.prototype.pause=function(){},t.prototype.isPaused=function(){return!0},t.prototype.seekTo=function(){},t.prototype.mute=function(){},t.prototype.unmute=function(){},t.prototype.isMuted=function(){return!1},t.prototype.volume=function(){return 1},t.prototype.setVolume=function(){},t.prototype.metrics=function(){return{}},t.prototype.buffered=function(){return[]},t.prototype.seekable=function(){return[]},t.prototype.played=function(){return[]},t.prototype.playbackQuality=function(){return 0},t.prototype.setPlaybackQuality=function(){},t.prototype.playbackQualities=function(){return[]},t.prototype.playbackRate=function(){return 1},t.prototype.setPlaybackRate=function(){},t.prototype.convertTimeToLiveTime=function(){return new Date},t.prototype.convertLiveTimeToTime=function(){return 0},t.prototype.requireInitialPlayWhenLoaded=function(){return!0},t}(u)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.Hls,r=void 0===n?o.default:n,i=t.hls,a=t.document,s=void 0===a?u.default:a,c=(0,l.arrayFind)(e.sources,function(e){return e.type===d})||{},f=c.src;return f?r.isSupported()?new l.Promise(function(e){var t=void 0,n=void 0;i?t=i:(n=s.createElement("video"),t=new r({debug:!1,enableWorker:!0}),t.on(r.Events.MEDIA_ATTACHED,function(){return t.loadSource(f)}));var a=function n(a){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.off(r.Events.LEVEL_LOADED,n),i||t.destroy(),e(o)};t.on(r.Events.LEVEL_LOADED,a),i||t.attachMedia(n)}).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.details,n={};if(!t)return n;n.duration=t.totalduration,n.isLive=!!t.live;var r=t.fragments&&t.fragments[0];return t.live&&(n.liveHoldOff=3*t.targetduration),t.live&&r&&(n.startTime=r.start||0,r.programDateTime instanceof Date&&(n.liveOffset=((new Date).getTime()-r.programDateTime.getTime())/1e3-n.duration)),n}):l.Promise.reject(new Error("hls.js is not supported")):l.Promise.reject(new Error("No HLS media URL"))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n(31),o=r(a),s=n(12),u=r(s),l=n(2),d="application/vnd.apple.mpegurl"},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={DVR:"DVR",LIVE:"LIVE",VOD:"VOD",UNKNOWN:"UNKNOWN"}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"==typeof t?"undefined":s(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(12),d=r(l),c=n(5),f=r(c),h=n(4),p=r(h),v=n(1),m=r(v),g=n(3),y=r(g),b=n(11),E=r(b),_=n(8),T=r(_),S=n(2),A="LudoHTML5PlayerAdapter",L="\n  play pause playing timeupdate seeking seeked error volumechange\n  loadedmetadata loadeddata loadstart canplay ended encrypted\n  canplaythrough durationchange progress ratechange reset  stalled waiting\n",R=void 0,O=function(e){function t(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,t);var o=r.debug,s=void 0===o?f.default:o,u=r.ludoHlsDetails,l=void 0===u?T.default:u,d=a(this,e.call(this,n));return d.trace=s("ludo:trace"),d.log=s("ludo:html5"),d.ludoHlsDetails=l,d}return o(t,e),t.prototype.mount=function(t){var n=this;e.prototype.mount.call(this,t),this.totalDuration=0,this.currentSource=null,this._handleVideoEvent=this.handleVideoEvent.bind(this),L.split(/\W+/).forEach(function(e){return n.__element__.addEventListener(e,n._handleVideoEvent)}),this.openMediaApiByTriggeringLoadOnce()},t.prototype.handleVideoEvent=function(e){switch(e.type){case"timeupdate":case"durationchange":case"progress":case"stalled":break;default:this.trace("Media event '"+e.type+"'")}var t=void 0,n=void 0;switch(e.type){case m.default.ENDED:case m.default.SEEKING:case m.default.SEEKED:case m.default.PLAY:case m.default.PLAYING:case m.default.PAUSE:case m.default.LOADEDDATA:this.player.emit(e.type);break;case m.default.TIMEUPDATE:this.player.emit(e.type,this.currentTime());break;case m.default.VOLUMECHANGE:this.player.emit(e.type,this.volume());break;case m.default.ERROR:if(t=p.default.TYPES.MEDIA_ERROR,n=p.default.REASONS.MEDIA_PLAYBACK_ERROR,this.__element__.error)switch(this.__element__.error.code){case this.__element__.error.MEDIA_ERR_ABORTED:n=p.default.REASONS.MEDIA_PLAYBACK_ERROR_ABORTED;break;case this.__element__.error.MEDIA_ERR_NETWORK:t=p.default.TYPES.NETWORK_ERROR,n=p.default.REASONS.MEDIA_PLAYBACK_ERROR_NETWORK;break;case this.__element__.error.MEDIA_ERR_DECODE:n=p.default.REASONS.MEDIA_PLAYBACK_ERROR_DECODE;break;default:n=p.default.REASONS.UNKNOWN_ERROR}this.player.error(this.__element__.error,{fatal:!0,type:t,reason:n})}},t.prototype.openMediaApiByTriggeringLoadOnce=function(){var e=this,t=this.player.get(y.default.STAGE_ELEMENT),n=function(){e.__element__.paused&&e.__element__.load()};t.addEventListener("touchstart",n),t.addEventListener("click",n),this.player.once(m.default.LOADEDDATA,function(){t.removeEventListener("touchstart",n),t.removeEventListener("click",n)})},t.prototype.reset=function(){this.__element__.src=""},t.prototype.destroy=function(){return this.unmount()},t.prototype.play=function(){this.__element__.play()},t.prototype.pause=function(){this.__element__.pause()},t.prototype.isPaused=function(){return this.__element__.paused},t.prototype.currentTime=function(){return this.__element__.currentTime-this.currentTimeOffset},t.prototype.seekTo=function(e){this.__element__.currentTime=e+this.currentTimeOffset},t.prototype.duration=function e(){if(this.totalDuration)return this.totalDuration;var e=this.__element__.duration;if("number"==typeof e&&e>=0&&e<1e9)return e;if(this.__element__.seekable&&this.__element__.seekable.length)try{return this.__element__.seekable.end(0)-this.__element__.seekable.start(0)}catch(e){}return 0},t.prototype.mute=function(){this.__element__.muted=!0,this.player.emit(m.default.VOLUMECHANGE)},t.prototype.unmute=function(){this.__element__.muted=!1,this.player.emit(m.default.VOLUMECHANGE)},t.prototype.isMuted=function(){return this.__element__.muted},t.prototype.volume=function(){return this.__element__.volume},t.prototype.setVolume=function(e){this.log("setVolume"),this.__element__.volume=e,this.player.emit(m.default.VOLUMECHANGE)},t.prototype.adjustedTimeRanges=function(e){var t=this;return{length:e.length,start:function(n){return e.start(n)-t.currentTimeOffset},end:function(n){return e.end(n)-t.currentTimeOffset}}},t.prototype.buffered=function(){return this.adjustedTimeRanges(this.__element__.buffered)},t.prototype.seekable=function(){return this.adjustedTimeRanges(this.__element__.seekable)},t.prototype.played=function(){return this.adjustedTimeRanges(this.__element__.played)},t.prototype.playbackRate=function(){return this.__element__.playbackRate},t.prototype.setPlaybackRate=function(e){this.log("setPlaybackRate"),this.__element__.playbackRate=e,this.player.emit(m.default.RATECHANGE)},t.prototype.unmount=function(){var e=this;return L.split(/\W+/).forEach(function(t){return e.__element__.removeEventListener(t,e._handleVideoEvent)}),this.reset(),S.Promise.resolve()},t.prototype.metrics=function(){var e={};if(!this.currentSource)return e;e.mimeType=this.currentSource.type,e.src=this.currentSource.src;var t=this.__element__.getVideoPlaybackQuality;if(t&&"function"==typeof t){var n=this.__element__.getVideoPlaybackQuality();e.droppedFrames=n.droppedVideoFrames,e.corruptedFrames=n.corruptedVideoFrames}else this.__element__.webkitDroppedFrameCount&&(e.droppedFrames=this.__element__.webkitDroppedFrameCount);return e.videoHeight=this.__element__.videoHeight,e.videoWidth=this.__element__.videoWidth,e},t.prototype.prepareMedia=function(e){var t=this;this.currentSource=this.selectSource(e),this.ludoHlsDetails(e).then(function(e){var n=e.duration,r=e.liveHoldOff,i=void 0===r?0:r,a=e.startTime,o=e.liveOffset;n&&(t.totalDuration=n-i,t.player.emit(m.default.DURATIONCHANGE,t.totalDuration)),"number"==typeof a&&(t.currentTimeOffset=a),(o||i)&&(t.liveOffset=(o||t.player.get("DEFAULT_LIVE_OFFSET")||0)+i)}).catch(function(){t.log("Grabbing HLS details failed");var n=e.isLive;if(n){t.currentTimeOffset=0,t.liveOffset=t.player.get("DEFAULT_LIVE_OFFSET")||0;var r=void 0,i=function e(){var n=t.duration();return t.log("Getting duration",n),n>0?(t.log("Set totalDuration",n),void(t.totalDuration=n)):(r&&clearTimeout(r),void(r=setTimeout(e,100)))};i()}}),this.reset();var n=new S.Promise(function(e){var n=function(){this.__element__.removeEventListener("loadedmetadata",n),e()}.bind(t);t.__element__.addEventListener("loadedmetadata",n)});return this.__element__.src=this.currentSource.src,n},t.prototype.loadMedia=function(e){var t=this;this.__element__.setAttribute("poster",e.poster);var n=new S.Promise(function(e){var n=function(){this.__element__.removeEventListener("loadeddata",n),e()}.bind(t);t.__element__.addEventListener("loadeddata",n)});return this.__element__.load(),n},t.prototype.selectSource=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.testElement||(R=R||d.default.createElement("video"));return(0,S.arrayFind)(e.sources,function(e){return n.canPlayType(e.type)})||null},u(t,[{key:"adapterName",get:function(){return A}}],[{key:"adapterName",get:function(){return A}}]),t}(E.default);t.default=O},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"==typeof t?"undefined":s(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(7),d=r(l),c=n(61),f=r(c),h=function(e){function t(){return i(this,t),a(this,e.apply(this,arguments))}return o(t,e),t.prototype.create=function(t){var n=this;e.prototype.create.call(this,t),this.liveDecorator||(this.liveDecorator=(0,f.default)(this,{currentTime:function(){return n.currentTime()},duration:function(){return n.duration()},DEFAULT_LIVE_OFFSET:this.player.get("DEFAULT_LIVE_OFFSET"),LIVE_DELAY_BETWEEN_TIMESTAMP_AND_STREAM:this.player.get("LIVE_DELAY_BETWEEN_TIMESTAMP_AND_STREAM")}))},t.prototype.mount=function(t){e.prototype.mount.call(this,t),this.liveDecorator.reset(),this.currentSource=null},u(t,[{key:"adapterName",get:function(){return"LudoLivePlayerAdapter"}}]),t}(d.default);t.default=h},[99,97],function(e,t){"use strict";e.exports=function(e,t,n){if("function"==typeof Array.prototype.findIndex)return e.findIndex(t,n);if("function"!=typeof t)throw new TypeError("predicate must be a function");var r=Object(e),i=r.length;if(0===i)return-1;for(var a=0;a<i;a++)if(t.call(n,r[a],a,r))return a;return-1}},function(e,t){"use strict";function n(e,t,n){if("function"==typeof Array.prototype.find)return e.find(t,n);n=n||this;var r,i=e.length;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(r=0;r<i;r++)if(t.call(n,e[r],r,e))return e[r]}e.exports=n},function(e,t,n){"use strict";var r=n(46),i=n(47),a=n(44),o=n(45),s=o(),u=n(72),l=Array.prototype.slice,d=function(e,t){return i.RequireObjectCoercible(e),s.apply(e,l.call(arguments,1))};r(d,{getPolyfill:o,implementation:a,shim:u}),e.exports=d},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=function(e){return new i(e)};var i=function(){function e(t){n(this,e),this._element=t}return e.prototype._regExp=function(e){return new RegExp("(^| )"+e+"( |$)","g")},e.prototype._clean=function(e){return e.replace(/^\s+|\s+$/g,"")},e.prototype.add=function(){for(var e=this,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach(function(t){e.contains(t)||(e._className+=" "+t)})},e.prototype.remove=function(){for(var e=this,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach(function(t){e._className=e._className.replace(e._regExp(t)," ")})},e.prototype.toggle=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=null!==t?t:!this.contains(e);return n?(this.add(e),!0):(this.remove(e),!1)},e.prototype.contains=function(e){return this._regExp(e).test(this._className)},r(e,[{key:"_className",get:function(){return this._element.getAttribute&&this._element.getAttribute("class")||""},set:function(e){if(!this._element.setAttribute)throw new Error("Can't set classes on this element:",this._element);this._element.setAttribute("class",this._clean(e))}}]),e}()},function(e,t){"use strict";function n(e,t){if(void 0===e||null===e)throw new TypeError("Cannot convert first argument to object");for(var n=Object(e),r=1;r<arguments.length;r++){var i=arguments[r];if(void 0!==i&&null!==i)for(var a=Object.keys(Object(i)),o=0,s=a.length;o<s;o++){var u=a[o],l=Object.getOwnPropertyDescriptor(i,u);void 0!==l&&l.enumerable&&(n[u]=i[u])}}return n}function r(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:n})}e.exports={assign:n,polyfill:r}},function(e,t,n){var r;!function(i){"use strict";function a(e){var t=e&&e.Promise||i.Promise,n=e&&e.XMLHttpRequest||i.XMLHttpRequest,r=i;return function(){var e=Object.create(r,{fetch:{value:void 0,writable:!0}});return function(e){function r(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function i(e){return"string"!=typeof e&&(e=String(e)),e}function a(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return b.iterable&&(t[Symbol.iterator]=function(){return t}),t}function o(e){this.map={},e instanceof o?e.forEach(function(e,t){this.append(t,e)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function s(e){return e.bodyUsed?t.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function u(e){return new t(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function l(e){var t=new FileReader,n=u(t);return t.readAsArrayBuffer(e),n}function d(e){var t=new FileReader,n=u(t);return t.readAsText(e),n}function c(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}function f(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function h(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(b.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(b.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(b.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(b.arrayBuffer&&b.blob&&_(e))this._bodyArrayBuffer=f(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!b.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!T(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=f(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):b.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},b.blob&&(this.blob=function(){var e=s(this);if(e)return e;if(this._bodyBlob)return t.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return t.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return t.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?s(this)||t.resolve(this._bodyArrayBuffer):this.blob().then(l)}),this.text=function(){var e=s(this);if(e)return e;if(this._bodyBlob)return d(this._bodyBlob);if(this._bodyArrayBuffer)return t.resolve(c(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return t.resolve(this._bodyText)},b.formData&&(this.formData=function(){return this.text().then(m)}),this.json=function(){return this.text().then(JSON.parse)},this}function p(e){var t=e.toUpperCase();return S.indexOf(t)>-1?t:e}function v(e,t){t=t||{};var n=t.body;if(e instanceof v){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new o(e.headers)),this.method=e.method,this.mode=e.mode,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new o(t.headers)),this.method=p(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function m(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}}),t}function g(e){var t=new o;return e.split(/\r?\n/).forEach(function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}}),t}function y(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new o(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var b={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(b.arrayBuffer)var E=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],_=function(e){return e&&DataView.prototype.isPrototypeOf(e)},T=ArrayBuffer.isView||function(e){return e&&E.indexOf(Object.prototype.toString.call(e))>-1};o.prototype.append=function(e,t){e=r(e),t=i(t);var n=this.map[e];this.map[e]=n?n+","+t:t},o.prototype.delete=function(e){delete this.map[r(e)]},o.prototype.get=function(e){return e=r(e),this.has(e)?this.map[e]:null},o.prototype.has=function(e){return this.map.hasOwnProperty(r(e))},o.prototype.set=function(e,t){this.map[r(e)]=i(t)},o.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},o.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),a(e)},o.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),a(e)},o.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),a(e)},b.iterable&&(o.prototype[Symbol.iterator]=o.prototype.entries);var S=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];v.prototype.clone=function(){return new v(this,{body:this._bodyInit})},h.call(v.prototype),h.call(y.prototype),y.prototype.clone=function(){return new y(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new o(this.headers),url:this.url})},y.error=function(){var e=new y(null,{status:0,statusText:""});return e.type="error",e};var A=[301,302,303,307,308];y.redirect=function(e,t){if(A.indexOf(t)===-1)throw new RangeError("Invalid status code");return new y(null,{status:t,headers:{location:e}})},e.Headers=o,e.Request=v,e.Response=y,e.fetch=function(e,r){return new t(function(t,i){var a=new v(e,r),o=new n;o.onload=function(){var e={status:o.status,statusText:o.statusText,headers:g(o.getAllResponseHeaders()||"")};e.url="responseURL"in o?o.responseURL:e.headers.get("X-Request-URL");var n="response"in o?o.response:o.responseText;t(new y(n,e))},o.onerror=function(){i(new TypeError("Network request failed"))},o.ontimeout=function(){i(new TypeError("Network request failed"))},o.open(a.method,a.url,!0),"include"===a.credentials&&(o.withCredentials=!0),"responseType"in o&&b.blob&&(o.responseType="blob"),a.headers.forEach(function(e,t){o.setRequestHeader(t,e)}),o.send("undefined"==typeof a._bodyInit?null:a._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof e?e:this),{fetch:e.fetch,Headers:e.Headers,Request:e.Request,Response:e.Response}}()}r=function(){return a}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))}("undefined"==typeof self?this:self)},function(e,t,n){"use strict";e.exports="function"==typeof Promise?Promise:n(86)},function(e,t){(function(t){var n;n="undefined"!=typeof window?window:"undefined"!=typeof t?t:"undefined"!=typeof self?self:{},e.exports=n}).call(t,function(){return this}())},function(e,t){function n(){if("undefined"==typeof window||"undefined"==typeof document)return!1;var e=navigator.userAgent.toLowerCase().indexOf("edge")>-1,t="WebkitAppearance"in document.documentElement.style,n=window.console&&(window.console.firebug||window.console.exception&&window.console.table)&&!0,r=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31;return t&&!e||n||r||!1}e.exports=n},function(e,t,n){"use strict";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function a(){this._events=new r,this._eventsCount=0}var o=Object.prototype.hasOwnProperty,s="~";Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(s=!1)),a.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;
for(t in e=this._events)o.call(e,t)&&n.push(s?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},a.prototype.listeners=function(e,t){var n=s?s+e:e,r=this._events[n];if(t)return!!r;if(!r)return[];if(r.fn)return[r.fn];for(var i=0,a=r.length,o=new Array(a);i<a;i++)o[i]=r[i].fn;return o},a.prototype.emit=function(e,t,n,r,i,a){var o=s?s+e:e;if(!this._events[o])return!1;var u,l,d=this._events[o],c=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),c){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,n),!0;case 4:return d.fn.call(d.context,t,n,r),!0;case 5:return d.fn.call(d.context,t,n,r,i),!0;case 6:return d.fn.call(d.context,t,n,r,i,a),!0}for(l=1,u=new Array(c-1);l<c;l++)u[l-1]=arguments[l];d.fn.apply(d.context,u)}else{var f,h=d.length;for(l=0;l<h;l++)switch(d[l].once&&this.removeListener(e,d[l].fn,void 0,!0),c){case 1:d[l].fn.call(d[l].context);break;case 2:d[l].fn.call(d[l].context,t);break;case 3:d[l].fn.call(d[l].context,t,n);break;case 4:d[l].fn.call(d[l].context,t,n,r);break;default:if(!u)for(f=1,u=new Array(c-1);f<c;f++)u[f-1]=arguments[f];d[l].fn.apply(d[l].context,u)}}return!0},a.prototype.on=function(e,t,n){var r=new i(t,n||this),a=s?s+e:e;return this._events[a]?this._events[a].fn?this._events[a]=[this._events[a],r]:this._events[a].push(r):(this._events[a]=r,this._eventsCount++),this},a.prototype.once=function(e,t,n){var r=new i(t,n||this,!0),a=s?s+e:e;return this._events[a]?this._events[a].fn?this._events[a]=[this._events[a],r]:this._events[a].push(r):(this._events[a]=r,this._eventsCount++),this},a.prototype.removeListener=function(e,t,n,i){var a=s?s+e:e;if(!this._events[a])return this;if(!t)return 0===--this._eventsCount?this._events=new r:delete this._events[a],this;var o=this._events[a];if(o.fn)o.fn!==t||i&&!o.once||n&&o.context!==n||(0===--this._eventsCount?this._events=new r:delete this._events[a]);else{for(var u=0,l=[],d=o.length;u<d;u++)(o[u].fn!==t||i&&!o[u].once||n&&o[u].context!==n)&&l.push(o[u]);l.length?this._events[a]=1===l.length?l[0]:l:0===--this._eventsCount?this._events=new r:delete this._events[a]}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=s?s+e:e,this._events[t]&&(0===--this._eventsCount?this._events=new r:delete this._events[t])):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prototype.setMaxListeners=function(){return this},a.prefixed=s,a.EventEmitter=a,e.exports=a},20,function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"==typeof t?"undefined":u(t))&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":u(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(5),f=r(c),h=n(31),p=r(h),v=n(4),m=r(v),g=n(1),y=r(g),b=n(8),E=r(b),_=n(10),T=r(_),S=n(6),A=n(2),L="LudoHLSPlayerAdapter",R="application/vnd.apple.mpegurl",O=function(e){function t(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a(this,t);var i=r.debug,s=void 0===i?f.default:i,u=r.Hls,l=void 0===u?p.default:u,d=r.ludoHlsDetails,c=void 0===d?E.default:d,h=o(this,e.call(this,n));return h.Hls=l,h.ludoHlsDetails=c,h.trace=s("ludo:trace"),h}return s(t,e),t.prototype.mount=function(t){var n=this;e.prototype.mount.call(this,t),this.currentSource=null,this.ready=null,this.playedLevelFragments=null,this.switchesUp=0,this.switchesDown=0,this.droppedFrames=0,this.__overridedWithReady__||(this.__overridedWithReady__=!0,"play pause mute unmute".split(" ").forEach(function(e){var t=n[e];n[e]=function(){var e=this,n=arguments;this.ready.then(function(){t.apply(e,n)})}.bind(n)}))},t.prototype.reset=function(){return this.hls&&(this.hls.destroy(),this.hls.bufferTimer&&(clearInterval(this.hls.bufferTimer),this.hls.bufferTimer=null),this.hls=null),A.Promise.resolve()},t.prototype.metrics=function(){var e=this,t={};if(!this.currentSource)return t;if((0,A.objectAssign)(t,{mimeType:this.currentSource.type,src:this.currentSource.src,switchCount:{up:this.switchesUp,down:this.switchesDown,total:this.switchesDown+this.switchesUp},droppedFrames:this.droppedFrames}),this.hls&&this.hls.levels&&this.hls.abrController&&this.hls.levels[this.hls.currentLevel]){var n=this.hls.levels[this.hls.currentLevel];n&&(n=l({},n),n.details&&(n.details=l({},n.details),delete n.details.fragments)),(0,A.objectAssign)(t,{currentLevel:n,currentPlayingBitrate:n.bitrate/1e3+"kbps",currentWorkingBandwidth:Math.round(this.hls.abrController.lastbw/1e3)+"kbps",maxBitrateAvailable:Math.max.apply(Math,i(this.hls.levels.map(function(e){return e.bitrate})))/1e3+"kbps",bitrateUsage:this.hls.levels.map(function(t,n){return{bitrate:t.bitrate,value:Math.round(100*e.playedLevelFragments[n]/e.playedLevelFragments.reduce(function(e,t){return e+t}))+"%"}}).sort(function(e,t){return e.bitrate<t.bitrate}).map(function(e){return[e.bitrate/1e3+"kbps",e.value]})})}return this.__element__.videoWidth>0&&(t.videoHeight=this.__element__.videoHeight,t.videoWidth=this.__element__.videoWidth),this.__element__.webkitDecodedFrameCount&&(t.decodedFrames=this.__element__.webkitDecodedFrameCount),!t.droppedFrames&&this.__element__.webkitDroppedFrameCount&&(t.droppedFrames=this.__element__.webkitDroppedFrameCount),t},t.prototype.playbackQuality=function(){return this.hls.currentLevel},t.prototype.playbackQualities=function(){return this.hls.levels},t.prototype.setPlaybackQuality=function(e){this.hls.currentLevel=e},t.prototype.prepareMedia=function(e){var t=this,n=void 0,r=!1,i=0,a=!0;return this.currentSource=this.selectSource(e),this.reset(),this.hls=new this.Hls({debug:!1,enableWorker:!0}),this.ludoHlsDetails(e,{hls:this.hls}).then(function(e){var n=e.duration,r=e.liveHoldOff,i=void 0===r?0:r,a=e.startTime,o=e.liveOffset;n&&(t.totalDuration=n-i,t.player.emit(y.default.DURATIONCHANGE,t.totalDuration)),"number"==typeof a&&(t.currentTimeOffset=a),(o||i)&&(t.liveOffset=(o||t.player.get("DEFAULT_LIVE_OFFSET")||0)+i)}),this.hls.on(this.Hls.Events.ERROR,function(e,o){var s=void 0;switch(o.details){case t.Hls.ErrorDetails.MANIFEST_LOAD_ERROR:case t.Hls.ErrorDetails.MANIFEST_LOAD_TIMEOUT:case t.Hls.ErrorDetails.MANIFEST_PARSING_ERROR:case t.Hls.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR:s=m.default.REASONS.MEDIA_LOAD_ERROR;break;case t.Hls.ErrorDetails.LEVEL_LOAD_ERROR:case t.Hls.ErrorDetails.LEVEL_LOAD_TIMEOUT:case t.Hls.ErrorDetails.LEVEL_SWITCH_ERROR:case t.Hls.ErrorDetails.FRAG_LOAD_ERROR:case t.Hls.ErrorDetails.FRAG_LOOP_LOADING_ERROR:case t.Hls.ErrorDetails.FRAG_LOAD_TIMEOUT:case t.Hls.ErrorDetails.FRAG_DECRYPT_ERROR:case t.Hls.ErrorDetails.FRAG_PARSING_ERROR:case t.Hls.ErrorDetails.KEY_LOAD_ERROR:case t.Hls.ErrorDetails.KEY_LOAD_TIMEOUT:case t.Hls.ErrorDetails.BUFFER_APPEND_ERROR:case t.Hls.ErrorDetails.BUFFER_APPENDING_ERROR:case t.Hls.ErrorDetails.BUFFER_STALLED_ERROR:case t.Hls.ErrorDetails.BUFFER_FULL_ERROR:case t.Hls.ErrorDetails.BUFFER_SEEK_OVER_HOLE:s=m.default.REASONS.MEDIA_PLAYBACK_ERROR_NETWORK;break;case t.Hls.ErrorDetails.INTERNAL_EXCEPTION:s=m.default.REASONS.UNKNOWN_ERROR}if(o.type===t.Hls.ErrorTypes.MEDIA_ERROR&&o.fatal&&a&&i<100){var u=(new Date).getTime(),d=!n||u-n>3e3;d?(r&&(t.trace("try to swap Audio Codec ..."),t.hls.swapAudioCodec()),t.trace("try to recover media Error ... ("+i+")"),t.hls.recoverMediaError(),n=u,r=!r,i++,o.fatal=!1):(t.trace("cannot recover, last media error recovery failed ..."),o.fatal=!0)}t.player.error(new Error(o.details),l({},o,{reason:s}))}),this.ready=new A.Promise(function(e){var n=function n(){t.trace("HLS media attached..."),t.hls.loadSource(t.currentSource.src),t.hls.off(t.Hls.Events.MEDIA_ATTACHED,n),e()};t.hls.on(t.Hls.Events.MEDIA_ATTACHED,n)}),this.hls.on(this.Hls.Events.MANIFEST_LOADED,function(){t.playedLevelFragments=t.hls.levels.map(function(){return 0}),t.switchesUp=0,t.switchesDown=0,t.droppedFrames=0}),this.hls.on(this.Hls.Events.FRAG_CHANGED,function(e,n){t.playedLevelFragments[n.frag.level]++}),this.__lastLevel__=null,this.__updateLevel__=function(e){if(t.__lastLevel__!==e){t.__lastLevel__=e;var n=t.hls.levels[e];n&&t.player.emit(y.default.BITRATESWITCH,n.bitrate)}},this.hls.on(this.Hls.Events.LEVEL_SWITCH,function(e,n){t.__updateLevel__(n.level),t.hls.currentLevel>-1&&(n.level>t.hls.currentLevel?t.switchesUp++:t.switchesDown++)}),this.hls.on(this.Hls.Events.LEVEL_LOADED,function(e,n){t.__updateLevel__(n.level)}),this.hls.on(this.Hls.Events.LEVEL_UPDATED,function(e,n){t.__updateLevel__(n.level)}),this.hls.on(this.Hls.Events.FPS_DROP,function(e,n){t.droppedFrames=n.totalDroppedFrames}),A.Promise.resolve()},t.prototype.loadMedia=function(e){var t=this;e.poster&&this.__element__.setAttribute("poster",e.poster);var n=new A.Promise(function(e){var n=function n(){t.__element__.removeEventListener("canplay",n),e()};t.__element__.addEventListener("canplay",n)});return this.hls.detachMedia(),this.hls.attachMedia(this.__element__),n},t.prototype.destroy=function(){return this.reset()},t.prototype.canPlay=function(t){return!(!this.Hls.isSupported()||S.SUPPORTS_NATIVE_HLS)&&e.prototype.canPlay.call(this,t)},t.prototype.selectSource=function(e){return(0,A.arrayFind)(e.sources,function(e){return e.type===R})||null},d(t,[{key:"adapterName",get:function(){return L}}],[{key:"adapterName",get:function(){return L}}]),t}(T.default);t.default=O},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){e.on(d.default.ERROR,function(t,n){if(n.fatal){var r=f.UNKNOWN_ERROR,i=n.reason;i===c.MEDIA_BLOCKED_ERROR?r=t.message||f[i]:f[i]&&(r=f[i]),e.emit(d.default.ERROR_READABLE,r,i)}})}Object.defineProperty(t,"__esModule",{value:!0}),t.ERROR_MESSAGES=void 0;var o;t.default=a;var s=n(4),u=r(s),l=n(1),d=r(l),c=u.default.REASONS,f=t.ERROR_MESSAGES=(o={},i(o,c.METADATA_LOADING_ERROR,"Det oppstod en feil under lasting av mediainnholdets metadata."),i(o,c.MEDIA_BLOCKED_ERROR,"Programmet er ikke tilgjengelig."),i(o,c.MEDIA_PREPARATION_ERROR,"Det oppstod en feil under forberedelse av avspillingen."),i(o,c.MEDIA_SUPPORT_ERROR,"Mediainnhold er ikke støttet av nettleser."),i(o,c.MEDIA_LOAD_ERROR,"Det oppstod en feil under lasting av mediainnholdet."),i(o,c.MEDIA_PLAYBACK_ERROR,"En feil oppstod. Noe var feil med mediainnholdet."),i(o,c.MEDIA_PLAYBACK_ERROR_ABORTED,"Avspilling av mediainnholdet ble avbrutt ved en feil"),i(o,c.MEDIA_PLAYBACK_ERROR_NETWORK,"Avspilling av mediainnholdet gikk galt på grunn av nettverket."),i(o,c.MEDIA_PLAYBACK_ERROR_DECODE,"Det oppstod en feil under dekoding av mediainnholdet."),i(o,c.MEDIA_PLAYBACK_ERROR_SRC_NOT_SUPPORTED,"Avspilling av mediainnholdet er ikke støttet på denne enheten"),i(o,c.UNKNOWN_ERROR,"Det oppsto en ukjent feil."),o)},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e){var t=e;return t||(t=[]),"number"!=typeof t.length&&(t=[t]),t}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"===i(Symbol.iterator)?function(e){return"undefined"==typeof e?"undefined":i(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":"undefined"==typeof e?"undefined":i(e)},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(){function e(t){var r=this;n(this,e),"object"===("undefined"==typeof t?"undefined":a(t))&&Object.keys(t).forEach(function(e){/^(sources|subtitles|thumbnails|isLive|type|startTime)$/.test(e)&&(r[e]=t[e])})}return o(e,[{key:"sources",get:function(){return this._sources||[]},set:function(e){this._sources=r(e)}},{key:"isPlayable",get:function(){return this.sources&&this.sources.length>0}},{key:"isBlocked",get:function(){return!1}},{key:"blockedMessage",get:function(){return""}},{key:"isLive",get:function(){return this._isLive},set:function(e){this._isLive=e}},{key:"isChannel",get:function(){return!1}},{key:"subtitles",get:function(){return this._subtitles||[]},set:function(e){this._subtitles=r(e)}},{key:"defaultSubtitle",get:function(){return this.subtitles.sort(function(e,t){return t.default})[0]}},{key:"hasSubtitles",get:function(){return this.subtitles.length>0}},{key:"hasDefaultSubtitle",get:function(){return this.subtitles.filter(function(e){return e.default}).length>0}},{key:"thumbnails",get:function(){return this._thumbnails||{}},set:function(e){this._thumbnails=e}},{key:"type",get:function(){return this._type||""},set:function(e){this._type=e}},{key:"isVideo",get:function(){return"video"===this.type}},{key:"isAudio",get:function(){return"audio"===this.type}},{key:"chapters",get:function(){return[]}},{key:"captions",get:function(){return[]}},{key:"title",get:function(){return null}},{key:"description",get:function(){return null}},{key:"duration",get:function(){return 0}},{key:"startTime",get:function(){return this._startTime},set:function(e){this._startTime=e}},{key:"legalAge",get:function(){return{}}}]),e}();t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.LudoPlayerFacade,r=void 0===n?h.default:n,i=t.LayerStack,a=void 0===i?d.default:i,s=t.fullscreen,l=void 0===s?S.default:s,f=t.attachBufferingEvents,p=void 0===f?g.default:f,m=t.airplay,y=void 0===m?L.default:m,E=t.debug,T=void 0===E?o.default:E;O=T("ludo:core"),k=T("ludo:core","Error");var A=e||{},w=A.loaders||[],D=A.preparators||[],P=A.adapters||[];return function(e,t){function n(e){var t=Array.isArray(e)?e:[e],n=t.map(function(e){return"string"==typeof e?{id:e}:e});return(0,u.default)(w,[C,n],[]).catch(function(e){throw m(e,{fatal:!0,type:v.default.TYPES.NETWORK_ERROR,reason:v.default.REASONS.METADATA_LOADING_ERROR})})}function i(e){return o(e).then(d).then(h)}function o(e){return O("Cueing...",e),C.emit("cue"),n(e).then(s).then(function(){return C.emit(b.default.CUED)})}function s(e){var t=e.filter(function(e){return!(e.sources&&1===e.sources.length&&(!e.sources[0].src||!e.sources[0].type))});if(!t.length)throw m(new Error("No valid items in list"),{fatal:!0,type:v.default.TYPES.MEDIA_ERROR,reason:v.default.REASONS.METADATA_LOADING_ERROR});N=t}function d(e){O("Prepared with playlist",e);var t=(0,u.default)(D,[C]).then(function(){return C.emit(b.default.PREPARATORSCOMPLETE)});return f(t)}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R.Promise.resolve(),t=g();if(C.emit(b.default.PREPARE),t.isBlocked){var n=t.blockedMessage;return m(new Error(n),{fatal:!0,type:v.default.TYPES.MEDIA_ERROR,reason:v.default.REASONS.MEDIA_BLOCKED_ERROR}),R.Promise.reject(n)}if(!t.isPlayable){O("Media prepared, but is unplayable...");var r="Media is unplayable";return m(new Error(r),{fatal:!0,type:v.default.TYPES.MEDIA_ERROR,reason:v.default.REASONS.METADATA_LOADING_ERROR}),R.Promise.reject(r)}return C.prepareMedia(g()).catch(function(e){var t=v.default.REASONS.MEDIA_PREPARATION_ERROR;throw e&&e.reason===v.default.REASONS.MEDIA_SUPPORT_ERROR&&(t=v.default.REASONS.MEDIA_SUPPORT_ERROR),m(e,{fatal:!0,type:v.default.TYPES.MEDIA_ERROR,reason:t})}).then(function(){t.startTime<t.duration&&t.startTime>0&&(C.seekTo(t.startTime),O("Seek performed with start time",t.startTime))}).then(function(){return C.emit(b.default.PREPARED)}).then(function(){return e}).then(function(){return O("Media prepared")})}function h(){return C.emit("load"),C.loadMedia(g()).catch(function(e){throw m(e,{fatal:!0,type:v.default.TYPES.MEDIA_ERROR,reason:v.default.REASONS.MEDIA_LOAD_ERROR})}).then(function(){return O("Media loaded")}).then(function(){return C.emit(b.default.LOADED)}).then(function(){return C.emit(b.default.READY)})}function m(e,t){return O("There was an error:",e,t),e&&e.stack&&k(e.stack),C.emit(b.default.ERROR,e,t),e}function g(){return N[F]}function E(e){var t=F+e;return C.get(_.default.LOOP)&&(t=(t+N.length)%N.length),I(t)}function T(){return E(-1)}function S(){return E(1)}function A(){return F}function L(e){C.set(_.default.SUBTITLES,e);var t=b.default.SUBTITLESDISABLED;"boolean"==typeof e&&(t=e?b.default.SUBTITLESON:b.default.SUBTITLESOFF),C.emit(t)}function I(e){return e<0||e>=N.length?R.Promise.resolve():(F=e,C.emit(b.default.ITEM_CHANGED),f().then(h).then(C.play))}function x(){C.get(_.default.USE).forEach(function(e){return e(C)})}var C=new r(t,P),M=new a,N=[],F=0,B=l(C);return(0,R.objectAssign)(C,M,{cue:i,current:g,next:S,previous:T,playAt:I,playlist:function(){return N},index:A,error:m,subtitles:L,getMediaItem:n,fullscreen:B.toggle,supportsFullscreen:B.isSupported,airplay:y(C)}),function(){var e=C.get(_.default.STAGE_ELEMENT);if(!e)throw new Error("missing required option "+_.default.STAGE_ELEMENT);(0,R.classList)(e).add("ludo","ludo-stage"),e.tabIndex=0,C.get(_.default.AUTOPLAY)&&!c.SUPPORTS_AUTOPLAY&&C.set(_.default.AUTOPLAY,!1);var t=C.get(_.default.VIDEO_ELEMENT),n=C.get(_.default.POSTER_ELEMENT);n||C.set(_.default.POSTER_ELEMENT,t),C.get(_.default.AUTOADVANCE)&&C.on(b.default.ENDED,function(){return C.next()}),C.on(b.default.LOADED,function(){C.bringToFront(t),C.emit(b.default.PLAYER),C.get(_.default.AUTOPLAY)&&C.play()})}(),x(),i(e).catch(function(e){if(e instanceof Error)throw e}),p(C),C}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n(5),o=r(a),s=n(67),u=r(s),l=n(65),d=r(l),c=n(6),f=n(64),h=r(f),p=n(4),v=r(p),m=n(68),g=r(m),y=n(1),b=r(y),E=n(3),_=r(E),T=n(69),S=r(T),A=n(66),L=r(A),R=n(2),O=void 0,k=void 0},function(e,t){"use strict";var n=Function.prototype.toString,r=/^\s*class /,i=function(e){try{var t=n.call(e),i=t.replace(/\/\/.*\n/g,""),a=i.replace(/\/\*[.\s\S]*\*\//g,""),o=a.replace(/\n/gm," ").replace(/ {2}/g," ");return r.test(o)}catch(e){return!1}},a=function(e){try{return!i(e)&&(n.call(e),!0)}catch(e){return!1}},o=Object.prototype.toString,s="[object Function]",u="[object GeneratorFunction]",l="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;e.exports=function(e){if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if(l)return a(e);if(i(e))return!1;var t=o.call(e);return t===s||t===u}},20,function(e,t){!function(n){if("object"==typeof t&&"undefined"!=typeof e)e.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var r;r="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,r.Hls=n()}}(function(){var e;return function e(t,n,r){function i(o,s){if(!n[o]){if(!t[o]){var u="function"==typeof require&&require;if(!s&&u)return u(o,!0);if(a)return a(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var d=n[o]={exports:{}};t[o][0].call(d.exports,function(e){var n=t[o][1][e];return i(n?n:e)},d,d.exports,e,t,n,r)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function a(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!a(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,a,u,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var d=new Error('Uncaught, unspecified "error" event. ('+t+")");throw d.context=t,d}if(n=this._events[e],s(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),n.apply(this,a)}else if(o(n))for(a=Array.prototype.slice.call(arguments,1),l=n.slice(),r=l.length,u=0;u<r;u++)l[u].apply(this,a);return!0},r.prototype.addListener=function(e,t){var n;if(!i(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(n=s(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},r.prototype.removeListener=function(e,t){var n,r,a,s;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],a=n.length,r=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(s=a;s-- >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){r=s;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],i(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},{}],2:[function(t,n,r){!function(t){var i=/^([^#]*)(.*)$/,a=/^([^\?]*)(.*)$/,o=/^(([a-z]+:\/\/)?[^:\/]+(?::[0-9]+)?)?(\/?.*)$/i,s={buildAbsoluteURL:function(e,t){if(t=t.trim(),/^[a-z]+:/i.test(t))return t;var n=null,r=null,u=i.exec(t);u&&(r=u[2],t=u[1]);var l=a.exec(t);l&&(n=l[2],t=l[1]);var d=i.exec(e);d&&(e=d[1]);var c=a.exec(e);c&&(e=c[1]);var f=o.exec(e);if(!f)throw new Error("Error trying to parse base URL.");var h=f[2]||"",p=f[1]||"",v=f[3];0!==v.indexOf("/")&&""!==p&&(v="/"+v);var m=null;return m=/^\/\//.test(t)?h+s.buildAbsolutePath("",t.substring(2)):/^\//.test(t)?p+"/"+s.buildAbsolutePath("",t.substring(1)):s.buildAbsolutePath(p+v,t),n&&(m+=n),r&&(m+=r),m},buildAbsolutePath:function(e,t){for(var n,r,i=t,a="",o=e.replace(/[^\/]*$/,i.replace(/(\/|^)(?:\.?\/+)+/g,"$1")),s=0;r=o.indexOf("/../",s),r>-1;s=r+n)n=/^\/(?:\.\.\/)*/.exec(o.slice(r))[0].length,a=(a+o.substring(s,r)).replace(new RegExp("(?:\\/+[^\\/]*){0,"+(n-1)/3+"}$"),"/");return a+o.substr(s)}};"object"==typeof r&&"object"==typeof n?n.exports=s:"function"==typeof e&&e.amd?e([],function(){return s}):"object"==typeof r?r.URLToolkit=s:t.URLToolkit=s}(this)},{}],3:[function(e,t,n){var r=arguments[3],i=arguments[4],a=arguments[5],o=JSON.stringify;t.exports=function(e,t){function n(e){m[e]=!0;for(var t in i[e][1]){var r=i[e][1][t];m[r]||n(r)}}for(var s,u=Object.keys(a),l=0,d=u.length;l<d;l++){var c=u[l],f=a[c].exports;if(f===e||f&&f.default===e){s=c;break}}if(!s){s=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var h={},l=0,d=u.length;l<d;l++){var c=u[l];h[c]=c}i[s]=[Function(["require","module","exports"],"("+e+")(self)"),h]}var p=Math.floor(Math.pow(16,8)*Math.random()).toString(16),v={};v[s]=s,i[p]=[Function(["require"],"var f = require("+o(s)+");(f.default ? f.default : f)(self);"),v];var m={};n(p);var g="("+r+")({"+Object.keys(m).map(function(e){return o(e)+":["+i[e][0]+","+o(i[e][1])+"]"}).join(",")+"},{},["+o(p)+"])",y=window.URL||window.webkitURL||window.mozURL||window.msURL,b=new Blob([g],{type:"text/javascript"});if(t&&t.bare)return b;var E=y.createObjectURL(b),_=new Worker(E);return _.objectURL=E,_}},{}],4:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=e(28),l=r(u),d=e(27),c=r(d),f=e(30),h=r(f),p=e(26),v=e(45),m=e(9),g=r(m),y=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,l.default.FRAG_LOADING,l.default.FRAG_LOADED,l.default.FRAG_BUFFERED,l.default.ERROR));return n.lastLoadedFragLevel=0,n._autoLevelCapping=-1,n._nextAutoLevel=-1,n.hls=e,n.onCheck=n.abandonRulesCheck.bind(n),n}return o(t,e),s(t,[{key:"destroy",value:function(){this.clearTimer(),c.default.prototype.destroy.call(this)}},{key:"onFragLoading",value:function(e){var t=e.frag;if("main"===t.type){if(this.timer||(this.timer=setInterval(this.onCheck,100)),!this.bwEstimator){var n=this.hls,r=e.frag.level,i=n.levels[r].details.live,a=n.config,o=void 0,s=void 0;i?(o=a.abrEwmaFastLive,s=a.abrEwmaSlowLive):(o=a.abrEwmaFastVoD,s=a.abrEwmaSlowVoD),this.bwEstimator=new g.default(n,s,o,a.abrEwmaDefaultEstimate)}this.fragCurrent=t}}},{key:"abandonRulesCheck",value:function(){var e=this.hls,t=e.media,n=this.fragCurrent,r=n.loader,i=this.minAutoLevel;if(!r||r.stats&&r.stats.aborted)return v.logger.warn("frag loader destroy or aborted, disarm abandonRules"),void this.clearTimer();var a=r.stats;if(t&&(!t.paused&&0!==t.playbackRate||!t.readyState)&&n.autoLevel&&n.level){var o=performance.now()-a.trequest,s=Math.abs(t.playbackRate);if(o>500*n.duration/s){var u=e.levels,d=Math.max(1,a.bw?a.bw/8:1e3*a.loaded/o),c=u[n.level],f=c.realBitrate?Math.max(c.realBitrate,c.bitrate):c.bitrate,p=a.total?a.total:Math.max(a.loaded,Math.round(n.duration*f/8)),m=t.currentTime,g=(p-a.loaded)/d,y=(h.default.bufferInfo(t,m,e.config.maxBufferHole).end-m)/s;if(y<2*n.duration/s&&g>y){var b=void 0,E=void 0;for(E=n.level-1;E>i;E--){var _=u[E].realBitrate?Math.max(u[E].realBitrate,u[E].bitrate):u[E].bitrate;if(b=n.duration*_/(6.4*d),b<y)break}b<g&&(v.logger.warn("loading too slow, abort fragment loading and switch to level "+E+":fragLoadedDelay["+E+"]<fragLoadedDelay["+(n.level-1)+"];bufferStarvationDelay:"+b.toFixed(1)+"<"+g.toFixed(1)+":"+y.toFixed(1)),e.nextLoadLevel=E,this.bwEstimator.sample(o,a.loaded),r.abort(),this.clearTimer(),e.trigger(l.default.FRAG_LOAD_EMERGENCY_ABORTED,{frag:n,stats:a}))}}}}},{key:"onFragLoaded",value:function(e){var t=e.frag;if("main"===t.type){this.clearTimer(),this.lastLoadedFragLevel=t.level,this._nextAutoLevel=-1;var n=this.hls.levels[t.level],r=(n.loaded?n.loaded.bytes:0)+e.stats.loaded,i=(n.loaded?n.loaded.duration:0)+e.frag.duration;if(n.loaded={bytes:r,duration:i},n.realBitrate=Math.round(8*r/i),e.frag.bitrateTest){var a=e.stats;a.tparsed=a.tbuffered=a.tload,this.onFragBuffered(e)}}}},{key:"onFragBuffered",value:function(e){var t=e.stats,n=e.frag;if(t.aborted!==!0&&1===n.loadCounter&&"main"===n.type&&(!n.bitrateTest||t.tload===t.tbuffered)){var r=t.tparsed-t.trequest;v.logger.log("latency/loading/parsing/append/kbps:"+Math.round(t.tfirst-t.trequest)+"/"+Math.round(t.tload-t.tfirst)+"/"+Math.round(t.tparsed-t.tload)+"/"+Math.round(t.tbuffered-t.tparsed)+"/"+Math.round(8*t.loaded/(t.tbuffered-t.trequest))),this.bwEstimator.sample(r,t.loaded),n.bitrateTest?this.bitrateTestDelay=r/1e3:this.bitrateTestDelay=0}}},{key:"onError",value:function(e){switch(e.details){case p.ErrorDetails.FRAG_LOAD_ERROR:case p.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}}},{key:"clearTimer",value:function(){this.timer&&(clearInterval(this.timer),this.timer=null)}},{key:"findBestLevel",value:function(e,t,n,r,i,a,o,s,u){for(var l=i;l>=r;l--){var d=u[l],c=d.details,f=c?c.totalduration/c.fragments.length:t,h=!!c&&c.live,p=void 0;p=l<=e?o*n:s*n;var m=u[l].realBitrate?Math.max(u[l].realBitrate,u[l].bitrate):u[l].bitrate,g=m*f/p;if(v.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+l+"/"+Math.round(p)+"/"+m+"/"+f+"/"+a+"/"+g),p>m&&(!g||h||g<a))return l}return-1}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(e){this._autoLevelCapping=e}},{key:"nextAutoLevel",get:function(){var e=this._nextAutoLevel,t=this.bwEstimator,n=this.hls,r=n.levels,i=n.config.minAutoBitrate;if(!(e===-1||t&&t.canEstimate()))return Math.min(e,this.maxAutoLevel);var a=this.nextABRAutoLevel;if(e!==-1&&(a=Math.min(e,a)),void 0!==i)for(var o=r[a].realBitrate?Math.max(r[a].realBitrate,r[a].bitrate):r[a].bitrate;o<i;)a++;return a},set:function(e){this._nextAutoLevel=e}},{key:"minAutoLevel",get:function(){for(var e=this.hls,t=e.levels,n=e.config.minAutoBitrate,r=t?t.length:0,i=0;i<r;i++){var a=t[i].realBitrate?Math.max(t[i].realBitrate,t[i].bitrate):t[i].bitrate;if(a>n)return i}return 0}},{key:"maxAutoLevel",get:function(){var e,t=this.hls.levels,n=this._autoLevelCapping;
return e=n===-1&&t&&t.length?t.length-1:n}},{key:"nextABRAutoLevel",get:function(){var e=this.hls,t=this.maxAutoLevel,n=e.levels,r=e.config,i=this.minAutoLevel,a=e.media,o=this.lastLoadedFragLevel,s=this.fragCurrent?this.fragCurrent.duration:0,u=a?a.currentTime:0,l=a&&0!==a.playbackRate?Math.abs(a.playbackRate):1,d=this.bwEstimator?this.bwEstimator.getEstimate():r.abrEwmaDefaultEstimate,c=(h.default.bufferInfo(a,u,r.maxBufferHole).end-u)/l,f=this.findBestLevel(o,s,d,i,t,c,r.abrBandWidthFactor,r.abrBandWidthUpFactor,n);if(f>=0)return f;v.logger.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var p=s?Math.min(s,r.maxStarvationDelay):r.maxStarvationDelay,m=r.abrBandWidthFactor,g=r.abrBandWidthUpFactor;if(0===c){var y=this.bitrateTestDelay;if(y){var b=s?Math.min(s,r.maxLoadingDelay):r.maxLoadingDelay;p=b-y,v.logger.trace("bitrate test took "+Math.round(1e3*y)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*p)+" ms"),m=g=1}}return f=this.findBestLevel(o,s,d,i,t,c+p,m,g,n),Math.max(f,0)}}]),t}(c.default);n.default=y},{26:26,27:27,28:28,30:30,45:45,9:9}],5:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=e(41),d=r(l),c=e(30),f=r(c),h=e(22),p=r(h),v=e(28),m=r(v),g=e(27),y=r(g),b=e(31),E=r(b),_=e(46),T=r(_),S=e(26),A=e(45),L={STOPPED:"STOPPED",STARTING:"STARTING",IDLE:"IDLE",PAUSED:"PAUSED",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS"},R=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,m.default.MEDIA_ATTACHED,m.default.MEDIA_DETACHING,m.default.AUDIO_TRACKS_UPDATED,m.default.AUDIO_TRACK_SWITCHING,m.default.AUDIO_TRACK_LOADED,m.default.KEY_LOADED,m.default.FRAG_LOADED,m.default.FRAG_PARSING_INIT_SEGMENT,m.default.FRAG_PARSING_DATA,m.default.FRAG_PARSED,m.default.ERROR,m.default.BUFFER_CREATED,m.default.BUFFER_APPENDED,m.default.BUFFER_FLUSHED,m.default.INIT_PTS_FOUND));return n.config=e.config,n.audioCodecSwap=!1,n.ticks=0,n._state=L.STOPPED,n.ontick=n.tick.bind(n),n.initPTS=[],n.waitingFragment=null,n}return o(t,e),u(t,[{key:"destroy",value:function(){this.stopLoad(),this.timer&&(clearInterval(this.timer),this.timer=null),y.default.prototype.destroy.call(this),this.state=L.STOPPED}},{key:"onInitPtsFound",value:function(e){var t=e.id,n=e.cc,r=e.initPTS;"main"===t&&(this.initPTS[n]=r,A.logger.log("InitPTS for cc:"+n+" found from video track:"+r),this.state===L.WAITING_INIT_PTS&&(A.logger.log("sending pending audio frag to demuxer"),this.state=L.FRAG_LOADING,this.onFragLoaded(this.waitingFragment),this.waitingFragment=null))}},{key:"startLoad",value:function(e){if(this.tracks){var t=this.lastCurrentTime;this.stopLoad(),this.timer||(this.timer=setInterval(this.ontick,100)),this.fragLoadError=0,t>0&&e===-1?(A.logger.log("audio:override startPosition with lastCurrentTime @"+t.toFixed(3)),this.state=L.IDLE):(this.lastCurrentTime=this.startPosition?this.startPosition:e,this.state=L.STARTING),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=e,this.state=L.STOPPED}},{key:"stopLoad",value:function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=L.STOPPED}},{key:"tick",value:function(){this.ticks++,1===this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)}},{key:"doTick",value:function(){var e,t,n,r,i,a,o=this,u=this.hls,l=u.config,c=function(){switch(o.state){case L.ERROR:case L.PAUSED:case L.BUFFER_FLUSHING:break;case L.STARTING:o.state=L.WAITING_TRACK,o.loadedmetadata=!1;break;case L.IDLE:var s=o.tracks;if(!s)break;if(!o.media&&(o.startFragRequested||!l.startFragPrefetch))break;e=o.loadedmetadata?o.media.currentTime:o.nextLoadPosition;var c=o.mediaBuffer?o.mediaBuffer:o.media,h=f.default.bufferInfo(c,e,l.maxBufferHole),p=h.len,v=h.end,g=o.fragPrevious,y=l.maxMaxBufferLength,b=o.audioSwitch,E=o.trackId;if(p<y&&E<s.length){if(n=s[E].details,"undefined"==typeof n){o.state=L.WAITING_TRACK;break}if(!b&&!n.live&&g&&g.sn===n.endSN&&(!o.media.seeking||o.media.duration-v<g.duration/2)){o.hls.trigger(m.default.BUFFER_EOS,{type:"audio"}),o.state=L.ENDED;break}var _=n.fragments,T=_.length,R=_[0].start,O=_[T-1].start+_[T-1].duration,k=void 0;if(b)if(n.live&&!n.PTSKnown)A.logger.log("switching audiotrack, live stream, unknown PTS,load first fragment"),v=0;else if(v=e,n.PTSKnown&&e<R){if(!(h.end>R||h.nextStart))return{v:void 0};A.logger.log("alt audio track ahead of main track, seek to start of alt audio track"),o.media.currentTime=R+.05}if(v<=R){if(k=_[0],n.live&&k.loadIdx&&k.loadIdx===o.fragLoadIdx){var w=h.nextStart?h.nextStart:R;return A.logger.log("no alt audio available @currentTime:"+o.media.currentTime+", seeking @"+(w+.05)),o.media.currentTime=w+.05,{v:void 0}}}else!function(){var e=void 0,t=l.maxFragLookUpTolerance;v<O?(v>O-t&&(t=0),e=d.default.search(_,function(e){return e.start+e.duration-t<=v?1:e.start-t>v?-1:0}),e||A.logger.log("frag not found @bufferEnd/start:"+v+"/"+R)):e=_[T-1],e&&(k=e,R=e.start,g&&k.level===g.level&&k.sn===g.sn&&(k.sn<n.endSN?(k=_[k.sn+1-n.startSN],A.logger.log("SN just loaded, load next one: "+k.sn)):k=null))}();if(k)if(null!=k.decryptdata.uri&&null==k.decryptdata.key)A.logger.log("Loading key for "+k.sn+" of ["+n.startSN+" ,"+n.endSN+"],track "+E),o.state=L.KEY_LOADING,u.trigger(m.default.KEY_LOADING,{frag:k});else{if(A.logger.log("Loading "+k.sn+" of ["+n.startSN+" ,"+n.endSN+"],track "+E+", currentTime:"+e+",bufferEnd:"+v.toFixed(3)),void 0!==o.fragLoadIdx?o.fragLoadIdx++:o.fragLoadIdx=0,k.loadCounter){k.loadCounter++;var D=l.fragLoadingLoopThreshold;if(k.loadCounter>D&&Math.abs(o.fragLoadIdx-k.loadIdx)<D)return u.trigger(m.default.ERROR,{type:S.ErrorTypes.MEDIA_ERROR,details:S.ErrorDetails.FRAG_LOOP_LOADING_ERROR,fatal:!1,frag:k}),{v:void 0}}else k.loadCounter=1;k.loadIdx=o.fragLoadIdx,o.fragCurrent=k,o.startFragRequested=!0,o.nextLoadPosition=k.start+k.duration,u.trigger(m.default.FRAG_LOADING,{frag:k}),o.state=L.FRAG_LOADING}}break;case L.WAITING_TRACK:t=o.tracks[o.trackId],t&&t.details&&(o.state=L.IDLE);break;case L.FRAG_LOADING_WAITING_RETRY:r=performance.now(),i=o.retryDate,c=o.media,a=c&&c.seeking,(!i||r>=i||a)&&(A.logger.log("audioStreamController: retryDate reached, switch back to IDLE state"),o.state=L.IDLE);break;case L.WAITING_INIT_PTS:case L.STOPPED:case L.FRAG_LOADING:case L.PARSING:case L.PARSED:case L.ENDED:}}();if("object"===("undefined"==typeof c?"undefined":s(c)))return c.v}},{key:"onMediaAttached",value:function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("ended",this.onvended);var n=this.config;this.tracks&&n.autoStartLoad&&this.startLoad(n.startPosition)}},{key:"onMediaDetaching",value:function(){var e=this.media;e&&e.ended&&(A.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.tracks;t&&t.forEach(function(e){e.details&&e.details.fragments.forEach(function(e){e.loadCounter=void 0})}),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()}},{key:"onMediaSeeking",value:function(){this.state===L.ENDED&&(this.state=L.IDLE),this.media&&(this.lastCurrentTime=this.media.currentTime),void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),this.tick()}},{key:"onMediaEnded",value:function(){this.startPosition=this.lastCurrentTime=0}},{key:"onAudioTracksUpdated",value:function(e){A.logger.log("audio tracks updated"),this.tracks=e.audioTracks}},{key:"onAudioTrackSwitching",value:function(e){var t=!!e.url;this.trackId=e.id,this.state=L.IDLE,this.fragCurrent=null,this.state=L.PAUSED,this.waitingFragment=null,t?this.timer||(this.timer=setInterval(this.ontick,100)):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),t&&(this.audioSwitch=!0,this.state=L.IDLE,void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold)),this.tick()}},{key:"onAudioTrackLoaded",value:function(e){var t=e.details,n=e.id,r=this.tracks[n],i=t.totalduration,a=0;if(A.logger.log("track "+n+" loaded ["+t.startSN+","+t.endSN+"],duration:"+i),t.live){var o=r.details;o&&t.fragments.length>0?(E.default.mergeDetails(o,t),a=t.fragments[0].start,t.PTSKnown?A.logger.log("live audio playlist sliding:"+a.toFixed(3)):A.logger.log("live audio playlist - outdated PTS, unknown sliding")):(t.PTSKnown=!1,A.logger.log("live audio playlist - first load, unknown sliding"))}else t.PTSKnown=!1;if(r.details=t,!this.startFragRequested){if(this.startPosition===-1){var s=t.startTimeOffset;isNaN(s)?this.startPosition=0:(A.logger.log("start time offset found in playlist, adjust startPosition to "+s),this.startPosition=s)}this.nextLoadPosition=this.startPosition}this.state===L.WAITING_TRACK&&(this.state=L.IDLE),this.tick()}},{key:"onKeyLoaded",value:function(){this.state===L.KEY_LOADING&&(this.state=L.IDLE,this.tick())}},{key:"onFragLoaded",value:function(e){var t=this.fragCurrent;if(this.state===L.FRAG_LOADING&&t&&"audio"===e.frag.type&&e.frag.level===t.level&&e.frag.sn===t.sn){this.state=L.PARSING,this.stats=e.stats;var n=this.tracks[this.trackId],r=n.details,i=r.totalduration,a=t.start,o=t.level,s=t.sn,u=t.cc,l=this.config.defaultAudioCodec||n.audioCodec;this.appended=!1,this.demuxer||(this.demuxer=new p.default(this.hls,"audio"));var d=this.initPTS[u];if(void 0!==d){this.pendingBuffering=!0,A.logger.log("Demuxing "+s+" of ["+r.startSN+" ,"+r.endSN+"],track "+o);var c=!1;this.demuxer.push(e.payload,l,null,a,u,o,s,i,t.decryptdata,c,d)}else A.logger.log("unknown video PTS for continuity counter "+u+", waiting for video PTS before demuxing audio frag "+s+" of ["+r.startSN+" ,"+r.endSN+"],track "+o),this.waitingFragment=e,this.state=L.WAITING_INIT_PTS}this.fragLoadError=0}},{key:"onFragParsingInitSegment",value:function(e){var t=this.fragCurrent;if(t&&"audio"===e.id&&e.sn===t.sn&&e.level===t.level&&this.state===L.PARSING){var n=e.tracks,r=void 0;if(n.video&&delete n.video,r=n.audio){r.levelCodec="mp4a.40.2",r.id=e.id,this.hls.trigger(m.default.BUFFER_CODECS,n),A.logger.log("audio track:audio,container:"+r.container+",codecs[level/parsed]=["+r.levelCodec+"/"+r.codec+"]");var i=r.initSegment;if(i){var a={type:"audio",data:i,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[a]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(m.default.BUFFER_APPENDING,a))}this.tick()}}}},{key:"onFragParsingData",value:function(e){var t=this,n=this.fragCurrent;n&&"audio"===e.id&&"audio"===e.type&&e.sn===n.sn&&e.level===n.level&&this.state===L.PARSING&&!function(){var n=t.trackId,r=t.tracks[n],i=t.fragCurrent,a=t.hls;A.logger.log("parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb),E.default.updateFragPTSDTS(r.details,i.sn,e.startPTS,e.endPTS);var o=t.audioSwitch,s=t.media,u=!1;if(o&&s)if(s.readyState){var l=s.currentTime;A.logger.log("switching audio track : currentTime:"+l),l>=e.startPTS&&(A.logger.log("switching audio track : flushing all audio"),t.state=L.BUFFER_FLUSHING,a.trigger(m.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),u=!0,t.audioSwitch=!1,a.trigger(m.default.AUDIO_TRACK_SWITCHED,{id:n}))}else t.audioSwitch=!1,a.trigger(m.default.AUDIO_TRACK_SWITCHED,{id:n});var d=t.pendingData;t.audioSwitch||([e.data1,e.data2].forEach(function(t){t&&d.push({type:e.type,data:t,parent:"audio",content:"data"})}),!u&&d.length&&(d.forEach(function(e){t.pendingBuffering=!0,t.hls.trigger(m.default.BUFFER_APPENDING,e)}),t.pendingData=[],t.appended=!0)),t.tick()}()}},{key:"onFragParsed",value:function(e){var t=this.fragCurrent;t&&"audio"===e.id&&e.sn===t.sn&&e.level===t.level&&this.state===L.PARSING&&(this.stats.tparsed=performance.now(),this.state=L.PARSED,this._checkAppendedParsed())}},{key:"onBufferCreated",value:function(e){var t=e.tracks.audio;t&&(this.mediaBuffer=t.buffer,this.loadedmetadata=!0)}},{key:"onBufferAppended",value:function(e){if("audio"===e.parent){var t=this.state;t!==L.PARSING&&t!==L.PARSED||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}}},{key:"_checkAppendedParsed",value:function(){if(!(this.state!==L.PARSED||this.appended&&this.pendingBuffering)){var e=this.fragCurrent,t=this.stats,n=this.hls;if(e){this.fragPrevious=e,t.tbuffered=performance.now(),n.trigger(m.default.FRAG_BUFFERED,{stats:t,frag:e,id:"audio"});var r=this.mediaBuffer?this.mediaBuffer:this.media;A.logger.log("audio buffered : "+T.default.toString(r.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,n.trigger(m.default.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=L.IDLE}this.tick()}}},{key:"onError",value:function(e){var t=e.frag;if(!t||"audio"===t.type)switch(e.details){case S.ErrorDetails.FRAG_LOAD_ERROR:case S.ErrorDetails.FRAG_LOAD_TIMEOUT:if(!e.fatal){var n=this.fragLoadError;n?n++:n=1;var r=this.config;if(n<=r.fragLoadingMaxRetry){this.fragLoadError=n,t.loadCounter=0;var i=Math.min(Math.pow(2,n-1)*r.fragLoadingRetryDelay,r.fragLoadingMaxRetryTimeout);A.logger.warn("audioStreamController: frag loading failed, retry in "+i+" ms"),this.retryDate=performance.now()+i,this.state=L.FRAG_LOADING_WAITING_RETRY}else A.logger.error("audioStreamController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.hls.trigger(m.default.ERROR,e),this.state=L.ERROR}break;case S.ErrorDetails.FRAG_LOOP_LOADING_ERROR:case S.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case S.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case S.ErrorDetails.KEY_LOAD_ERROR:case S.ErrorDetails.KEY_LOAD_TIMEOUT:this.state!==L.ERROR&&(this.state=e.fatal?L.ERROR:L.IDLE,A.logger.warn("audioStreamController: "+e.details+" while loading frag,switch to "+this.state+" state ..."))}}},{key:"onBufferFlushed",value:function(){var e=this,t=this.pendingData;t&&t.length?(A.logger.log("appending pending audio data on Buffer Flushed"),t.forEach(function(t){e.hls.trigger(m.default.BUFFER_APPENDING,t)}),this.appended=!0,this.pendingData=[],this.state=L.PARSED):(this.state=L.IDLE,this.fragPrevious=null,this.tick())}},{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,A.logger.log("audio stream:"+t+"->"+e)}},get:function(){return this._state}}]),t}(y.default);n.default=R},{22:22,26:26,27:27,28:28,30:30,31:31,41:41,45:45,46:46}],6:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=e(28),l=r(u),d=e(27),c=r(d),f=e(45),h=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,l.default.MANIFEST_LOADING,l.default.MANIFEST_LOADED,l.default.AUDIO_TRACK_LOADED));return n.ticks=0,n.ontick=n.tick.bind(n),n}return o(t,e),s(t,[{key:"destroy",value:function(){c.default.prototype.destroy.call(this)}},{key:"tick",value:function(){this.ticks++,1===this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)}},{key:"doTick",value:function(){this.updateTrack(this.trackId)}},{key:"onManifestLoading",value:function(){this.tracks=[],this.trackId=-1}},{key:"onManifestLoaded",value:function(e){var t=this,n=e.audioTracks||[],r=!1;this.tracks=n,this.hls.trigger(l.default.AUDIO_TRACKS_UPDATED,{audioTracks:n});var i=0;n.forEach(function(e){return e.default?(t.audioTrack=i,void(r=!0)):void i++}),r===!1&&n.length&&(f.logger.log("no default audio track defined, use first audio track as default"),this.audioTrack=0)}},{key:"onAudioTrackLoaded",value:function(e){e.id<this.tracks.length&&(f.logger.log("audioTrack "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.timer&&(this.timer=setInterval(this.ontick,1e3*e.details.targetduration)),!e.details.live&&this.timer&&(clearInterval(this.timer),this.timer=null))}},{key:"setAudioTrackInternal",value:function(e){if(e>=0&&e<this.tracks.length){this.timer&&(clearInterval(this.timer),this.timer=null),this.trackId=e,f.logger.log("switching to audioTrack "+e);var t=this.tracks[e],n=this.hls,r=t.type,i=t.url,a={id:e,type:r,url:i};n.trigger(l.default.AUDIO_TRACK_SWITCH,a),n.trigger(l.default.AUDIO_TRACK_SWITCHING,a);var o=t.details;!i||void 0!==o&&o.live!==!0||(f.logger.log("(re)loading playlist for audioTrack "+e),n.trigger(l.default.AUDIO_TRACK_LOADING,{url:i,id:e}))}}},{key:"updateTrack",value:function(e){if(e>=0&&e<this.tracks.length){this.timer&&(clearInterval(this.timer),this.timer=null),this.trackId=e,f.logger.log("updating audioTrack "+e);var t=this.tracks[e],n=t.url,r=t.details;!n||void 0!==r&&r.live!==!0||(f.logger.log("(re)loading playlist for audioTrack "+e),this.hls.trigger(l.default.AUDIO_TRACK_LOADING,{url:n,id:e}))}}},{key:"audioTracks",get:function(){return this.tracks}},{key:"audioTrack",get:function(){return this.trackId},set:function(e){this.trackId===e&&void 0!==this.tracks[e].details||this.setAudioTrackInternal(e)}}]),t}(c.default);n.default=h},{27:27,28:28,45:45}],7:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=e(28),l=r(u),d=e(27),c=r(d),f=e(45),h=e(26),p=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,l.default.MEDIA_ATTACHING,l.default.MEDIA_DETACHING,l.default.MANIFEST_PARSED,l.default.BUFFER_RESET,l.default.BUFFER_APPENDING,l.default.BUFFER_CODECS,l.default.BUFFER_EOS,l.default.BUFFER_FLUSHING,l.default.LEVEL_PTS_UPDATED,l.default.LEVEL_UPDATED));return n._msDuration=null,n._levelDuration=null,n.onsbue=n.onSBUpdateEnd.bind(n),n.onsbe=n.onSBUpdateError.bind(n),n.pendingTracks={},n.tracks={},n}return o(t,e),s(t,[{key:"destroy",value:function(){c.default.prototype.destroy.call(this)}},{key:"onLevelPtsUpdated",value:function(e){var t=e.type,n=this.tracks.audio;if("audio"===t&&n&&"audio/mpeg"===n.container){var r=this.sourceBuffer.audio,i=Math.abs(r.timestampOffset-e.start);if(i>.1){var a=r.updating;try{r.abort()}catch(e){a=!0,f.logger.warn("can not abort audio buffer: "+e)}a?this.audioTimestampOffset=e.start:(f.logger.warn("change mpeg audio timestamp offset from "+r.timestampOffset+" to "+e.start),r.timestampOffset=e.start)}}}},{key:"onManifestParsed",value:function(e){var t=e.audio,n=e.video,r=0;e.altAudio&&(t||n)&&(r=(t?1:0)+(n?1:0),f.logger.log(r+" sourceBuffer(s) expected")),this.sourceBufferNb=r}},{key:"onMediaAttaching",value:function(e){var t=this.media=e.media;if(t){var n=this.mediaSource=new MediaSource;this.onmso=this.onMediaSourceOpen.bind(this),this.onmse=this.onMediaSourceEnded.bind(this),this.onmsc=this.onMediaSourceClose.bind(this),n.addEventListener("sourceopen",this.onmso),n.addEventListener("sourceended",this.onmse),n.addEventListener("sourceclose",this.onmsc),t.src=URL.createObjectURL(n)}}},{key:"onMediaDetaching",value:function(){f.logger.log("media source detaching");var e=this.mediaSource;if(e){if("open"===e.readyState)try{e.endOfStream()}catch(e){f.logger.warn("onMediaDetaching:"+e.message+" while calling endOfStream")}e.removeEventListener("sourceopen",this.onmso),e.removeEventListener("sourceended",this.onmse),e.removeEventListener("sourceclose",this.onmsc),this.media&&(URL.revokeObjectURL(this.media.src),this.media.removeAttribute("src"),this.media.load()),this.mediaSource=null,this.media=null,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.onmso=this.onmse=this.onmsc=null,this.hls.trigger(l.default.MEDIA_DETACHED)}},{key:"onMediaSourceOpen",value:function(){f.logger.log("media source opened"),this.hls.trigger(l.default.MEDIA_ATTACHED,{media:this.media});var e=this.mediaSource;e&&e.removeEventListener("sourceopen",this.onmso),this.checkPendingTracks()}},{key:"checkPendingTracks",value:function(){var e=this.pendingTracks,t=Object.keys(e).length;t&&(this.sourceBufferNb<=t||0===this.sourceBufferNb)&&(this.createSourceBuffers(e),this.pendingTracks={},this.doAppending())}},{key:"onMediaSourceClose",value:function(){f.logger.log("media source closed")}},{key:"onMediaSourceEnded",value:function(){f.logger.log("media source ended")}},{key:"onSBUpdateEnd",value:function(){if(this.audioTimestampOffset){var e=this.sourceBuffer.audio;f.logger.warn("change mpeg audio timestamp offset from "+e.timestampOffset+" to "+this.audioTimestampOffset),e.timestampOffset=this.audioTimestampOffset,delete this.audioTimestampOffset}this._needsFlush&&this.doFlush(),this._needsEos&&this.checkEos(),this.appending=!1;var t=this.parent,n=this.segments.reduce(function(e,n){return n.parent===t?e+1:e},0);this.hls.trigger(l.default.BUFFER_APPENDED,{parent:t,pending:n}),this._needsFlush||this.doAppending(),this.updateMediaElementDuration()}},{key:"onSBUpdateError",value:function(e){f.logger.error("sourceBuffer error:"+e),this.hls.trigger(l.default.ERROR,{type:h.ErrorTypes.MEDIA_ERROR,details:h.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})}},{key:"onBufferReset",value:function(){var e=this.sourceBuffer;for(var t in e){var n=e[t];try{this.mediaSource.removeSourceBuffer(n),n.removeEventListener("updateend",this.onsbue),n.removeEventListener("error",this.onsbe)}catch(e){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}},{key:"onBufferCodecs",value:function(e){if(0===Object.keys(this.sourceBuffer).length){for(var t in e)this.pendingTracks[t]=e[t];var n=this.mediaSource;n&&"open"===n.readyState&&this.checkPendingTracks()}}},{key:"createSourceBuffers",value:function(e){var t=this.sourceBuffer,n=this.mediaSource;for(var r in e)if(!t[r]){var i=e[r],a=i.levelCodec||i.codec,o=i.container+";codecs="+a;f.logger.log("creating sourceBuffer("+o+")");try{var s=t[r]=n.addSourceBuffer(o);s.addEventListener("updateend",this.onsbue),s.addEventListener("error",this.onsbe),this.tracks[r]={codec:a,container:i.container},i.buffer=s}catch(e){f.logger.error("error while trying to add sourceBuffer:"+e.message),this.hls.trigger(l.default.ERROR,{type:h.ErrorTypes.MEDIA_ERROR,details:h.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:e,mimeType:o})}}this.hls.trigger(l.default.BUFFER_CREATED,{tracks:e})}},{key:"onBufferAppending",value:function(e){this._needsFlush||(this.segments?this.segments.push(e):this.segments=[e],this.doAppending())}},{key:"onBufferAppendFail",value:function(e){f.logger.error("sourceBuffer error:",e.event),this.hls.trigger(l.default.ERROR,{type:h.ErrorTypes.MEDIA_ERROR,details:h.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1,frag:this.fragCurrent})}},{key:"onBufferEos",value:function(e){var t=this.sourceBuffer,n=e.type;for(var r in t)n&&r!==n||t[r].ended||(t[r].ended=!0,f.logger.log(r+" sourceBuffer now EOS"));this.checkEos()}},{key:"checkEos",value:function(){var e=this.sourceBuffer,t=this.mediaSource;if(!t||"open"!==t.readyState)return void(this._needsEos=!1);for(var n in e){var r=e[n];if(!r.ended)return;if(r.updating)return void(this._needsEos=!0)}f.logger.log("all media data available, signal endOfStream() to MediaSource and stop loading fragment");try{t.endOfStream()}catch(e){f.logger.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1}},{key:"onBufferFlushing",value:function(e){this.flushRange.push({start:e.startOffset,end:e.endOffset,type:e.type}),this.flushBufferCounter=0,this.doFlush()}},{key:"onLevelUpdated",value:function(e){var t=e.details;0!==t.fragments.length&&(this._levelDuration=t.totalduration+t.fragments[0].start,this.updateMediaElementDuration())}},{key:"updateMediaElementDuration",value:function(){var e=this.media,t=this.mediaSource,n=this.sourceBuffer,r=this._levelDuration;if(null!==r&&e&&t&&n&&0!==e.readyState&&"open"===t.readyState){for(var i in n)if(n[i].updating)return;null===this._msDuration&&(this._msDuration=t.duration);var a=e.duration;(r>this._msDuration&&r>a||a===1/0||isNaN(a))&&(f.logger.log("Updating mediasource duration to "+r.toFixed(3)),this._msDuration=t.duration=r)}}},{key:"doFlush",value:function(){for(;this.flushRange.length;){var e=this.flushRange[0];if(!this.flushBuffer(e.start,e.end,e.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var t=0,n=this.sourceBuffer;try{for(var r in n)t+=n[r].buffered.length}catch(e){f.logger.error("error while accessing sourceBuffer.buffered")}this.appended=t,this.hls.trigger(l.default.BUFFER_FLUSHED)}}},{key:"doAppending",value:function(){var e=this.hls,t=this.sourceBuffer,n=this.segments;if(Object.keys(t).length){if(this.media.error)return this.segments=[],void f.logger.error("trying to append although a media error occured, flush segment and abort");if(this.appending)return;if(n&&n.length){var r=n.shift();try{var i=r.type,a=t[i];a?a.updating?n.unshift(r):(a.ended=!1,this.parent=r.parent,a.appendBuffer(r.data),this.appendError=0,this.appended++,this.appending=!0):this.onSBUpdateEnd()}catch(t){f.logger.error("error while trying to append buffer:"+t.message),n.unshift(r);var o={type:h.ErrorTypes.MEDIA_ERROR};if(22===t.code)return this.segments=[],o.details=h.ErrorDetails.BUFFER_FULL_ERROR,o.fatal=!1,void e.trigger(l.default.ERROR,o);if(this.appendError?this.appendError++:this.appendError=1,o.details=h.ErrorDetails.BUFFER_APPEND_ERROR,o.frag=this.fragCurrent,this.appendError>e.config.appendErrorMaxRetry)return f.logger.log("fail "+e.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),n=[],o.fatal=!0,void e.trigger(l.default.ERROR,o);o.fatal=!1,e.trigger(l.default.ERROR,o)}}}}},{key:"flushBuffer",value:function(e,t,n){var r,i,a,o,s,u,l=this.sourceBuffer;if(Object.keys(l).length){if(f.logger.log("flushBuffer,pos/start/end: "+this.media.currentTime.toFixed(3)+"/"+e+"/"+t),this.flushBufferCounter<this.appended){for(var d in l)if(!n||d===n){if(r=l[d],r.ended=!1,r.updating)return f.logger.warn("cannot flush, sb updating in progress"),!1;try{for(i=0;i<r.buffered.length;i++)if(a=r.buffered.start(i),o=r.buffered.end(i),navigator.userAgent.toLowerCase().indexOf("firefox")!==-1&&t===Number.POSITIVE_INFINITY?(s=e,u=t):(s=Math.max(a,e),u=Math.min(o,t)),Math.min(u,o)-s>.5)return this.flushBufferCounter++,f.logger.log("flush "+d+" ["+s+","+u+"], of ["+a+","+o+"], pos:"+this.media.currentTime),r.remove(s,u),!1}catch(e){f.logger.warn("exception while accessing sourcebuffer, it might have been removed from MediaSource")}}}else f.logger.warn("abort flushing too many retries");f.logger.log("buffer flushed")}return!0}}]),t}(c.default);n.default=p},{26:26,27:27,28:28,45:45}],8:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=e(28),l=r(u),d=e(27),c=r(d),f=function(e){function t(e){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,l.default.FPS_DROP_LEVEL_CAPPING,l.default.MEDIA_ATTACHING,l.default.MANIFEST_PARSED))}return o(t,e),s(t,[{key:"destroy",value:function(){this.hls.config.capLevelToPlayerSize&&(this.media=this.restrictedLevels=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer)))}},{key:"onFpsDropLevelCapping",value:function(e){this.restrictedLevels||(this.restrictedLevels=[]),this.isLevelRestricted(e.droppedLevel)||this.restrictedLevels.push(e.droppedLevel)}},{key:"onMediaAttaching",value:function(e){this.media=e.media instanceof HTMLVideoElement?e.media:null}},{key:"onManifestParsed",value:function(e){var t=this.hls;t.config.capLevelToPlayerSize&&(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.levels=e.levels,t.firstLevel=this.getMaxLevel(e.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}},{key:"detectPlayerSize",value:function(){if(this.media){var e=this.levels?this.levels.length:0;if(e){var t=this.hls;t.autoLevelCapping=this.getMaxLevel(e-1),t.autoLevelCapping>this.autoLevelCapping&&t.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}}},{key:"getMaxLevel",value:function(e){
var t=0,n=void 0,r=void 0,i=this.mediaWidth,a=this.mediaHeight,o=0,s=0;for(n=0;n<=e&&(r=this.levels[n],!this.isLevelRestricted(n))&&(t=n,o=r.width,s=r.height,!(i<=o||a<=s));n++);return t}},{key:"isLevelRestricted",value:function(e){return!(!this.restrictedLevels||this.restrictedLevels.indexOf(e)===-1)}},{key:"contentScaleFactor",get:function(){var e=1;try{e=window.devicePixelRatio}catch(e){}return e}},{key:"mediaWidth",get:function(){var e=void 0,t=this.media;return t&&(e=t.width||t.clientWidth||t.offsetWidth,e*=this.contentScaleFactor),e}},{key:"mediaHeight",get:function(){var e=void 0,t=this.media;return t&&(e=t.height||t.clientHeight||t.offsetHeight,e*=this.contentScaleFactor),e}}]),t}(c.default);n.default=f},{27:27,28:28}],9:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e(44),s=r(o),u=function(){function e(t,n,r,a){i(this,e),this.hls=t,this.defaultEstimate_=a,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new s.default(n),this.fast_=new s.default(r)}return a(e,[{key:"sample",value:function(e,t){e=Math.max(e,this.minDelayMs_);var n=8e3*t/e,r=e/1e3;this.fast_.sample(r,n),this.slow_.sample(r,n)}},{key:"canEstimate",value:function(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_}},{key:"getEstimate",value:function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}},{key:"destroy",value:function(){}}]),e}();n.default=u},{44:44}],10:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=e(28),l=r(u),d=e(27),c=r(d),f=e(45),h=function(e){function t(e){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,l.default.MEDIA_ATTACHING))}return o(t,e),s(t,[{key:"destroy",value:function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1}},{key:"onMediaAttaching",value:function(e){var t=this.hls.config;if(t.capLevelOnFPSDrop){var n=this.video=e.media instanceof HTMLVideoElement?e.media:null;"function"==typeof n.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),t.fpsDroppedMonitoringPeriod)}}},{key:"checkFPS",value:function(e,t,n){var r=performance.now();if(t){if(this.lastTime){var i=r-this.lastTime,a=n-this.lastDroppedFrames,o=t-this.lastDecodedFrames,s=1e3*a/i,u=this.hls;if(u.trigger(l.default.FPS_DROP,{currentDropped:a,currentDecoded:o,totalDroppedFrames:n}),s>0&&a>u.config.fpsDroppedMonitoringThreshold*o){var d=u.currentLevel;f.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+d),d>0&&(u.autoLevelCapping===-1||u.autoLevelCapping>=d)&&(d-=1,u.trigger(l.default.FPS_DROP_LEVEL_CAPPING,{level:d,droppedLevel:u.currentLevel}),u.autoLevelCapping=d,u.streamController.nextLevelSwitch())}}this.lastTime=r,this.lastDroppedFrames=n,this.lastDecodedFrames=t}}},{key:"checkFPSInterval",value:function(){var e=this.video;if(e)if(this.isVideoPlaybackQualityAvailable){var t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}}]),t}(c.default);n.default=h},{27:27,28:28,45:45}],11:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=e(28),l=r(u),d=e(27),c=r(d),f=e(45),h=e(26),p=e(30),v=r(p),m=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,l.default.MANIFEST_LOADED,l.default.LEVEL_LOADED,l.default.FRAG_LOADED,l.default.ERROR));return n.ontick=n.tick.bind(n),n._manualLevel=n._autoLevelCapping=-1,n}return o(t,e),s(t,[{key:"destroy",value:function(){this.timer&&(clearTimeout(this.timer),this.timer=null),this._manualLevel=-1}},{key:"startLoad",value:function(){this.canload=!0;var e=this._levels;e&&e.forEach(function(e){e.loadError=0;var t=e.details;t&&t.live&&(e.details=void 0)}),this.timer&&this.tick()}},{key:"stopLoad",value:function(){this.canload=!1}},{key:"onManifestLoaded",value:function(e){var t,n=[],r=[],i={},a=!1,o=!1,s=this.hls,u=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),d=function(e,t){return MediaSource.isTypeSupported(e+"/mp4;codecs="+t)};if(e.levels.forEach(function(e){e.videoCodec&&(a=!0),u&&e.audioCodec&&e.audioCodec.indexOf("mp4a.40.34")!==-1&&(e.audioCodec=void 0),(e.audioCodec||e.attrs&&e.attrs.AUDIO)&&(o=!0);var t=i[e.bitrate];void 0===t?(i[e.bitrate]=n.length,e.url=[e.url],e.urlId=0,n.push(e)):n[t].url.push(e.url)}),a&&o?n.forEach(function(e){e.videoCodec&&r.push(e)}):r=n,r=r.filter(function(e){var t=e.audioCodec,n=e.videoCodec;return(!t||d("audio",t))&&(!n||d("video",n))}),r.length){t=r[0].bitrate,r.sort(function(e,t){return e.bitrate-t.bitrate}),this._levels=r;for(var c=0;c<r.length;c++)if(r[c].bitrate===t){this._firstLevel=c,f.logger.log("manifest loaded,"+r.length+" level(s) found, first bitrate:"+t);break}s.trigger(l.default.MANIFEST_PARSED,{levels:r,firstLevel:this._firstLevel,stats:e.stats,audio:o,video:a,altAudio:e.audioTracks.length>0})}else s.trigger(l.default.ERROR,{type:h.ErrorTypes.MEDIA_ERROR,details:h.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:s.url,reason:"no level with compatible codecs found in manifest"})}},{key:"setLevelInternal",value:function(e){var t=this._levels;if(e>=0&&e<t.length){this.timer&&(clearTimeout(this.timer),this.timer=null),this._level!==e&&(f.logger.log("switching to level "+e),this._level=e,this.hls.trigger(l.default.LEVEL_SWITCH,{level:e}));var n=t[e],r=n.details;if(!r||r.live===!0){var i=n.urlId;this.hls.trigger(l.default.LEVEL_LOADING,{url:n.url[i],level:e,id:i})}}else this.hls.trigger(l.default.ERROR,{type:h.ErrorTypes.OTHER_ERROR,details:h.ErrorDetails.LEVEL_SWITCH_ERROR,level:e,fatal:!1,reason:"invalid level idx"})}},{key:"onError",value:function(e){if(!e.fatal){var t=e.details,n=this.hls,r=void 0,i=void 0,a=!1,o=n.abrController,s=o.minAutoLevel;switch(t){case h.ErrorDetails.FRAG_LOAD_ERROR:case h.ErrorDetails.FRAG_LOAD_TIMEOUT:case h.ErrorDetails.FRAG_LOOP_LOADING_ERROR:case h.ErrorDetails.KEY_LOAD_ERROR:case h.ErrorDetails.KEY_LOAD_TIMEOUT:r=e.frag.level;break;case h.ErrorDetails.LEVEL_LOAD_ERROR:case h.ErrorDetails.LEVEL_LOAD_TIMEOUT:r=e.context.level,a=!0;break;case h.ErrorDetails.REMUX_ALLOC_ERROR:r=e.level}if(void 0!==r){i=this._levels[r],i.loadError?i.loadError++:i.loadError=1;var u=i.url.length;if(u>1&&i.loadError<u)i.urlId=(i.urlId+1)%u,i.details=void 0,f.logger.warn("level controller,"+t+" for level "+r+": switching to redundant stream id "+i.urlId);else{var d=this._manualLevel===-1&&r;if(d)f.logger.warn("level controller,"+t+": switch-down for next fragment"),o.nextAutoLevel=Math.max(s,r-1);else if(i&&i.details&&i.details.live)f.logger.warn("level controller,"+t+" on live stream, discard"),a&&(this._level=void 0);else if(t===h.ErrorDetails.LEVEL_LOAD_ERROR||t===h.ErrorDetails.LEVEL_LOAD_TIMEOUT){var c=n.media,p=c&&v.default.isBuffered(c,c.currentTime)&&v.default.isBuffered(c,c.currentTime+.5);if(p){var m=n.config.levelLoadingRetryDelay;f.logger.warn("level controller,"+t+", but media buffered, retry in "+m+"ms"),this.timer=setTimeout(this.ontick,m)}else f.logger.error("cannot recover "+t+" error"),this._level=void 0,this.timer&&(clearTimeout(this.timer),this.timer=null),e.fatal=!0,n.trigger(l.default.ERROR,e)}}}}}},{key:"onFragLoaded",value:function(e){var t=e.frag;if(t&&"main"===t.type){var n=this._levels[t.level];n&&(n.loadError=0)}}},{key:"onLevelLoaded",value:function(e){var t=e.level;if(t===this._level){var n=this._levels[t];n.loadError=0;var r=e.details;if(r.live){var i=1e3*(r.averagetargetduration?r.averagetargetduration:r.targetduration),a=n.details;a&&r.endSN===a.endSN&&(i/=2,f.logger.log("same live playlist, reload twice faster")),i-=performance.now()-e.stats.trequest,i=Math.max(1e3,Math.round(i)),f.logger.log("live playlist, reload in "+i+" ms"),this.timer=setTimeout(this.ontick,i)}else this.timer=null}}},{key:"tick",value:function(){var e=this._level;if(void 0!==e&&this.canload){var t=this._levels[e],n=t.urlId;this.hls.trigger(l.default.LEVEL_LOADING,{url:t.url[n],level:e,id:n})}}},{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this._level},set:function(e){var t=this._levels;t&&t.length>e&&(this._level===e&&void 0!==t[e].details||this.setLevelInternal(e))}},{key:"manualLevel",get:function(){return this._manualLevel},set:function(e){this._manualLevel=e,void 0===this._startLevel&&(this._startLevel=e),e!==-1&&(this.level=e)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(e){this._firstLevel=e}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var e=this.hls.config.startLevel;return void 0!==e?e:this._firstLevel}return this._startLevel},set:function(e){e!==-1&&(e=Math.max(e,this.hls.abrController.minAutoLevel)),this._startLevel=e}},{key:"nextLoadLevel",get:function(){return this._manualLevel!==-1?this._manualLevel:this.hls.abrController.nextAutoLevel},set:function(e){this.level=e,this._manualLevel===-1&&(this.hls.abrController.nextAutoLevel=e)}}]),t}(c.default);n.default=m},{26:26,27:27,28:28,30:30,45:45}],12:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=e(41),l=r(u),d=e(30),c=r(d),f=e(22),h=r(f),p=e(28),v=r(p),m=e(27),g=r(m),y=e(31),b=r(y),E=e(46),_=r(E),T=e(26),S=e(45),A={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_LEVEL:"WAITING_LEVEL",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR"},L=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,v.default.MEDIA_ATTACHED,v.default.MEDIA_DETACHING,v.default.MANIFEST_LOADING,v.default.MANIFEST_PARSED,v.default.LEVEL_LOADED,v.default.KEY_LOADED,v.default.FRAG_LOADED,v.default.FRAG_LOAD_EMERGENCY_ABORTED,v.default.FRAG_PARSING_INIT_SEGMENT,v.default.FRAG_PARSING_DATA,v.default.FRAG_PARSED,v.default.ERROR,v.default.AUDIO_TRACK_SWITCHING,v.default.AUDIO_TRACK_SWITCHED,v.default.BUFFER_CREATED,v.default.BUFFER_APPENDED,v.default.BUFFER_FLUSHED));return n.config=e.config,n.audioCodecSwap=!1,n.ticks=0,n._state=A.STOPPED,n.ontick=n.tick.bind(n),n}return o(t,e),s(t,[{key:"destroy",value:function(){this.stopLoad(),this.timer&&(clearInterval(this.timer),this.timer=null),g.default.prototype.destroy.call(this),this.state=A.STOPPED}},{key:"startLoad",value:function(e){if(this.levels){var t=this.lastCurrentTime,n=this.hls;if(this.stopLoad(),this.timer||(this.timer=setInterval(this.ontick,100)),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var r=n.startLevel;r===-1&&(r=0,this.bitrateTest=!0),this.level=n.nextLoadLevel=r,this.loadedmetadata=!1}t>0&&e===-1&&(S.logger.log("override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=A.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else S.logger.warn("cannot start loading as manifest not parsed yet"),this.state=A.STOPPED}},{key:"stopLoad",value:function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=A.STOPPED}},{key:"tick",value:function(){this.ticks++,1===this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)}},{key:"doTick",value:function(){switch(this.state){case A.ERROR:break;case A.BUFFER_FLUSHING:this.fragLoadError=0;break;case A.IDLE:if(!this._doTickIdle())return;break;case A.WAITING_LEVEL:var e=this.levels[this.level];e&&e.details&&(this.state=A.IDLE);break;case A.FRAG_LOADING_WAITING_RETRY:var t=performance.now(),n=this.retryDate;(!n||t>=n||this.media&&this.media.seeking)&&(S.logger.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=A.IDLE);break;case A.ERROR:case A.STOPPED:case A.FRAG_LOADING:case A.PARSING:case A.PARSED:case A.ENDED:}this._checkBuffer(),this._checkFragmentChanged()}},{key:"_doTickIdle",value:function(){var e=this.hls,t=e.config,n=this.media;if(void 0!==this.levelLastLoaded&&!n&&(this.startFragRequested||!t.startFragPrefetch))return!0;var r=void 0;r=this.loadedmetadata?n.currentTime:this.nextLoadPosition;var i=e.nextLoadLevel,a=this.levels[i],o=a.bitrate,s=void 0;s=o?Math.max(8*t.maxBufferSize/o,t.maxBufferLength):t.maxBufferLength,s=Math.min(s,t.maxMaxBufferLength);var u=c.default.bufferInfo(this.mediaBuffer?this.mediaBuffer:n,r,t.maxBufferHole),l=u.len;if(l>=s)return!0;S.logger.trace("buffer length of "+l.toFixed(3)+" is below max of "+s.toFixed(3)+". checking for more payload ..."),this.level=e.nextLoadLevel=i;var d=a.details;if("undefined"==typeof d||d.live&&this.levelLastLoaded!==i)return this.state=A.WAITING_LEVEL,!0;var f=this.fragPrevious;if(!d.live&&f&&f.sn===d.endSN&&n.duration-Math.max(u.end,f.start)<=Math.max(.2,f.duration/2)){var h={};return this.altAudio&&(h.type="video"),this.hls.trigger(v.default.BUFFER_EOS,h),this.state=A.ENDED,!0}return this._fetchPayloadOrEos(r,u,d)}},{key:"_fetchPayloadOrEos",value:function(e,t,n){var r=this.fragPrevious,i=this.level,a=n.fragments,o=a.length;if(0===o)return!1;var s=a[0].start,u=a[o-1].start+a[o-1].duration,l=t.end,d=void 0;if(n.live){var c=this.config.initialLiveManifestSize;if(o<c)return S.logger.warn("Can not start playback of a level, reason: not enough fragments "+o+" < "+c),!1;if(d=this._ensureFragmentAtLivePoint(n,l,s,u,r,a,o),null===d)return!1}else l<s&&(d=a[0]);return d||(d=this._findFragment(s,r,o,a,l,u,n)),!d||this._loadFragmentOrKey(d,i,n,e,l)}},{key:"_ensureFragmentAtLivePoint",value:function(e,t,n,r,i,a,o){var s=this.hls.config,u=this.media,l=void 0,d=void 0!==s.liveMaxLatencyDuration?s.liveMaxLatencyDuration:s.liveMaxLatencyDurationCount*e.targetduration;if(t<Math.max(n-s.maxFragLookUpTolerance,r-d)){var c=this.liveSyncPosition=this.computeLivePosition(n,e);S.logger.log("buffer end: "+t.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+c.toFixed(3)),t=c,u&&u.readyState&&u.duration>c&&(u.currentTime=c)}if(e.PTSKnown&&t>r&&u&&u.readyState)return null;if(this.startFragRequested&&!e.PTSKnown){if(i){var f=i.sn+1;f>=e.startSN&&f<=e.endSN&&(l=a[f-e.startSN],S.logger.log("live playlist, switching playlist, load frag with next SN: "+l.sn))}l||(l=a[Math.min(o-1,Math.round(o/2))],S.logger.log("live playlist, switching playlist, unknown, load middle frag : "+l.sn))}return l}},{key:"_findFragment",value:function(e,t,n,r,i,a,o){var s=this.hls.config,u=void 0,d=void 0,c=s.maxFragLookUpTolerance;if(i<a?(i>a-c&&(c=0),d=l.default.search(r,function(e){return e.start+e.duration-c<=i?1:e.start-c>i&&e.start?-1:0})):d=r[n-1],d&&(u=d,e=d.start,t&&u.level===t.level&&u.sn===t.sn))if(u.sn<o.endSN){var f=t.deltaPTS,h=u.sn-o.startSN;f&&f>s.maxBufferHole&&t.dropped&&h?(u=r[h-1],S.logger.warn("SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this"),t.loadCounter--):(u=r[h+1],S.logger.log("SN just loaded, load next one: "+u.sn))}else u=null;return u}},{key:"_loadFragmentOrKey",value:function(e,t,n,r,i){var a=this.hls,o=a.config;if(null==e.decryptdata.uri||null!=e.decryptdata.key){if(S.logger.log("Loading "+e.sn+" of ["+n.startSN+" ,"+n.endSN+"],level "+t+", currentTime:"+r.toFixed(3)+",bufferEnd:"+i.toFixed(3)),void 0!==this.fragLoadIdx?this.fragLoadIdx++:this.fragLoadIdx=0,e.loadCounter){e.loadCounter++;var s=o.fragLoadingLoopThreshold;if(e.loadCounter>s&&Math.abs(this.fragLoadIdx-e.loadIdx)<s)return a.trigger(v.default.ERROR,{type:T.ErrorTypes.MEDIA_ERROR,details:T.ErrorDetails.FRAG_LOOP_LOADING_ERROR,fatal:!1,frag:e}),!1}else e.loadCounter=1;return e.loadIdx=this.fragLoadIdx,this.fragCurrent=e,this.startFragRequested=!0,this.nextLoadPosition=e.start+e.duration,e.autoLevel=a.autoLevelEnabled,e.bitrateTest=this.bitrateTest,a.trigger(v.default.FRAG_LOADING,{frag:e}),this.demuxer||(this.demuxer=new h.default(a,"main")),this.state=A.FRAG_LOADING,!0}S.logger.log("Loading key for "+e.sn+" of ["+n.startSN+" ,"+n.endSN+"],level "+t),this.state=A.KEY_LOADING,a.trigger(v.default.KEY_LOADING,{frag:e})}},{key:"getBufferRange",value:function(e){return l.default.search(this.bufferRange,function(t){return e<t.start?-1:e>t.end?1:0})}},{key:"followingBufferRange",value:function(e){return e?this.getBufferRange(e.end+.5):null}},{key:"_checkFragmentChanged",value:function(){var e,t,n=this.media;if(n&&n.readyState&&n.seeking===!1&&(t=n.currentTime,t>n.playbackRate*this.lastCurrentTime&&(this.lastCurrentTime=t),c.default.isBuffered(n,t)?e=this.getBufferRange(t):c.default.isBuffered(n,t+.1)&&(e=this.getBufferRange(t+.1)),e)){var r=e.frag;r!==this.fragPlaying&&(this.fragPlaying=r,this.hls.trigger(v.default.FRAG_CHANGED,{frag:r}))}}},{key:"immediateLevelSwitch",value:function(){if(S.logger.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var e=this.media,t=void 0;e?(t=e.paused,e.pause()):t=!0,this.previouslyPaused=t}var n=this.fragCurrent;n&&n.loader&&n.loader.abort(),this.fragCurrent=null,this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}},{key:"immediateLevelSwitchEnd",value:function(){var e=this.media;e&&e.buffered.length&&(this.immediateSwitch=!1,c.default.isBuffered(e,e.currentTime)&&(e.currentTime-=1e-4),this.previouslyPaused||e.play())}},{key:"nextLevelSwitch",value:function(){var e=this.media;if(e&&e.readyState){var t=void 0,n=void 0,r=void 0;if(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,n=this.getBufferRange(e.currentTime),n&&n.start>1&&this.flushMainBuffer(0,n.start-1),e.paused)t=0;else{var i=this.hls.nextLoadLevel,a=this.levels[i],o=this.fragLastKbps;t=o&&this.fragCurrent?this.fragCurrent.duration*a.bitrate/(1e3*o)+1:0}if(r=this.getBufferRange(e.currentTime+t),r&&(r=this.followingBufferRange(r))){var s=this.fragCurrent;s&&s.loader&&s.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(r.start,Number.POSITIVE_INFINITY)}}}},{key:"flushMainBuffer",value:function(e,t){this.state=A.BUFFER_FLUSHING;var n={startOffset:e,endOffset:t};this.altAudio&&(n.type="video"),this.hls.trigger(v.default.BUFFER_FLUSHING,n)}},{key:"onMediaAttached",value:function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("seeked",this.onvseeked),t.addEventListener("ended",this.onvended);var n=this.config;this.levels&&n.autoStartLoad&&this.hls.startLoad(n.startPosition)}},{key:"onMediaDetaching",value:function(){var e=this.media;e&&e.ended&&(S.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.levels;t&&t.forEach(function(e){e.details&&e.details.fragments.forEach(function(e){e.loadCounter=void 0})}),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("seeked",this.onvseeked),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()}},{key:"onMediaSeeking",value:function(){var e=this.media,t=e?e.currentTime:void 0,n=this.config;if(S.logger.log("media seeking to "+t.toFixed(3)),this.state===A.FRAG_LOADING){var r=this.mediaBuffer?this.mediaBuffer:e,i=c.default.bufferInfo(r,t,this.config.maxBufferHole),a=this.fragCurrent;if(0===i.len&&a){var o=n.maxFragLookUpTolerance,s=a.start-o,u=a.start+a.duration+o;t<s||t>u?(a.loader&&(S.logger.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),a.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=A.IDLE):S.logger.log("seeking outside of buffer but within currently loaded fragment range")}}else this.state===A.ENDED&&(this.state=A.IDLE);e&&(this.lastCurrentTime=t),this.state!==A.FRAG_LOADING&&void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*n.fragLoadingLoopThreshold),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=t),this.tick()}},{key:"onMediaSeeked",value:function(){S.logger.log("media seeked to "+this.media.currentTime.toFixed(3)),this.tick()}},{key:"onMediaEnded",value:function(){S.logger.log("media ended"),this.startPosition=this.lastCurrentTime=0}},{key:"onManifestLoading",value:function(){S.logger.log("trigger BUFFER_RESET"),this.hls.trigger(v.default.BUFFER_RESET),this.bufferRange=[],this.stalled=!1,this.startPosition=this.lastCurrentTime=0}},{key:"onManifestParsed",value:function(e){var t,n=!1,r=!1;e.levels.forEach(function(e){t=e.audioCodec,t&&(t.indexOf("mp4a.40.2")!==-1&&(n=!0),t.indexOf("mp4a.40.5")!==-1&&(r=!0))}),this.audioCodecSwitch=n&&r,this.audioCodecSwitch&&S.logger.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=e.levels,this.startLevelLoaded=!1,this.startFragRequested=!1;var i=this.config;i.autoStartLoad&&this.hls.startLoad(i.startPosition)}},{key:"onLevelLoaded",value:function(e){var t=e.details,n=e.level,r=this.levels[n],i=t.totalduration,a=0;if(S.logger.log("level "+n+" loaded ["+t.startSN+","+t.endSN+"],duration:"+i),this.levelLastLoaded=n,t.live){var o=r.details;o&&t.fragments.length>0?(b.default.mergeDetails(o,t),a=t.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(a,o),t.PTSKnown?S.logger.log("live playlist sliding:"+a.toFixed(3)):S.logger.log("live playlist - outdated PTS, unknown sliding")):(t.PTSKnown=!1,S.logger.log("live playlist - first load, unknown sliding"))}else t.PTSKnown=!1;if(r.details=t,this.hls.trigger(v.default.LEVEL_UPDATED,{details:t,level:n}),this.startFragRequested===!1){if(this.startPosition===-1||this.lastCurrentTime===-1){var s=t.startTimeOffset;isNaN(s)?t.live?(this.startPosition=this.computeLivePosition(a,t),S.logger.log("configure startPosition to "+this.startPosition)):this.startPosition=0:(s<0&&(S.logger.log("negative start time offset "+s+", count from end of last fragment"),s=a+i+s),S.logger.log("start time offset found in playlist, adjust startPosition to "+s),this.startPosition=s),this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===A.WAITING_LEVEL&&(this.state=A.IDLE),this.tick()}},{key:"onKeyLoaded",value:function(){this.state===A.KEY_LOADING&&(this.state=A.IDLE,this.tick())}},{key:"onFragLoaded",value:function(e){var t=this.fragCurrent,n=e.frag;if(this.state===A.FRAG_LOADING&&t&&"main"===n.type&&n.level===t.level&&n.sn===t.sn){var r=e.stats,i=this.levels[t.level],a=i.details;if(S.logger.log("Loaded  "+t.sn+" of ["+a.startSN+" ,"+a.endSN+"],level "+t.level),this.bitrateTest=!1,n.bitrateTest===!0&&this.hls.nextLoadLevel)this.state=A.IDLE,this.startFragRequested=!1,r.tparsed=r.tbuffered=performance.now(),this.hls.trigger(v.default.FRAG_BUFFERED,{stats:r,frag:t,id:"main"}),this.tick();else{this.state=A.PARSING,this.stats=r;var o=a.totalduration,s=isNaN(t.startDTS)?t.start:t.startDTS,u=t.level,l=t.sn,d=this.config.defaultAudioCodec||i.audioCodec;this.audioCodecSwap&&(S.logger.log("swapping playlist audio codec"),void 0===d&&(d=this.lastAudioCodec),d&&(d=d.indexOf("mp4a.40.5")!==-1?"mp4a.40.2":"mp4a.40.5")),this.pendingBuffering=!0,this.appended=!1,S.logger.log("Parsing "+l+" of ["+a.startSN+" ,"+a.endSN+"],level "+u+", cc "+t.cc);var c=this.demuxer;c||(c=this.demuxer=new h.default(this.hls,"main"));var f=this.media,p=f&&f.seeking,m=!p&&(a.PTSKnown||!a.live);c.push(e.payload,d,i.videoCodec,s,t.cc,u,l,o,t.decryptdata,m,null)}}this.fragLoadError=0}},{key:"onFragParsingInitSegment",value:function(e){var t=this.fragCurrent;if(t&&"main"===e.id&&e.sn===t.sn&&e.level===t.level&&this.state===A.PARSING){var n,r,i=e.tracks;if(i.audio&&this.altAudio&&delete i.audio,r=i.audio){var a=this.levels[this.level].audioCodec,o=navigator.userAgent.toLowerCase();a&&this.audioCodecSwap&&(S.logger.log("swapping playlist audio codec"),a=a.indexOf("mp4a.40.5")!==-1?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==r.metadata.channelCount&&o.indexOf("firefox")===-1&&(a="mp4a.40.5"),o.indexOf("android")!==-1&&"audio/mpeg"!==r.container&&(a="mp4a.40.2",S.logger.log("Android: force audio codec to "+a)),r.levelCodec=a,r.id=e.id}if(r=i.video,r&&(r.levelCodec=this.levels[this.level].videoCodec,r.id=e.id),e.unique){var s={codec:"",levelCodec:""};for(n in e.tracks)r=i[n],s.container=r.container,s.codec&&(s.codec+=",",s.levelCodec+=","),r.codec&&(s.codec+=r.codec),r.levelCodec&&(s.levelCodec+=r.levelCodec);i={audiovideo:s}}this.hls.trigger(v.default.BUFFER_CODECS,i);for(n in i){r=i[n],S.logger.log("main track:"+n+",container:"+r.container+",codecs[level/parsed]=["+r.levelCodec+"/"+r.codec+"]");var u=r.initSegment;u&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(v.default.BUFFER_APPENDING,{type:n,data:u,parent:"main",content:"initSegment"}))}this.tick()}}},{key:"onFragParsingData",value:function(e){var t=this,n=this.fragCurrent;if(n&&"main"===e.id&&e.sn===n.sn&&e.level===n.level&&("audio"!==e.type||!this.altAudio)&&this.state===A.PARSING){var r=this.levels[this.level],i=this.fragCurrent;S.logger.log("Parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb+",dropped:"+(e.dropped||0));var a=b.default.updateFragPTSDTS(r.details,i.sn,e.startPTS,e.endPTS,e.startDTS,e.endDTS),o=this.hls;o.trigger(v.default.LEVEL_PTS_UPDATED,{details:r.details,level:this.level,drift:a,type:e.type,start:e.startPTS,end:e.endPTS}),"video"===e.type&&(i.dropped=e.dropped),[e.data1,e.data2].forEach(function(n){n&&(t.appended=!0,t.pendingBuffering=!0,o.trigger(v.default.BUFFER_APPENDING,{type:e.type,data:n,parent:"main",content:"data"}))}),this.tick()}}},{key:"onFragParsed",value:function(e){var t=this.fragCurrent;t&&"main"===e.id&&e.sn===t.sn&&e.level===t.level&&this.state===A.PARSING&&(this.stats.tparsed=performance.now(),this.state=A.PARSED,this._checkAppendedParsed())}},{key:"onAudioTrackSwitching",value:function(e){var t=!!e.url,n=e.id;if(!t){if(this.mediaBuffer!==this.media){S.logger.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var r=this.fragCurrent;r.loader&&(S.logger.log("switching to main audio track, cancel main fragment load"),r.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=A.IDLE}var i=this.hls;i.trigger(v.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),i.trigger(v.default.AUDIO_TRACK_SWITCHED,{id:n}),this.altAudio=!1}}},{key:"onAudioTrackSwitched",value:function(e){var t=e.id,n=!!this.hls.audioTracks[t].url;if(n){var r=this.videoBuffer;r&&this.mediaBuffer!==r&&(S.logger.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=r)}this.altAudio=n,this.tick()}},{key:"onBufferCreated",value:function(e){var t=e.tracks,n=void 0,r=void 0,i=!1;for(var a in t){var o=t[a];"main"===o.id?(r=a,n=o,"video"===a&&(this.videoBuffer=t[a].buffer)):i=!0}i&&n?(S.logger.log("alternate track found, use "+r+".buffered to schedule main fragment loading"),this.mediaBuffer=n.buffer):this.mediaBuffer=this.media}},{key:"onBufferAppended",value:function(e){if("main"===e.parent){var t=this.state;t!==A.PARSING&&t!==A.PARSED||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}}},{key:"_checkAppendedParsed",value:function(){var e=this;if(!(this.state!==A.PARSED||this.appended&&this.pendingBuffering)){var t=this.fragCurrent;t&&!function(){var n=e.mediaBuffer?e.mediaBuffer:e.media;S.logger.log("main buffered : "+_.default.toString(n.buffered));var r=e.bufferRange.filter(function(e){return c.default.isBuffered(n,(e.start+e.end)/2)});r.push({type:t.type,start:t.startPTS,end:t.endPTS,frag:t}),e.bufferRange=r.sort(function(e,t){return e.start-t.start}),e.fragPrevious=t;var i=e.stats;i.tbuffered=performance.now(),e.fragLastKbps=Math.round(8*i.total/(i.tbuffered-i.tfirst)),e.hls.trigger(v.default.FRAG_BUFFERED,{stats:i,frag:t,id:"main"}),e.state=A.IDLE}(),this.tick()}}},{key:"onError",value:function(e){var t=e.frag||this.fragCurrent;if(!t||"main"===t.type){var n=this.media,r=n&&c.default.isBuffered(n,n.currentTime)&&c.default.isBuffered(n,n.currentTime+.5);switch(e.details){case T.ErrorDetails.FRAG_LOAD_ERROR:case T.ErrorDetails.FRAG_LOAD_TIMEOUT:case T.ErrorDetails.KEY_LOAD_ERROR:case T.ErrorDetails.KEY_LOAD_TIMEOUT:if(!e.fatal){var i=this.fragLoadError;i?i++:i=1;var a=this.config;if(i<=a.fragLoadingMaxRetry||r||t.autoLevel&&t.level){this.fragLoadError=i,t.loadCounter=0;var o=Math.min(Math.pow(2,i-1)*a.fragLoadingRetryDelay,a.fragLoadingMaxRetryTimeout);S.logger.warn("mediaController: frag loading failed, retry in "+o+" ms"),this.retryDate=performance.now()+o,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.state=A.FRAG_LOADING_WAITING_RETRY;
}else S.logger.error("mediaController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.hls.trigger(v.default.ERROR,e),this.state=A.ERROR}break;case T.ErrorDetails.FRAG_LOOP_LOADING_ERROR:e.fatal||(r?(this._reduceMaxBufferLength(t.duration),this.state=A.IDLE):t.autoLevel&&0!==t.level||(e.fatal=!0,this.hls.trigger(v.default.ERROR,e),this.state=A.ERROR));break;case T.ErrorDetails.LEVEL_LOAD_ERROR:case T.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==A.ERROR&&(e.fatal?(this.state=A.ERROR,S.logger.warn("streamController: "+e.details+",switch to "+this.state+" state ...")):this.state===A.WAITING_LEVEL&&(this.state=A.IDLE));break;case T.ErrorDetails.BUFFER_FULL_ERROR:this.state!==A.PARSING&&this.state!==A.PARSED||(r?(this._reduceMaxBufferLength(t.duration),this.state=A.IDLE):(S.logger.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}}},{key:"_reduceMaxBufferLength",value:function(e){var t=this.config;t.maxMaxBufferLength>=e&&(t.maxMaxBufferLength/=2,S.logger.warn("reduce max buffer length to "+t.maxMaxBufferLength+"s and switch to IDLE state"),this.fragLoadIdx+=2*t.fragLoadingLoopThreshold)}},{key:"_checkBuffer",value:function(){var e=this.media;if(e&&e.readyState){var t=e.currentTime,n=this.mediaBuffer?this.mediaBuffer:e,r=n.buffered;if(this.loadedmetadata||!r.length||e.seeking)if(this.immediateSwitch)this.immediateLevelSwitchEnd();else{var i=c.default.bufferInfo(e,t,0),a=!(e.paused||e.ended||0===e.buffered.length),o=.5,s=t!==this.lastCurrentTime,u=this.config;if(s)this.stallReported&&(S.logger.warn("playback not stuck anymore @"+t+", after "+Math.round(performance.now()-this.stalled)+"ms"),this.stallReported=!1),this.stalled=void 0,this.nudgeRetry=0;else if(a){var l=performance.now(),d=this.hls;if(this.stalled){var f=l-this.stalled,h=i.len,p=this.nudgeRetry||0;if(h<=o&&f>1e3*u.lowBufferWatchdogPeriod){this.stallReported||(this.stallReported=!0,S.logger.warn("playback stalling in low buffer @"+t),d.trigger(v.default.ERROR,{type:T.ErrorTypes.MEDIA_ERROR,details:T.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:h}));var m=i.nextStart,g=m-t;if(m&&g<u.maxSeekHole&&g>0){this.nudgeRetry=++p;var y=p*u.nudgeOffset;S.logger.log("adjust currentTime from "+e.currentTime+" to next buffered @ "+m+" + nudge "+y),e.currentTime=m+y,this.stalled=void 0,d.trigger(v.default.ERROR,{type:T.ErrorTypes.MEDIA_ERROR,details:T.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,hole:m+y-t})}}else if(h>o&&f>1e3*u.highBufferWatchdogPeriod)if(this.stallReported||(this.stallReported=!0,S.logger.warn("playback stalling in high buffer @"+t),d.trigger(v.default.ERROR,{type:T.ErrorTypes.MEDIA_ERROR,details:T.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:h})),this.stalled=void 0,this.nudgeRetry=++p,p<u.nudgeMaxRetry){var b=e.currentTime,E=b+p*u.nudgeOffset;S.logger.log("adjust currentTime from "+b+" to "+E),e.currentTime=E,d.trigger(v.default.ERROR,{type:T.ErrorTypes.MEDIA_ERROR,details:T.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else S.logger.error("still stuck in high buffer @"+t+" after "+u.nudgeMaxRetry+", raise fatal error"),d.trigger(v.default.ERROR,{type:T.ErrorTypes.MEDIA_ERROR,details:T.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})}else this.stalled=l,this.stallReported=!1}}else{this.loadedmetadata=!0;var _=this.startPosition,A=c.default.isBuffered(n,_);t===_&&A||(S.logger.log("target start position:"+_),A||(_=r.start(0),S.logger.log("target start position not buffered, seek to buffered.start(0) "+_)),S.logger.log("adjust currentTime from "+t+" to "+_),e.currentTime=_)}}}},{key:"onFragLoadEmergencyAborted",value:function(){this.state=A.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()}},{key:"onBufferFlushed",value:function(){var e=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferRange=this.bufferRange.filter(function(t){return c.default.isBuffered(e,(t.start+t.end)/2)}),this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,this.state=A.IDLE,this.fragPrevious=null}},{key:"swapAudioCodec",value:function(){this.audioCodecSwap=!this.audioCodecSwap}},{key:"computeLivePosition",value:function(e,t){var n=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*t.targetduration;return e+Math.max(0,t.totalduration-n)}},{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,S.logger.log("main stream:"+t+"->"+e),this.hls.trigger(v.default.STREAM_STATE_TRANSITION,{previousState:t,nextState:e})}},get:function(){return this._state}},{key:"currentLevel",get:function(){var e=this.media;if(e){var t=this.getBufferRange(e.currentTime);if(t)return t.frag.level}return-1}},{key:"nextBufferRange",get:function(){var e=this.media;return e?this.followingBufferRange(this.getBufferRange(e.currentTime)):null}},{key:"nextLevel",get:function(){var e=this.nextBufferRange;return e?e.frag.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(e){this._liveSyncPosition=e}}]),t}(g.default);n.default=L},{22:22,26:26,27:27,28:28,30:30,31:31,41:41,45:45,46:46}],13:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=e(28),l=r(u),d=e(27),c=r(d),f=e(42),h=r(f),p=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,l.default.MEDIA_ATTACHING,l.default.MEDIA_DETACHING,l.default.FRAG_PARSING_USERDATA,l.default.MANIFEST_LOADING,l.default.FRAG_LOADED,l.default.LEVEL_SWITCH));if(n.hls=e,n.config=e.config,n.enabled=!0,n.Cues=e.config.cueHandler,n.config.enableCEA708Captions){var r=n,o=function(e,t){var n=null;try{n=new window.Event("addtrack")}catch(e){n=document.createEvent("Event"),n.initEvent("addtrack",!1,!1)}n.track=e,t.dispatchEvent(n)},s={newCue:function(e,t,n){if(!r.textTrack1){var i=r.getExistingTrack("1");i?(r.textTrack1=i,r.clearCurrentCues(r.textTrack1),o(r.textTrack1,r.media)):(r.textTrack1=r.createTextTrack("captions","English","en"),r.textTrack1.textTrack1=!0)}r.Cues.newCue(r.textTrack1,e,t,n)}},u={newCue:function(e,t,n){if(!r.textTrack2){var i=r.getExistingTrack("2");i?(r.textTrack2=i,r.clearCurrentCues(r.textTrack2),o(r.textTrack2,r.media)):(r.textTrack2=r.createTextTrack("captions","Spanish","es"),r.textTrack2.textTrack2=!0)}r.Cues.newCue(r.textTrack2,e,t,n)}};n.cea608Parser=new h.default(0,s,u)}return n}return o(t,e),s(t,[{key:"clearCurrentCues",value:function(e){if(e&&e.cues)for(;e.cues.length>0;)e.removeCue(e.cues[0])}},{key:"getExistingTrack",value:function(e){var t=this.media;if(t)for(var n=0;n<t.textTracks.length;n++){var r=t.textTracks[n],i="textTrack"+e;if(r[i]===!0)return r}return null}},{key:"createTextTrack",value:function(e,t,n){if(this.media)return this.media.addTextTrack(e,t,n)}},{key:"destroy",value:function(){c.default.prototype.destroy.call(this)}},{key:"onMediaAttaching",value:function(e){this.media=e.media}},{key:"onMediaDetaching",value:function(){this.clearCurrentCues(this.textTrack1),this.clearCurrentCues(this.textTrack2)}},{key:"onManifestLoading",value:function(){this.lastPts=Number.NEGATIVE_INFINITY}},{key:"onLevelSwitch",value:function(){"NONE"===this.hls.currentLevel.closedCaptions?this.enabled=!1:this.enabled=!0}},{key:"onFragLoaded",value:function(e){if("main"===e.frag.type){var t=e.frag.start;t<=this.lastPts&&(this.clearCurrentCues(this.textTrack1),this.clearCurrentCues(this.textTrack2)),this.lastPts=t}}},{key:"onFragParsingUserdata",value:function(e){if(this.enabled&&this.config.enableCEA708Captions)for(var t=0;t<e.samples.length;t++){var n=this.extractCea608Data(e.samples[t].bytes);this.cea608Parser.addData(e.samples[t].pts,n)}}},{key:"extractCea608Data",value:function(e){for(var t,n,r,i,a,o=31&e[0],s=2,u=[],l=0;l<o;l++)t=e[s++],n=127&e[s++],r=127&e[s++],i=0!==(4&t),a=3&t,0===n&&0===r||i&&0===a&&(u.push(n),u.push(r));return u}}]),t}(c.default);n.default=p},{27:27,28:28,42:42}],14:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,n){r(this,e),this.subtle=t,this.aesIV=n}return i(e,[{key:"decrypt",value:function(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)}}]),e}();n.default=a},{}],15:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){r(this,e),this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[],this.subMix[0]=new Uint32Array(256),this.subMix[1]=new Uint32Array(256),this.subMix[2]=new Uint32Array(256),this.subMix[3]=new Uint32Array(256),this.invSubMix=[],this.invSubMix[0]=new Uint32Array(256),this.invSubMix[1]=new Uint32Array(256),this.invSubMix[2]=new Uint32Array(256),this.invSubMix[3]=new Uint32Array(256),this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}return i(e,[{key:"uint8ArrayToUint32Array_",value:function(e){for(var t=new DataView(e),n=new Uint32Array(4),r=0;r<n.length;r++)n[r]=t.getUint32(4*r);return n}},{key:"initTable",value:function(){var e=this.sBox,t=this.invSBox,n=this.subMix[0],r=this.subMix[1],i=this.subMix[2],a=this.subMix[3],o=this.invSubMix[0],s=this.invSubMix[1],u=this.invSubMix[2],l=this.invSubMix[3],d=new Uint32Array(256),c=0,f=0,h=0;for(h=0;h<256;h++)h<128?d[h]=h<<1:d[h]=h<<1^283;for(h=0;h<256;h++){var p=f^f<<1^f<<2^f<<3^f<<4;p=p>>>8^255&p^99,e[c]=p,t[p]=c;var v=d[c],m=d[v],g=d[m],y=257*d[p]^16843008*p;n[c]=y<<24|y>>>8,r[c]=y<<16|y>>>16,i[c]=y<<8|y>>>24,a[c]=y,y=16843009*g^65537*m^257*v^16843008*c,o[p]=y<<24|y>>>8,s[p]=y<<16|y>>>16,u[p]=y<<8|y>>>24,l[p]=y,c?(c=v^d[d[d[g^v]]],f^=d[d[f]]):c=f=1}}},{key:"expandKey",value:function(e){for(var t=this.uint8ArrayToUint32Array_(e),n=!0,r=0;r<t.length&&n;)n=t[r]===this.key[r],r++;if(!n){this.key=t;var i=this.keySize=t.length;if(4!==i&&6!==i&&8!==i)throw new Error("Invalid aes key size="+i);var a=this.ksRows=4*(i+6+1),o=void 0,s=void 0,u=this.keySchedule=new Uint32Array(this.ksRows),l=this.invKeySchedule=new Uint32Array(this.ksRows),d=this.sBox,c=this.rcon,f=this.invSubMix[0],h=this.invSubMix[1],p=this.invSubMix[2],v=this.invSubMix[3],m=void 0,g=void 0;for(o=0;o<a;o++)o<i?m=u[o]=t[o]:(g=m,o%i===0?(g=g<<8|g>>>24,g=d[g>>>24]<<24|d[g>>>16&255]<<16|d[g>>>8&255]<<8|d[255&g],g^=c[o/i|0]<<24):i>6&&o%i===4&&(g=d[g>>>24]<<24|d[g>>>16&255]<<16|d[g>>>8&255]<<8|d[255&g]),u[o]=m=(u[o-i]^g)>>>0);for(s=0;s<a;s++)o=a-s,g=3&s?u[o]:u[o-4],s<4||o<=4?l[s]=g:l[s]=f[d[g>>>24]]^h[d[g>>>16&255]]^p[d[g>>>8&255]]^v[d[255&g]],l[s]=l[s]>>>0}}},{key:"networkToHostOrderSwap",value:function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24}},{key:"decrypt",value:function(e,t,n){for(var r,i,a=this.keySize+6,o=this.invKeySchedule,s=this.invSBox,u=this.invSubMix[0],l=this.invSubMix[1],d=this.invSubMix[2],c=this.invSubMix[3],f=this.uint8ArrayToUint32Array_(n),h=f[0],p=f[1],v=f[2],m=f[3],g=new Int32Array(e),y=new Int32Array(g.length),b=void 0,E=void 0,_=void 0,T=void 0,S=void 0,A=void 0,L=void 0,R=void 0,O=void 0,k=void 0,w=void 0,D=void 0;t<g.length;){for(O=this.networkToHostOrderSwap(g[t]),k=this.networkToHostOrderSwap(g[t+1]),w=this.networkToHostOrderSwap(g[t+2]),D=this.networkToHostOrderSwap(g[t+3]),S=O^o[0],A=D^o[1],L=w^o[2],R=k^o[3],r=4,i=1;i<a;i++)b=u[S>>>24]^l[A>>16&255]^d[L>>8&255]^c[255&R]^o[r],E=u[A>>>24]^l[L>>16&255]^d[R>>8&255]^c[255&S]^o[r+1],_=u[L>>>24]^l[R>>16&255]^d[S>>8&255]^c[255&A]^o[r+2],T=u[R>>>24]^l[S>>16&255]^d[A>>8&255]^c[255&L]^o[r+3],S=b,A=E,L=_,R=T,r+=4;b=s[S>>>24]<<24^s[A>>16&255]<<16^s[L>>8&255]<<8^s[255&R]^o[r],E=s[A>>>24]<<24^s[L>>16&255]<<16^s[R>>8&255]<<8^s[255&S]^o[r+1],_=s[L>>>24]<<24^s[R>>16&255]<<16^s[S>>8&255]<<8^s[255&A]^o[r+2],T=s[R>>>24]<<24^s[S>>16&255]<<16^s[A>>8&255]<<8^s[255&L]^o[r+3],r+=3,y[t]=this.networkToHostOrderSwap(b^h),y[t+1]=this.networkToHostOrderSwap(T^p),y[t+2]=this.networkToHostOrderSwap(_^v),y[t+3]=this.networkToHostOrderSwap(E^m),h=O,p=k,v=w,m=D,t+=4}return y.buffer}},{key:"destroy",value:function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0}}]),e}();n.default=a},{}],16:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e(14),s=r(o),u=e(17),l=r(u),d=e(15),c=r(d),f=e(26),h=e(45),p=function(){function e(t,n){i(this,e),this.observer=t,this.config=n;try{var r=crypto?crypto:self.crypto;this.subtle=r.subtle||r.webkitSubtle}catch(e){}this.disableWebCrypto=!this.subtle}return a(e,[{key:"decrypt",value:function(e,t,n,r){var i=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){h.logger.log("JS AES decrypt");var a=this.decryptor;a||(this.decryptor=a=new c.default),a.expandKey(t),r(a.decrypt(e,0,n))}else!function(){h.logger.log("WebCrypto AES decrypt");var a=i.subtle;i.key!==t&&(i.key=t,i.fastAesKey=new l.default(a,t)),i.fastAesKey.expandKey().then(function(t){var i=new s.default(a,n);i.decrypt(e,t).then(function(e){r(e)})}).catch(function(a){i.onWebCryptoError(a,e,t,n,r)})}()}},{key:"onWebCryptoError",value:function(e,t,n,r,i){this.config.enableSoftwareAES?(h.logger.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.decrypt(t,n,r,i)):(h.logger.error("decrypting error : "+e.message),this.observer.trigger(Event.ERROR,{type:f.ErrorTypes.MEDIA_ERROR,details:f.ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!0,reason:e.message}))}},{key:"destroy",value:function(){var e=this.decryptor;e&&(e.destroy(),this.decryptor=void 0)}}]),e}();n.default=p},{14:14,15:15,17:17,26:26,45:45}],17:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,n){r(this,e),this.subtle=t,this.key=n}return i(e,[{key:"expandKey",value:function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])}}]),e}();n.default=a},{}],18:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e(19),s=r(o),u=e(45),l=e(24),d=r(l),c=function(){function e(t,n,r,a,o){i(this,e),this.observer=t,this.id=n,this.remuxerClass=r,this.config=a,this.remuxer=new this.remuxerClass(t,n,a,o),this.insertDiscontinuity()}return a(e,[{key:"insertDiscontinuity",value:function(){this._aacTrack={container:"audio/adts",type:"audio",id:-1,sequenceNumber:0,isAAC:!0,samples:[],len:0}}},{key:"push",value:function(e,t,n,r,i,a,o,l,c,f){var h,p,v,m,g,y,b,E,_,T,S=new d.default(e),A=90*S.timeStamp,L=!1;for(i!==this.lastCC?(u.logger.log(this.id+" discontinuity detected"),this.lastCC=i,this.insertDiscontinuity(),this.remuxer.switchLevel(),this.remuxer.insertDiscontinuity()):a!==this.lastLevel?(u.logger.log("audio track switch detected"),this.lastLevel=a,this.remuxer.switchLevel(),this.insertDiscontinuity()):o===this.lastSN+1&&(L=!0),h=this._aacTrack,this.lastSN=o,this.lastLevel=a,y=S.length,_=e.length;y<_-1&&(255!==e[y]||240!==(240&e[y+1]));y++);for(h.audiosamplerate||(p=s.default.getAudioConfig(this.observer,e,y,t),h.config=p.config,h.audiosamplerate=p.samplerate,h.channelCount=p.channelCount,h.codec=p.codec,h.manifestCodec=p.manifestCodec,h.duration=l,u.logger.log("parsed codec:"+h.codec+",rate:"+p.samplerate+",nb channel:"+p.channelCount)),g=0,m=9216e4/h.audiosamplerate;y+5<_&&(b=1&e[y+1]?7:9,v=(3&e[y+3])<<11|e[y+4]<<3|(224&e[y+5])>>>5,v-=b,v>0&&y+b+v<=_);)for(E=A+g*m,T={unit:e.subarray(y+b,y+b+v),pts:E,dts:E},h.samples.push(T),h.len+=v,y+=v+b,g++;y<_-1&&(255!==e[y]||240!==(240&e[y+1]));y++);this.remuxer.remux(a,o,i,h,{samples:[]},{samples:[{pts:A,dts:A,unit:S.payload}]},{samples:[]},r,L,c,f)}},{key:"destroy",value:function(){}}],[{key:"probe",value:function(e){var t,n,r=new d.default(e);if(r.hasTimeStamp)for(t=r.length,n=e.length;t<n-1;t++)if(255===e[t]&&240===(240&e[t+1]))return!0;return!1}}]),e}();n.default=c},{19:19,24:24,45:45}],19:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e(45),o=e(26),s=function(){function e(){r(this,e)}return i(e,null,[{key:"getAudioConfig",value:function(e,t,n,r){var i,s,u,l,d,c=navigator.userAgent.toLowerCase(),f=r,h=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];return i=((192&t[n+2])>>>6)+1,s=(60&t[n+2])>>>2,s>h.length-1?void e.trigger(Event.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+s}):(l=(1&t[n+2])<<2,l|=(192&t[n+3])>>>6,a.logger.log("manifest codec:"+r+",ADTS data:type:"+i+",sampleingIndex:"+s+"["+h[s]+"Hz],channelConfig:"+l),/firefox/i.test(c)?s>=6?(i=5,d=new Array(4),u=s-3):(i=2,d=new Array(2),u=s):c.indexOf("android")!==-1?(i=2,d=new Array(2),u=s):(i=5,d=new Array(4),r&&(r.indexOf("mp4a.40.29")!==-1||r.indexOf("mp4a.40.5")!==-1)||!r&&s>=6?u=s-3:((r&&r.indexOf("mp4a.40.2")!==-1&&s>=6&&1===l||!r&&1===l)&&(i=2,d=new Array(2)),u=s)),d[0]=i<<3,d[0]|=(14&s)>>1,d[1]|=(1&s)<<7,d[1]|=l<<3,5===i&&(d[1]|=(14&u)>>1,d[2]=(1&u)<<7,d[2]|=8,d[3]=0),{config:d,samplerate:h[s],channelCount:l,codec:"mp4a.40."+i,manifestCodec:f})}}]),e}();n.default=s},{26:26,45:45}],20:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e(28),s=r(o),u=e(26),l=e(16),d=r(l),c=e(18),f=r(c),h=e(25),p=r(h),v=e(38),m=r(v),g=e(39),y=r(g),b=function(){function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;i(this,e),this.hls=t,this.id=n,this.config=this.hls.config||a,this.typeSupported=r}return a(e,[{key:"destroy",value:function(){var e=this.demuxer;e&&e.destroy()}},{key:"push",value:function(e,t,n,r,i,a,o,u,l,c,f){if(e.byteLength>0&&null!=l&&null!=l.key&&"AES-128"===l.method){null==this.decrypter&&(this.decrypter=new d.default(this.hls,this.config));var h,p=this;try{h=performance.now()}catch(e){h=Date.now()}this.decrypter.decrypt(e,l.key.buffer,l.iv.buffer,function(e){var l;try{l=performance.now()}catch(e){l=Date.now()}p.hls.trigger(s.default.FRAG_DECRYPTED,{level:a,sn:o,stats:{tstart:h,tdecrypt:l}}),p.pushDecrypted(new Uint8Array(e),t,n,r,i,a,o,u,c,f)})}else this.pushDecrypted(new Uint8Array(e),t,n,r,i,a,o,u,c,f)}},{key:"pushDecrypted",value:function(e,t,n,r,i,a,o,l,d,c){var h=this.demuxer;if(!h||i!==this.cc&&!h.probe(e)){var v=this.hls,g=this.id,b=this.config,E=this.typeSupported;if(p.default.probe(e))h=this.typeSupported.mp2t===!0?new p.default(v,g,y.default,b,E):new p.default(v,g,m.default,b,E),h.probe=p.default.probe;else{if(!f.default.probe(e))return void v.trigger(s.default.ERROR,{type:u.ErrorTypes.MEDIA_ERROR,id:g,details:u.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});h=new f.default(v,g,m.default,b,E),h.probe=f.default.probe}this.demuxer=h}h.push(e,t,n,r,i,a,o,l,d,c),this.cc=i}}]),e}();n.default=b},{16:16,18:18,25:25,26:26,28:28,38:38,39:39}],21:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e(20),a=r(i),o=e(28),s=r(o),u=e(45),l=e(1),d=r(l),c=function(e){var t=new d.default;t.trigger=function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];t.emit.apply(t,[e,e].concat(r))},t.off=function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];t.removeListener.apply(t,[e].concat(r))};var n=function(t,n){e.postMessage({event:t,data:n})};e.addEventListener("message",function(r){var i=r.data;switch(i.cmd){case"init":var o=JSON.parse(i.config);e.demuxer=new a.default(t,i.id,i.typeSupported,o);try{(0,u.enableLogs)(o.debug===!0)}catch(e){console.warn("demuxerWorker: unable to enable logs")}n("init",null);break;case"demux":e.demuxer.push(i.data,i.audioCodec,i.videoCodec,i.timeOffset,i.cc,i.level,i.sn,i.duration,i.decryptdata,i.accurateTimeOffset,i.defaultInitPTS)}}),t.on(s.default.FRAG_DECRYPTED,n),t.on(s.default.FRAG_PARSING_INIT_SEGMENT,n),t.on(s.default.FRAG_PARSED,n),t.on(s.default.ERROR,n),t.on(s.default.FRAG_PARSING_METADATA,n),t.on(s.default.FRAG_PARSING_USERDATA,n),t.on(s.default.INIT_PTS_FOUND,n),t.on(s.default.FRAG_PARSING_DATA,function(t,n){var r=n.data1.buffer,i=n.data2.buffer;delete n.data1,delete n.data2,e.postMessage({event:t,data:n,data1:r,data2:i},[r,i])})};n.default=c},{1:1,20:20,28:28,45:45}],22:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e(28),s=r(o),u=e(20),l=r(u),d=e(21),c=r(d),f=e(45),h=e(26),p=function(){function t(n,r){i(this,t),this.hls=n,this.id=r;var a={mp4:MediaSource.isTypeSupported("video/mp4"),mp2t:n.config.enableMP2TPassThrough&&MediaSource.isTypeSupported("video/mp2t"),mpeg:MediaSource.isTypeSupported("audio/mpeg"),mp3:MediaSource.isTypeSupported('audio/mp4; codecs="mp3"')};if(n.config.enableWorker&&"undefined"!=typeof Worker){f.logger.log("demuxing in webworker");var o=void 0;try{var u=e(3);o=this.w=u(c.default),this.onwmsg=this.onWorkerMessage.bind(this),o.addEventListener("message",this.onwmsg),o.onerror=function(e){n.trigger(s.default.ERROR,{type:h.ErrorTypes.OTHER_ERROR,details:h.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:e.message+" ("+e.filename+":"+e.lineno+")"}})},o.postMessage({cmd:"init",typeSupported:a,id:r,config:JSON.stringify(n.config)})}catch(e){f.logger.error("error while initializing DemuxerWorker, fallback on DemuxerInline"),o&&URL.revokeObjectURL(o.objectURL),this.demuxer=new l.default(n,r,a),this.w=void 0}}else this.demuxer=new l.default(n,r,a);this.demuxInitialized=!0}return a(t,[{key:"destroy",value:function(){var e=this.w;if(e)e.removeEventListener("message",this.onwmsg),e.terminate(),this.w=null;else{var t=this.demuxer;t&&(t.destroy(),this.demuxer=null)}}},{key:"push",value:function(e,t,n,r,i,a,o,s,u,l,d){var c=this.w;if(c)c.postMessage({cmd:"demux",data:e,audioCodec:t,videoCodec:n,timeOffset:r,cc:i,level:a,sn:o,duration:s,decryptdata:u,accurateTimeOffset:l,defaultInitPTS:d},[e]);else{var f=this.demuxer;f&&f.push(e,t,n,r,i,a,o,s,u,l,d)}}},{key:"onWorkerMessage",value:function(e){var t=e.data,n=this.hls;switch(t.event){case"init":URL.revokeObjectURL(this.w.objectURL);break;case s.default.FRAG_PARSING_DATA:t.data.data1=new Uint8Array(t.data1),t.data.data2=new Uint8Array(t.data2);default:n.trigger(t.event,t.data)}}}]),t}();n.default=p},{20:20,21:21,26:26,28:28,3:3,45:45}],23:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e(45),o=function(){function e(t){r(this,e),this.data=t,this.bytesAvailable=t.byteLength,this.word=0,this.bitsAvailable=0}return i(e,[{key:"loadWord",value:function(){var e=this.data,t=this.bytesAvailable,n=e.byteLength-t,r=new Uint8Array(4),i=Math.min(4,t);if(0===i)throw new Error("no bytes available");r.set(e.subarray(n,n+i)),this.word=new DataView(r.buffer).getUint32(0),this.bitsAvailable=8*i,this.bytesAvailable-=i}},{key:"skipBits",value:function(e){var t;this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,t=e>>3,e-=t>>3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}},{key:"readBits",value:function(e){var t=Math.min(this.bitsAvailable,e),n=this.word>>>32-t;return e>32&&a.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0?this.word<<=t:this.bytesAvailable>0&&this.loadWord(),t=e-t,t>0&&this.bitsAvailable?n<<t|this.readBits(t):n}},{key:"skipLZ",value:function(){var e;for(e=0;e<this.bitsAvailable;++e)if(0!==(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}},{key:"skipUEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"skipEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"readUEG",value:function(){var e=this.skipLZ();return this.readBits(e+1)-1}},{key:"readEG",value:function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}},{key:"readBoolean",value:function(){return 1===this.readBits(1)}},{key:"readUByte",value:function(){return this.readBits(8)}},{key:"readUShort",value:function(){return this.readBits(16)}},{key:"readUInt",value:function(){return this.readBits(32)}},{key:"skipScalingList",value:function(e){var t,n,r=8,i=8;for(t=0;t<e;t++)0!==i&&(n=this.readEG(),i=(r+n+256)%256),r=0===i?r:i}},{key:"readSPS",value:function(){var e,t,n,r,i,a,o,s,u,l=0,d=0,c=0,f=0,h=this.readUByte.bind(this),p=this.readBits.bind(this),v=this.readUEG.bind(this),m=this.readBoolean.bind(this),g=this.skipBits.bind(this),y=this.skipEG.bind(this),b=this.skipUEG.bind(this),E=this.skipScalingList.bind(this);if(h(),e=h(),t=p(5),g(3),n=h(),b(),100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e){var _=v();if(3===_&&g(1),b(),b(),g(1),m())for(s=3!==_?8:12,u=0;u<s;u++)m()&&E(u<6?16:64)}b();var T=v();if(0===T)v();else if(1===T)for(g(1),y(),y(),r=v(),u=0;u<r;u++)y();b(),g(1),i=v(),a=v(),o=p(1),0===o&&g(1),g(1),m()&&(l=v(),d=v(),c=v(),f=v());var S=[1,1];if(m()&&m()){var A=h();switch(A){case 1:S=[1,1];break;case 2:S=[12,11];break;case 3:S=[10,11];break;case 4:S=[16,11];break;case 5:S=[40,33];break;case 6:S=[24,11];break;case 7:S=[20,11];break;case 8:S=[32,11];break;case 9:S=[80,33];break;case 10:S=[18,11];break;case 11:S=[15,11];break;case 12:S=[64,33];break;case 13:S=[160,99];break;case 14:S=[4,3];break;case 15:S=[3,2];break;case 16:S=[2,1];break;case 255:S=[h()<<8|h(),h()<<8|h()]}}return{width:Math.ceil(16*(i+1)-2*l-2*d),height:(2-o)*(a+1)*16-(o?2:4)*(c+f),pixelRatio:S}}},{key:"readSliceType",value:function(){return this.readUByte(),this.readUEG(),this.readUEG()}}]),e}();n.default=o},{45:45}],24:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e(45),o=function(){function e(t){r(this,e),this._hasTimeStamp=!1;for(var n,i,o,s,u,l,d,c,f=0;;)if(d=this.readUTF(t,f,3),f+=3,"ID3"===d)f+=3,n=127&t[f++],i=127&t[f++],o=127&t[f++],s=127&t[f++],u=(n<<21)+(i<<14)+(o<<7)+s,l=f+u,this._parseID3Frames(t,f,l),f=l;else{if("3DI"!==d)return f-=3,c=f,void(c&&(this.hasTimeStamp||a.logger.warn("ID3 tag found, but no timestamp"),this._length=c,this._payload=t.subarray(0,c)));f+=7,a.logger.log("3DI footer found, end: "+f)}}return i(e,[{key:"readUTF",value:function(e,t,n){var r="",i=t,a=t+n;do r+=String.fromCharCode(e[i++]);while(i<a);return r}},{key:"_parseID3Frames",value:function(e,t,n){for(var r,i,o,s,u;t+8<=n;)switch(r=this.readUTF(e,t,4),t+=4,i=e[t++]<<24+e[t++]<<16+e[t++]<<8+e[t++],s=e[t++]<<8+e[t++],o=t,r){case"PRIV":if("com.apple.streaming.transportStreamTimestamp"===this.readUTF(e,t,44)){t+=44,t+=4;var l=1&e[t++];this._hasTimeStamp=!0,u=((e[t++]<<23)+(e[t++]<<15)+(e[t++]<<7)+e[t++])/45,l&&(u+=47721858.84),u=Math.round(u),a.logger.trace("ID3 timestamp found: "+u),this._timeStamp=u}}}},{key:"hasTimeStamp",get:function(){return this._hasTimeStamp}},{key:"timeStamp",get:function(){return this._timeStamp}},{key:"length",get:function(){return this._length}},{key:"payload",get:function(){return this._payload}}]),e}();n.default=o},{45:45}],25:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e(19),s=r(o),u=e(28),l=r(u),d=e(23),c=r(d),f=e(45),h=e(26),p=function(){function e(t,n,r,a,o){i(this,e),this.observer=t,this.id=n,this.remuxerClass=r,this.config=a,this.typeSupported=o,this.lastCC=0,this.remuxer=new this.remuxerClass(t,n,a,o)}return a(e,[{key:"switchLevel",
value:function(){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack={container:"video/mp2t",type:"video",id:-1,sequenceNumber:0,samples:[],len:0,dropped:0},this._audioTrack={container:"video/mp2t",type:"audio",id:-1,sequenceNumber:0,samples:[],len:0,isAAC:!0},this._id3Track={type:"id3",id:-1,sequenceNumber:0,samples:[],len:0},this._txtTrack={type:"text",id:-1,sequenceNumber:0,samples:[],len:0},this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.remuxer.switchLevel()}},{key:"insertDiscontinuity",value:function(){this.switchLevel(),this.remuxer.insertDiscontinuity()}},{key:"push",value:function(e,t,n,r,i,a,o,s,u,d){var c,p,v,m,g,y,b=e.length,E=this.remuxer.passthrough,_=!1;this.audioCodec=t,this.videoCodec=n,this._duration=s,this.contiguous=!1,this.accurateTimeOffset=u,i!==this.lastCC&&(f.logger.log("discontinuity detected"),this.insertDiscontinuity(),this.lastCC=i),a!==this.lastLevel?(f.logger.log("level switch detected"),this.switchLevel(),this.lastLevel=a):o===this.lastSN+1&&(this.contiguous=!0),this.lastSN=o;var T=this.pmtParsed,S=this._avcTrack,A=this._audioTrack,L=this._id3Track,R=S.id,O=A.id,k=L.id,w=this._pmtId,D=S.pesData,P=A.pesData,I=L.pesData,x=this._parsePAT,C=this._parsePMT,M=this._parsePES,N=this._parseAVCPES.bind(this),F=this._parseAACPES.bind(this),B=this._parseMPEGPES.bind(this),U=this._parseID3PES.bind(this);for(b-=b%188,c=0;c<b;c+=188)if(71===e[c]){if(p=!!(64&e[c+1]),v=((31&e[c+1])<<8)+e[c+2],m=(48&e[c+3])>>4,m>1){if(g=c+5+e[c+4],g===c+188)continue}else g=c+4;switch(v){case R:if(p){if(D&&(y=M(D))&&(N(y,!1),E&&S.codec&&(O===-1||A.codec)))return void this.remux(a,o,i,e,r);D={data:[],size:0}}D&&(D.data.push(e.subarray(g,c+188)),D.size+=c+188-g);break;case O:if(p){if(P&&(y=M(P))&&(A.isAAC?F(y):B(y),E&&A.codec&&(R===-1||S.codec)))return void this.remux(a,o,i,e,r);P={data:[],size:0}}P&&(P.data.push(e.subarray(g,c+188)),P.size+=c+188-g);break;case k:p&&(I&&(y=M(I))&&U(y),I={data:[],size:0}),I&&(I.data.push(e.subarray(g,c+188)),I.size+=c+188-g);break;case 0:p&&(g+=e[g]+1),w=this._pmtId=x(e,g);break;case w:p&&(g+=e[g]+1);var j=C(e,g,this.typeSupported.mpeg===!0||this.typeSupported.mp3===!0);R=j.avc,R>0&&(S.id=R),O=j.audio,O>0&&(A.id=O,A.isAAC=j.isAAC),k=j.id3,k>0&&(L.id=k),_&&!T&&(f.logger.log("reparse from beginning"),_=!1,c=-188),T=this.pmtParsed=!0;break;case 17:case 8191:break;default:_=!0}}else this.observer.trigger(l.default.ERROR,{type:h.ErrorTypes.MEDIA_ERROR,id:this.id,details:h.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});D&&(y=M(D))?(N(y,!0),S.pesData=null):S.pesData=D,P&&(y=M(P))?(A.isAAC?F(y):B(y),A.pesData=null):(P&&P.size&&f.logger.log("last AAC PES packet truncated,might overlap between fragments"),A.pesData=P),I&&(y=M(I))?(U(y),L.pesData=null):L.pesData=I,this.remux(a,o,i,null,r,d)}},{key:"remux",value:function(e,t,n,r,i,a){for(var o=this._avcTrack,s=o.samples,u=0,l=0,d=0;d<s.length;d++){for(var c=s[d],f=c.units.units,h=f.length,p=0,v=0;v<h;v++)p+=f[v].data.length;l+=p,u+=h,c.length=p}o.len=l,o.nbNalu=u,this.remuxer.remux(e,t,n,this._audioTrack,this._avcTrack,this._id3Track,this._txtTrack,i,this.contiguous,this.accurateTimeOffset,a,r)}},{key:"destroy",value:function(){this.switchLevel(),this._initPTS=this._initDTS=void 0,this._duration=0}},{key:"_parsePAT",value:function(e,t){return(31&e[t+10])<<8|e[t+11]}},{key:"_parsePMT",value:function(e,t,n){var r,i,a,o,s={audio:-1,avc:-1,id3:-1,isAAC:!0};for(r=(15&e[t+1])<<8|e[t+2],i=t+3+r-4,a=(15&e[t+10])<<8|e[t+11],t+=12+a;t<i;){switch(o=(31&e[t+1])<<8|e[t+2],e[t]){case 15:s.audio===-1&&(s.audio=o);break;case 21:s.id3===-1&&(s.id3=o);break;case 27:s.avc===-1&&(s.avc=o);break;case 3:case 4:n?s.audio===-1&&(s.audio=o,s.isAAC=!1):f.logger.log("MPEG audio found, not supported in this browser for now");break;case 36:f.logger.warn("HEVC stream type found, not supported for now");break;default:f.logger.log("unkown stream type:"+e[t])}t+=((15&e[t+3])<<8|e[t+4])+5}return s}},{key:"_parsePES",value:function(e){var t,n,r,i,a,o,s,u,l,d=0,c=e.data;if(!e||0===e.size)return null;for(;c[0].length<19&&c.length>1;){var h=new Uint8Array(c[0].length+c[1].length);h.set(c[0]),h.set(c[1],c[0].length),c[0]=h,c.splice(1,1)}if(t=c[0],r=(t[0]<<16)+(t[1]<<8)+t[2],1===r){if(i=(t[4]<<8)+t[5],i&&i>e.size-6)return null;n=t[7],192&n&&(s=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2,s>4294967295&&(s-=8589934592),64&n?(u=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2,u>4294967295&&(u-=8589934592),s-u>54e5&&(f.logger.warn(Math.round((s-u)/9e4)+"s delta between PTS and DTS, align them"),s=u)):u=s),a=t[8],l=a+9,e.size-=l,o=new Uint8Array(e.size);for(var p=0,v=c.length;p<v;p++){t=c[p];var m=t.byteLength;if(l){if(l>m){l-=m;continue}t=t.subarray(l),m-=l,l=0}o.set(t,d),d+=m}return i&&(i-=a+3),{data:o,pts:s,dts:u,len:i}}return null}},{key:"pushAccesUnit",value:function(e,t){e.units.units.length&&e.frame&&(!this.config.forceKeyFrameOnDiscontinuity||e.key===!0||t.sps&&(t.samples.length||this.contiguous)?t.samples.push(e):t.dropped++),e.debug.length&&f.logger.log(e.pts+"/"+e.dts+":"+e.debug+","+e.units.length)}},{key:"_parseAVCPES",value:function(e,t){var n,r,i,a=this,o=this._avcTrack,s=this._parseAVCNALu(e.data),u=!1,l=this.avcSample;e.data=null,s.forEach(function(t){switch(t.type){case 1:r=!0,u&&l&&(l.debug+="NDR "),l.frame=!0;var s=t.data;if(s.length>4){var d=new c.default(s).readSliceType();2!==d&&4!==d&&7!==d&&9!==d||(l.key=!0)}break;case 5:r=!0,l||(l=a.avcSample=a._createAVCSample(!0,e.pts,e.dts,"")),u&&(l.debug+="IDR "),l.key=!0,l.frame=!0;break;case 6:r=!0,u&&l&&(l.debug+="SEI "),n=new c.default(a.discardEPB(t.data)),n.readUByte();for(var f=0,h=0,p=!1,v=0;!p&&n.bytesAvailable>1;){f=0;do v=n.readUByte(),f+=v;while(255===v);h=0;do v=n.readUByte(),h+=v;while(255===v);if(4===f&&0!==n.bytesAvailable){p=!0;var m=n.readUByte();if(181===m){var g=n.readUShort();if(49===g){var y=n.readUInt();if(1195456820===y){var b=n.readUByte();if(3===b){var E=n.readUByte(),_=n.readUByte(),T=31&E,S=[E,_];for(i=0;i<T;i++)S.push(n.readUByte()),S.push(n.readUByte()),S.push(n.readUByte());a._insertSampleInOrder(a._txtTrack.samples,{type:3,pts:e.pts,bytes:S})}}}}}else if(h<n.bytesAvailable)for(i=0;i<h;i++)n.readUByte()}break;case 7:if(r=!0,u&&l&&(l.debug+="SPS "),!o.sps){n=new c.default(t.data);var A=n.readSPS();o.width=A.width,o.height=A.height,o.pixelRatio=A.pixelRatio,o.sps=[t.data],o.duration=a._duration;var L=t.data.subarray(1,4),R="avc1.";for(i=0;i<3;i++){var O=L[i].toString(16);O.length<2&&(O="0"+O),R+=O}o.codec=R}break;case 8:r=!0,u&&l&&(l.debug+="PPS "),o.pps||(o.pps=[t.data]);break;case 9:r=!1,l&&a.pushAccesUnit(l,o),l=a.avcSample=a._createAVCSample(!1,e.pts,e.dts,u?"AUD ":"");break;case 12:r=!1;break;default:r=!1,l&&(l.debug+="unknown NAL "+t.type+" ")}if(l&&r){var k=l.units;k.units.push(t)}}),t&&l&&(this.pushAccesUnit(l,o),this.avcSample=null)}},{key:"_createAVCSample",value:function(e,t,n,r){return{key:e,pts:t,dts:n,units:{units:[],length:0},debug:r}}},{key:"_insertSampleInOrder",value:function(e,t){var n=e.length;if(n>0){if(t.pts>=e[n-1].pts)e.push(t);else for(var r=n-1;r>=0;r--)if(t.pts<e[r].pts){e.splice(r,0,t);break}}else e.push(t)}},{key:"_getLastNalUnit",value:function(){var e=this.avcSample,t=void 0;if(!e||0===e.units.units.length){var n=this._avcTrack,r=n.samples;e=r[r.length-1]}if(e){var i=e.units.units;t=i[i.length-1]}return t}},{key:"_parseAVCNALu",value:function(e){var t,n,r,i,a,o=0,s=e.byteLength,u=this._avcTrack,l=u.naluState||0,d=l,c=[],f=-1;for(l===-1&&(f=0,a=31&e[0],l=0,o=1);o<s;)if(t=e[o++],l)if(1!==l)if(t)if(1===t){if(f>=0)r={data:e.subarray(f,o-l-1),type:a},c.push(r);else{var h=this._getLastNalUnit();if(h&&(d&&o<=4-d&&h.state&&(h.data=h.data.subarray(0,h.data.byteLength-d)),n=o-l-1,n>0)){var p=new Uint8Array(h.data.byteLength+n);p.set(h.data,0),p.set(e.subarray(0,n),h.data.byteLength),h.data=p}}o<s?(i=31&e[o],f=o,a=i,l=0):l=-1}else l=0;else l=3;else l=t?0:2;else l=t?0:1;if(f>=0&&l>=0&&(r={data:e.subarray(f,s),type:a,state:l},c.push(r)),0===c.length){var v=this._getLastNalUnit();if(v){var m=new Uint8Array(v.data.byteLength+e.byteLength);m.set(v.data,0),m.set(e,v.data.byteLength),v.data=m}}return u.naluState=l,c}},{key:"discardEPB",value:function(e){for(var t,n,r=e.byteLength,i=[],a=1;a<r-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(i.push(a+2),a+=2):a++;if(0===i.length)return e;t=r-i.length,n=new Uint8Array(t);var o=0;for(a=0;a<t;o++,a++)o===i[0]&&(o++,i.shift()),n[a]=e[o];return n}},{key:"_parseAACPES",value:function(e){var t,n,r,i,a,o,u,d,c,p=this._audioTrack,v=e.data,m=e.pts,g=0,y=this.aacOverFlow,b=this.aacLastPTS;if(y){var E=new Uint8Array(y.byteLength+v.byteLength);E.set(y,0),E.set(v,y.byteLength),v=E}for(a=g,d=v.length;a<d-1&&(255!==v[a]||240!==(240&v[a+1]));a++);if(a){var _,T;if(a<d-1?(_="AAC PES did not start with ADTS header,offset:"+a,T=!1):(_="no ADTS header found in AAC PES",T=!0),f.logger.warn("parsing error:"+_),this.observer.trigger(l.default.ERROR,{type:h.ErrorTypes.MEDIA_ERROR,id:this.id,details:h.ErrorDetails.FRAG_PARSING_ERROR,fatal:T,reason:_}),T)return}if(!p.audiosamplerate){var S=this.audioCodec;t=s.default.getAudioConfig(this.observer,v,a,S),p.config=t.config,p.audiosamplerate=t.samplerate,p.channelCount=t.channelCount,p.codec=t.codec,p.manifestCodec=t.manifestCodec,p.duration=this._duration,f.logger.log("parsed codec:"+p.codec+",rate:"+t.samplerate+",nb channel:"+t.channelCount)}if(i=0,r=9216e4/p.audiosamplerate,y&&b){var A=b+r;Math.abs(A-m)>1&&(f.logger.log("AAC: align PTS for overlapping frames by "+Math.round((A-m)/90)),m=A)}for(;a+5<d&&(o=1&v[a+1]?7:9,n=(3&v[a+3])<<11|v[a+4]<<3|(224&v[a+5])>>>5,n-=o,n>0&&a+o+n<=d);)for(u=m+i*r,c={unit:v.subarray(a+o,a+o+n),pts:u,dts:u},p.samples.push(c),p.len+=n,a+=n+o,i++;a<d-1&&(255!==v[a]||240!==(240&v[a+1]));a++);y=a<d?v.subarray(a,d):null,this.aacOverFlow=y,this.aacLastPTS=u}},{key:"_parseMPEGPES",value:function(e){for(var t,n=e.data,r=e.pts,i=n.length,a=0,o=0;o<i&&(t=this._parseMpeg(n,o,i,a++,r))>0;)o+=t}},{key:"_onMpegFrame",value:function(e,t,n,r,i,a){var o=1152/n*1e3,s=a+i*o,u=this._audioTrack;u.config=[],u.channelCount=r,u.audiosamplerate=n,u.duration=this._duration,u.samples.push({unit:e,pts:s,dts:s}),u.len+=e.length}},{key:"_onMpegNoise",value:function(e){f.logger.warn("mpeg audio has noise: "+e.length+" bytes")}},{key:"_parseMpeg",value:function(e,t,n,r,i){var a=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],o=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3];if(t+2>n)return-1;if(255===e[t]||224===(224&e[t+1])){if(t+24>n)return-1;var s=e[t+1]>>3&3,u=e[t+1]>>1&3,l=e[t+2]>>4&15,d=e[t+2]>>2&3,c=!!(2&e[t+2]);if(1!==s&&0!==l&&15!==l&&3!==d){var f=3===s?3-u:3===u?3:4,h=1e3*a[14*f+l-1],p=3===s?0:2===s?1:2,v=o[3*p+d],m=c?1:0,g=e[t+3]>>6===3?1:2,y=3===u?(3===s?12:6)*h/v+m<<2:(3===s?144:72)*h/v+m|0;return t+y>n?-1:(this._onMpegFrame&&this._onMpegFrame(e.subarray(t,t+y),h,v,g,r,i),y)}}for(var b=t+2;b<n;){if(255===e[b-1]&&224===(224&e[b]))return this._onMpegNoise&&this._onMpegNoise(e.subarray(t,b-1)),b-t-1;b++}return-1}},{key:"_parseID3PES",value:function(e){this._id3Track.samples.push(e)}}],[{key:"probe",value:function(e){return e.length>=564&&71===e[0]&&71===e[188]&&71===e[376]}}]),e}();n.default=p},{19:19,23:23,26:26,28:28,45:45}],26:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.ErrorTypes={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",MUX_ERROR:"muxError",OTHER_ERROR:"otherError"},n.ErrorDetails={MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",AUDIO_TRACK_LOAD_ERROR:"audioTrackLoadError",AUDIO_TRACK_LOAD_TIMEOUT:"audioTrackLoadTimeOut",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOOP_LOADING_ERROR:"fragLoopLoadingError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",REMUX_ALLOC_ERROR:"remuxAllocError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_ADD_CODEC_ERROR:"bufferAddCodecError",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",BUFFER_NUDGE_ON_STALL:"bufferNudgeOnStall",INTERNAL_EXCEPTION:"internalException"}},{}],27:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e(45),u=e(26),l=e(28),d=r(l),c=function(){function e(t){i(this,e),this.hls=t,this.onEvent=this.onEvent.bind(this);for(var n=arguments.length,r=Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];this.handledEvents=r,this.useGenericHandler=!0,this.registerListeners()}return o(e,[{key:"destroy",value:function(){this.unregisterListeners()}},{key:"isEventHandler",value:function(){return"object"===a(this.handledEvents)&&this.handledEvents.length&&"function"==typeof this.onEvent}},{key:"registerListeners",value:function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){if("hlsEventGeneric"===e)throw new Error("Forbidden event name: "+e);this.hls.on(e,this.onEvent)}.bind(this))}},{key:"unregisterListeners",value:function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){this.hls.off(e,this.onEvent)}.bind(this))}},{key:"onEvent",value:function(e,t){this.onEventGeneric(e,t)}},{key:"onEventGeneric",value:function(e,t){var n=function(e,t){var n="on"+e.replace("hls","");if("function"!=typeof this[n])throw new Error("Event "+e+" has no generic handler in this "+this.constructor.name+" class (tried "+n+")");return this[n].bind(this,t)};try{n.call(this,e,t).call()}catch(t){s.logger.error("internal error happened while processing "+e+":"+t.message),this.hls.trigger(d.default.ERROR,{type:u.ErrorTypes.OTHER_ERROR,details:u.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:e,err:t})}}}]),e}();n.default=c},{26:26,28:28,45:45}],28:[function(e,t,n){"use strict";t.exports={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",LEVEL_SWITCH:"hlsLevelSwitch",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCH:"hlsAudioTrackSwitch",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition"}},{}],29:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){r(this,e)}return i(e,null,[{key:"getSilentFrame",value:function(e,t){switch(e){case"mp4a.40.2":if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}}]),e}();n.default=a},{}],30:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){r(this,e)}return i(e,null,[{key:"isBuffered",value:function(e,t){if(e)for(var n=e.buffered,r=0;r<n.length;r++)if(t>=n.start(r)&&t<=n.end(r))return!0;return!1}},{key:"bufferInfo",value:function(e,t,n){if(e){var r,i=e.buffered,a=[];for(r=0;r<i.length;r++)a.push({start:i.start(r),end:i.end(r)});return this.bufferedInfo(a,t,n)}return{len:0,start:0,end:0,nextStart:void 0}}},{key:"bufferedInfo",value:function(e,t,n){var r,i,a,o,s,u=[];for(e.sort(function(e,t){var n=e.start-t.start;return n?n:t.end-e.end}),s=0;s<e.length;s++){var l=u.length;if(l){var d=u[l-1].end;e[s].start-d<n?e[s].end>d&&(u[l-1].end=e[s].end):u.push(e[s])}else u.push(e[s])}for(s=0,r=0,i=a=t;s<u.length;s++){var c=u[s].start,f=u[s].end;if(t+n>=c&&t<f)i=c,a=f,r=a-t;else if(t+n<c){o=c;break}}return{len:r,start:i,end:a,nextStart:o}}}]),e}();n.default=a},{}],31:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e(45),o=function(){function e(){r(this,e)}return i(e,null,[{key:"mergeDetails",value:function(t,n){var r,i=Math.max(t.startSN,n.startSN)-n.startSN,o=Math.min(t.endSN,n.endSN)-n.startSN,s=n.startSN-t.startSN,u=t.fragments,l=n.fragments,d=0;if(o<i)return void(n.PTSKnown=!1);for(var c=i;c<=o;c++){var f=u[s+c],h=l[c];h&&f&&(d=f.cc-h.cc,isNaN(f.startPTS)||(h.start=h.startPTS=f.startPTS,h.endPTS=f.endPTS,h.duration=f.duration,r=h))}if(d)for(a.logger.log("discontinuity sliding from playlist, take drift into account"),c=0;c<l.length;c++)l[c].cc+=d;if(r)e.updateFragPTSDTS(n,r.sn,r.startPTS,r.endPTS,r.startDTS,r.endDTS);else if(s>=0&&s<u.length){var p=u[s].start;for(c=0;c<l.length;c++)l[c].start+=p}n.PTSKnown=t.PTSKnown}},{key:"updateFragPTSDTS",value:function(t,n,r,i,a,o){var s,u,l,d;if(!t||n<t.startSN||n>t.endSN)return 0;if(s=n-t.startSN,u=t.fragments,l=u[s],!isNaN(l.startPTS)){var c=Math.abs(l.startPTS-r);isNaN(l.deltaPTS)?l.deltaPTS=c:l.deltaPTS=Math.max(c,l.deltaPTS),r=Math.min(r,l.startPTS),i=Math.max(i,l.endPTS),a=Math.min(a,l.startDTS),o=Math.max(o,l.endDTS)}var f=r-l.start;for(l.start=l.startPTS=r,l.endPTS=i,l.startDTS=a,l.endDTS=o,l.duration=i-r,d=s;d>0;d--)e.updatePTS(u,d,d-1);for(d=s;d<u.length-1;d++)e.updatePTS(u,d,d+1);return t.PTSKnown=!0,f}},{key:"updatePTS",value:function(e,t,n){var r=e[t],i=e[n],o=i.startPTS;isNaN(o)?n>t?i.start=r.start+r.duration:i.start=r.start-i.duration:n>t?(r.duration=o-r.start,r.duration<0&&a.logger.warn("negative duration computed for frag "+r.sn+",level "+r.level+", there should be some duration drift between playlist and fragment!")):(i.duration=r.start-o,i.duration<0&&a.logger.warn("negative duration computed for frag "+i.sn+",level "+i.level+", there should be some duration drift between playlist and fragment!"))}}]),e}();n.default=o},{45:45}],32:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e(28),s=r(o),u=e(26),l=e(36),d=r(l),c=e(34),f=r(c),h=e(4),p=r(h),v=e(7),m=r(v),g=e(8),y=r(g),b=e(5),E=r(b),_=e(12),T=r(_),S=e(11),A=r(S),L=e(13),R=r(L),O=e(10),k=r(O),w=e(6),D=r(w),P=e(45),I=e(47),x=r(I),C=e(1),M=r(C),N=e(35),F=r(N),B=e(43),U=r(B),j=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e);var n=e.DefaultConfig;if((t.liveSyncDurationCount||t.liveMaxLatencyDurationCount)&&(t.liveSyncDuration||t.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");for(var r in n)r in t||(t[r]=n[r]);if(void 0!==t.liveMaxLatencyDurationCount&&t.liveMaxLatencyDurationCount<=t.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==t.liveMaxLatencyDuration&&(t.liveMaxLatencyDuration<=t.liveSyncDuration||void 0===t.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');(0,P.enableLogs)(t.debug),this.config=t;var a=this.observer=new M.default;a.trigger=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];a.emit.apply(a,[e,e].concat(n))},a.off=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];a.removeListener.apply(a,[e].concat(n))},this.on=a.on.bind(a),this.off=a.off.bind(a),this.trigger=a.trigger.bind(a),this.playlistLoader=new d.default(this),this.fragmentLoader=new f.default(this),this.levelController=new A.default(this),this.abrController=new t.abrController(this),this.bufferController=new t.bufferController(this),this.capLevelController=new t.capLevelController(this),this.fpsController=new t.fpsController(this),this.streamController=new t.streamController(this),this.audioStreamController=new t.audioStreamController(this),this.timelineController=new t.timelineController(this),this.audioTrackController=new D.default(this),this.keyLoader=new F.default(this)}return a(e,null,[{key:"isSupported",value:function(){return window.MediaSource=window.MediaSource||window.WebKitMediaSource,window.MediaSource&&"function"==typeof window.MediaSource.isTypeSupported&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')}},{key:"version",get:function(){return"0.6.21"}},{key:"Events",get:function(){return s.default}},{key:"ErrorTypes",get:function(){return u.ErrorTypes}},{key:"ErrorDetails",get:function(){return u.ErrorDetails}},{key:"DefaultConfig",get:function(){return e.defaultConfig||(e.defaultConfig={autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,maxMaxBufferLength:600,maxSeekHole:2,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.2,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,fragLoadingLoopThreshold:3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:x.default,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,fetchSetup:void 0,abrController:p.default,bufferController:m.default,capLevelController:y.default,fpsController:k.default,streamController:T.default,audioStreamController:E.default,timelineController:R.default,cueHandler:U.default,enableCEA708Captions:!0,enableMP2TPassThrough:!1,stretchShortVideoTrack:!1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0}),e.defaultConfig},set:function(t){e.defaultConfig=t}}]),a(e,[{key:"destroy",value:function(){P.logger.log("destroy"),this.trigger(s.default.DESTROYING),this.detachMedia(),this.playlistLoader.destroy(),this.fragmentLoader.destroy(),this.levelController.destroy(),this.abrController.destroy(),this.bufferController.destroy(),this.capLevelController.destroy(),this.fpsController.destroy(),this.streamController.destroy(),this.audioStreamController.destroy(),this.timelineController.destroy(),this.audioTrackController.destroy(),this.keyLoader.destroy(),this.url=null,this.observer.removeAllListeners()}},{key:"attachMedia",value:function(e){P.logger.log("attachMedia"),this.media=e,this.trigger(s.default.MEDIA_ATTACHING,{media:e})}},{key:"detachMedia",value:function(){P.logger.log("detachMedia"),this.trigger(s.default.MEDIA_DETACHING),this.media=null}},{key:"loadSource",value:function(e){P.logger.log("loadSource:"+e),this.url=e,this.trigger(s.default.MANIFEST_LOADING,{url:e})}},{key:"startLoad",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;P.logger.log("startLoad("+e+")"),this.levelController.startLoad(),this.streamController.startLoad(e),this.audioStreamController.startLoad(e)}},{key:"stopLoad",value:function(){P.logger.log("stopLoad"),this.levelController.stopLoad(),this.streamController.stopLoad(),this.audioStreamController.stopLoad()}},{key:"swapAudioCodec",value:function(){P.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()}},{key:"recoverMediaError",value:function(){P.logger.log("recoverMediaError");var e=this.media;this.detachMedia(),this.attachMedia(e)}},{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(e){P.logger.log("set currentLevel:"+e),this.loadLevel=e,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(e){P.logger.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(e){P.logger.log("set loadLevel:"+e),this.levelController.manualLevel=e}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.abrController.minAutoLevel)},set:function(e){P.logger.log("set firstLevel:"+e),this.levelController.firstLevel=e}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(e){P.logger.log("set startLevel:"+e),this.levelController.startLevel=e}},{key:"autoLevelCapping",get:function(){return this.abrController.autoLevelCapping},set:function(e){P.logger.log("set autoLevelCapping:"+e),this.abrController.autoLevelCapping=e}},{key:"autoLevelEnabled",get:function(){return this.levelController.manualLevel===-1}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"audioTracks",get:function(){return this.audioTrackController.audioTracks}},{key:"audioTrack",get:function(){return this.audioTrackController.audioTrack},set:function(e){this.audioTrackController.audioTrack=e}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}}]),e}();n.default=j},{1:1,10:10,11:11,12:12,13:13,26:26,28:28,34:34,35:35,36:36,4:4,43:43,45:45,47:47,5:5,6:6,7:7,8:8}],33:[function(e,t,n){"use strict";t.exports=e(32).default},{32:32}],34:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=e(28),l=r(u),d=e(27),c=r(d),f=e(26),h=e(45),p=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,l.default.FRAG_LOADING));return n.loaders={},n}return o(t,e),s(t,[{key:"destroy",value:function(){var e=this.loaders;for(var t in e){var n=e[t];n&&n.destroy()}this.loaders={},c.default.prototype.destroy.call(this)}},{key:"onFragLoading",value:function(e){var t=e.frag,n=t.type,r=this.loaders[n],i=this.hls.config;t.loaded=0,r&&(h.logger.warn("abort previous fragment loader for type:"+n),r.abort()),r=this.loaders[n]=t.loader="undefined"!=typeof i.fLoader?new i.fLoader(i):new i.loader(i);var a=void 0,o=void 0,s=void 0;a={url:t.url,frag:t,responseType:"arraybuffer",progressData:!1};var u=t.byteRangeStartOffset,l=t.byteRangeEndOffset;isNaN(u)||isNaN(l)||(a.rangeStart=u,a.rangeEnd=l),o={timeout:i.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:i.fragLoadingMaxRetryTimeout},s={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),
onProgress:this.loadprogress.bind(this)},r.load(a,o,s)}},{key:"loadsuccess",value:function(e,t,n){var r=e.data,i=n.frag;i.loader=void 0,this.loaders[i.type]=void 0,this.hls.trigger(l.default.FRAG_LOADED,{payload:r,frag:i,stats:t})}},{key:"loaderror",value:function(e,t){var n=t.loader;n&&n.abort(),this.loaders[t.type]=void 0,this.hls.trigger(l.default.ERROR,{type:f.ErrorTypes.NETWORK_ERROR,details:f.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:t.frag,response:e})}},{key:"loadtimeout",value:function(e,t){var n=t.loader;n&&n.abort(),this.loaders[t.type]=void 0,this.hls.trigger(l.default.ERROR,{type:f.ErrorTypes.NETWORK_ERROR,details:f.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t.frag})}},{key:"loadprogress",value:function(e,t,n){var r=t.frag;r.loaded=e.loaded,this.hls.trigger(l.default.FRAG_LOAD_PROGRESS,{frag:r,stats:e})}}]),t}(c.default);n.default=p},{26:26,27:27,28:28,45:45}],35:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=e(28),l=r(u),d=e(27),c=r(d),f=e(26),h=e(45),p=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,l.default.KEY_LOADING));return n.loaders={},n.decryptkey=null,n.decrypturl=null,n}return o(t,e),s(t,[{key:"destroy",value:function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy()}this.loaders={},c.default.prototype.destroy.call(this)}},{key:"onKeyLoading",value:function(e){var t=e.frag,n=t.type,r=this.loaders[n],i=t.decryptdata,a=i.uri;if(a!==this.decrypturl||null===this.decryptkey){var o=this.hls.config;r&&(h.logger.warn("abort previous key loader for type:"+n),r.abort()),t.loader=this.loaders[n]=new o.loader(o),this.decrypturl=a,this.decryptkey=null;var s=void 0,u=void 0,d=void 0;s={url:a,frag:t,responseType:"arraybuffer"},u={timeout:o.fragLoadingTimeOut,maxRetry:o.fragLoadingMaxRetry,retryDelay:o.fragLoadingRetryDelay,maxRetryDelay:o.fragLoadingMaxRetryTimeout},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},t.loader.load(s,u,d)}else this.decryptkey&&(i.key=this.decryptkey,this.hls.trigger(l.default.KEY_LOADED,{frag:t}))}},{key:"loadsuccess",value:function(e,t,n){var r=n.frag;this.decryptkey=r.decryptdata.key=new Uint8Array(e.data),r.loader=void 0,this.loaders[r.type]=void 0,this.hls.trigger(l.default.KEY_LOADED,{frag:r})}},{key:"loaderror",value:function(e,t){var n=t.frag,r=n.loader;r&&r.abort(),this.loaders[t.type]=void 0,this.hls.trigger(l.default.ERROR,{type:f.ErrorTypes.NETWORK_ERROR,details:f.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:n,response:e})}},{key:"loadtimeout",value:function(e,t){var n=t.frag,r=n.loader;r&&r.abort(),this.loaders[t.type]=void 0,this.hls.trigger(l.default.ERROR,{type:f.ErrorTypes.NETWORK_ERROR,details:f.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:n})}}]),t}(c.default);n.default=p},{26:26,27:27,28:28,45:45}],36:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=e(2),l=r(u),d=e(28),c=r(d),f=e(27),h=r(f),p=e(26),v=e(40),m=r(v),g=e(45),y=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,b=/#EXT-X-MEDIA:(.*)/g,E=/#EXTINF:(\d*(?:\.\d+)?)(?:,(.*))?|(?!#)(\S.+)|#EXT-X-BYTERANGE: *(.+)|#EXT-X-PROGRAM-DATE-TIME:(.+)|#.*/g,_=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)(.*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,T=function(){function e(){o(this,e),this.method=null,this.key=null,this.iv=null,this._uri=null}return s(e,[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=l.default.buildAbsoluteURL(this.baseuri,this.reluri)),this._uri}}]),e}(),S=function(){function e(){o(this,e),this._url=null,this._byteRange=null,this._decryptdata=null,this.tagList=[]}return s(e,[{key:"createInitializationVector",value:function(e){for(var t=new Uint8Array(16),n=12;n<16;n++)t[n]=e>>8*(15-n)&255;return t}},{key:"fragmentDecryptdataFromLevelkey",value:function(e,t){var n=e;return e&&e.method&&e.uri&&!e.iv&&(n=new T,n.method=e.method,n.baseuri=e.baseuri,n.reluri=e.reluri,n.iv=this.createInitializationVector(t)),n}},{key:"cloneObj",value:function(e){return JSON.parse(JSON.stringify(e))}},{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=l.default.buildAbsoluteURL(this.baseurl,this.relurl)),this._url},set:function(e){this._url=e}},{key:"programDateTime",get:function(){return!this._programDateTime&&this.rawProgramDateTime&&(this._programDateTime=new Date(Date.parse(this.rawProgramDateTime))),this._programDateTime}},{key:"byteRange",get:function(){if(!this._byteRange){var e=this._byteRange=[];if(this.rawByteRange){var t=this.rawByteRange.split("@",2);if(1===t.length){var n=this.lastByteRangeEndOffset;e[0]=n?n:0}else e[0]=parseInt(t[1]);e[1]=parseInt(t[0])+e[0]}}return this._byteRange}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){return this._decryptdata||(this._decryptdata=this.fragmentDecryptdataFromLevelkey(this.levelkey,this.sn)),this._decryptdata}}]),e}(),A=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,c.default.MANIFEST_LOADING,c.default.LEVEL_LOADING,c.default.AUDIO_TRACK_LOADING));return n.loaders={},n}return a(t,e),s(t,[{key:"destroy",value:function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy()}this.loaders={},h.default.prototype.destroy.call(this)}},{key:"onManifestLoading",value:function(e){this.load(e.url,{type:"manifest"})}},{key:"onLevelLoading",value:function(e){this.load(e.url,{type:"level",level:e.level,id:e.id})}},{key:"onAudioTrackLoading",value:function(e){this.load(e.url,{type:"audioTrack",id:e.id})}},{key:"load",value:function(e,t){var n=this.loaders[t.type];if(n){var r=n.context;if(r&&r.url===e)return void g.logger.trace("playlist request ongoing");g.logger.warn("abort previous loader for type:"+t.type),n.abort()}var i=this.hls.config,a=void 0,o=void 0,s=void 0,u=void 0;"manifest"===t.type?(a=i.manifestLoadingMaxRetry,o=i.manifestLoadingTimeOut,s=i.manifestLoadingRetryDelay,u=i.manifestLoadingMaxRetryTimeout):(a=i.levelLoadingMaxRetry,o=i.levelLoadingTimeOut,s=i.levelLoadingRetryDelay,u=i.levelLoadingMaxRetryTimeout,g.logger.log("loading playlist for "+t.type+" "+(t.level||t.id))),n=this.loaders[t.type]=t.loader="undefined"!=typeof i.pLoader?new i.pLoader(i):new i.loader(i),t.url=e,t.responseType="";var l=void 0,d=void 0;l={timeout:o,maxRetry:a,retryDelay:s,maxRetryDelay:u},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},n.load(t,l,d)}},{key:"resolve",value:function(e,t){return l.default.buildAbsoluteURL(t,e)}},{key:"parseMasterPlaylist",value:function(e,t){var n=[],r=void 0;for(y.lastIndex=0;null!=(r=y.exec(e));){var i={},a=i.attrs=new m.default(r[1]);i.url=this.resolve(r[2],t);var o=a.decimalResolution("RESOLUTION");o&&(i.width=o.width,i.height=o.height),i.bitrate=a.decimalInteger("AVERAGE-BANDWIDTH")||a.decimalInteger("BANDWIDTH"),i.name=a.NAME;var s=a.CODECS;if(s){s=s.split(/[ ,]+/);for(var u=0;u<s.length;u++){var l=s[u];l.indexOf("avc1")!==-1?i.videoCodec=this.avc1toavcoti(l):i.audioCodec=l}}n.push(i)}return n}},{key:"parseMasterPlaylistMedia",value:function(e,t,n){var r=void 0,i=[];for(b.lastIndex=0;null!=(r=b.exec(e));){var a={},o=new m.default(r[1]);o.TYPE===n&&(a.groupId=o["GROUP-ID"],a.name=o.NAME,a.type=n,a.default="YES"===o.DEFAULT,a.autoselect="YES"===o.AUTOSELECT,a.forced="YES"===o.FORCED,o.URI&&(a.url=this.resolve(o.URI,t)),a.lang=o.LANGUAGE,a.name||(a.name=a.lang),i.push(a))}return i}},{key:"avc1toavcoti",value:function(e){var t,n=e.split(".");return n.length>2?(t=n.shift()+".",t+=parseInt(n.shift()).toString(16),t+=("000"+parseInt(n.shift()).toString(16)).substr(-4)):t=e,t}},{key:"parseLevelPlaylist",value:function(e,t,n,r){var i,a,o=0,s=0,u={type:null,version:null,url:t,fragments:[],live:!0,startSN:0},l=new T,d=0,c=null,f=new S;for(E.lastIndex=0;null!==(i=E.exec(e));){var h=i[1];if(h){f.duration=parseFloat(h);var p=(" "+i[2]).slice(1);f.title=p?p:null,f.tagList.push(p?["INF",h,p]:["INF",h])}else if(i[3]){if(!isNaN(f.duration)){var v=o++;f.type=r,f.start=s,f.levelkey=l,f.sn=v,f.level=n,f.cc=d,f.baseurl=t,f.relurl=(" "+i[3]).slice(1),u.fragments.push(f),c=f,s+=f.duration,f=new S}}else if(i[4]){if(f.rawByteRange=(" "+i[4]).slice(1),c){var y=c.byteRangeEndOffset;y&&(f.lastByteRangeEndOffset=y)}}else if(i[5])f.rawProgramDateTime=(" "+i[5]).slice(1),f.tagList.push(["PROGRAM-DATE-TIME",f.rawProgramDateTime]);else{for(i=i[0].match(_),a=1;a<i.length&&void 0===i[a];a++);var b=(" "+i[a+1]).slice(1),A=(" "+i[a+2]).slice(1);switch(i[a]){case"#":f.tagList.push(A?[b,A]:[b]);break;case"PLAYLIST-TYPE":u.type=b.toUpperCase();break;case"MEDIA-SEQUENCE":o=u.startSN=parseInt(b);break;case"TARGETDURATION":u.targetduration=parseFloat(b);break;case"VERSION":u.version=parseInt(b);break;case"EXTM3U":break;case"ENDLIST":u.live=!1;break;case"DIS":d++,f.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":d=parseInt(b);break;case"KEY":var L=b,R=new m.default(L),O=R.enumeratedString("METHOD"),k=R.URI,w=R.hexadecimalInteger("IV");O&&(l=new T,k&&"AES-128"===O&&(l.method=O,l.baseuri=t,l.reluri=k,l.key=null,l.iv=w));break;case"START":var D=b,P=new m.default(D),I=P.decimalFloatingPoint("TIME-OFFSET");isNaN(I)||(u.startTimeOffset=I);break;case"MAP":var x=new m.default(b);f.relurl=x.URI,f.rawByteRange=x.BYTERANGE,f.baseurl=t,f.level=n,f.type=r,f.sn="initSegment",u.initSegment=f,f=new S;break;default:g.logger.warn("line parsed but not handled: "+i)}}}return f=c,f&&!f.relurl&&(u.fragments.pop(),s-=f.duration),u.totalduration=s,u.averagetargetduration=s/u.fragments.length,u.endSN=o-1,u}},{key:"loadsuccess",value:function(e,t,n){var r=e.data,i=e.url,a=n.type,o=n.id,s=n.level,u=this.hls;if(this.loaders[a]=void 0,void 0!==i&&0!==i.indexOf("data:")||(i=n.url),t.tload=performance.now(),0===r.indexOf("#EXTM3U"))if(r.indexOf("#EXTINF:")>0){var l="audioTrack"!==a,d=this.parseLevelPlaylist(r,i,(l?s:o)||0,l?"main":"audio");"manifest"===a&&u.trigger(c.default.MANIFEST_LOADED,{levels:[{url:i,details:d}],audioTracks:[],url:i,stats:t}),t.tparsed=performance.now(),d.targetduration?l?u.trigger(c.default.LEVEL_LOADED,{details:d,level:s||0,id:o||0,stats:t}):u.trigger(c.default.AUDIO_TRACK_LOADED,{details:d,id:o,stats:t}):u.trigger(c.default.ERROR,{type:p.ErrorTypes.NETWORK_ERROR,details:p.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:i,reason:"invalid targetduration"})}else{var f=this.parseMasterPlaylist(r,i);if(f.length){var h=this.parseMasterPlaylistMedia(r,i,"AUDIO");if(h.length){var v=!1;h.forEach(function(e){e.url||(v=!0)}),v===!1&&f[0].audioCodec&&!f[0].attrs.AUDIO&&(g.logger.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),h.unshift({type:"main",name:"main"}))}u.trigger(c.default.MANIFEST_LOADED,{levels:f,audioTracks:h,url:i,stats:t})}else u.trigger(c.default.ERROR,{type:p.ErrorTypes.NETWORK_ERROR,details:p.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:i,reason:"no level found in manifest"})}else u.trigger(c.default.ERROR,{type:p.ErrorTypes.NETWORK_ERROR,details:p.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:i,reason:"no EXTM3U delimiter"})}},{key:"loaderror",value:function(e,t){var n,r,i=t.loader;switch(t.type){case"manifest":n=p.ErrorDetails.MANIFEST_LOAD_ERROR,r=!0;break;case"level":n=p.ErrorDetails.LEVEL_LOAD_ERROR,r=!1;break;case"audioTrack":n=p.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,r=!1}i&&(i.abort(),this.loaders[t.type]=void 0),this.hls.trigger(c.default.ERROR,{type:p.ErrorTypes.NETWORK_ERROR,details:n,fatal:r,url:i.url,loader:i,response:e,context:t})}},{key:"loadtimeout",value:function(e,t){var n,r,i=t.loader;switch(t.type){case"manifest":n=p.ErrorDetails.MANIFEST_LOAD_TIMEOUT,r=!0;break;case"level":n=p.ErrorDetails.LEVEL_LOAD_TIMEOUT,r=!1;break;case"audioTrack":n=p.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT,r=!1}i&&(i.abort(),this.loaders[t.type]=void 0),this.hls.trigger(c.default.ERROR,{type:p.ErrorTypes.NETWORK_ERROR,details:n,fatal:r,url:i.url,loader:i,context:t})}}]),t}(h.default);n.default=A},{2:2,26:26,27:27,28:28,40:40,45:45}],37:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){r(this,e)}return i(e,null,[{key:"init",value:function(){e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};var t;for(t in e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var n=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);e.HDLR_TYPES={video:n,audio:r};var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),a=new Uint8Array([0,0,0,0,0,0,0,0]);e.STTS=e.STSC=e.STCO=a,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var o=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),u=new Uint8Array([0,0,0,1]);e.FTYP=e.box(e.types.ftyp,o,u,o,s),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,i))}},{key:"box",value:function(e){for(var t,n=Array.prototype.slice.call(arguments,1),r=8,i=n.length,a=i;i--;)r+=n[i].byteLength;for(t=new Uint8Array(r),t[0]=r>>24&255,t[1]=r>>16&255,t[2]=r>>8&255,t[3]=255&r,t.set(e,4),i=0,r=8;i<a;i++)t.set(n[i],r),r+=n[i].byteLength;return t}},{key:"hdlr",value:function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])}},{key:"mdat",value:function(t){return e.box(e.types.mdat,t)}},{key:"mdhd",value:function(t,n){return n*=t,e.box(e.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,n>>24,n>>16&255,n>>8&255,255&n,85,196,0,0]))}},{key:"mdia",value:function(t){return e.box(e.types.mdia,e.mdhd(t.timescale,t.duration),e.hdlr(t.type),e.minf(t))}},{key:"mfhd",value:function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))}},{key:"minf",value:function(t){return"audio"===t.type?e.box(e.types.minf,e.box(e.types.smhd,e.SMHD),e.DINF,e.stbl(t)):e.box(e.types.minf,e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(t))}},{key:"moof",value:function(t,n,r){return e.box(e.types.moof,e.mfhd(t),e.traf(r,n))}},{key:"moov",value:function(t){for(var n=t.length,r=[];n--;)r[n]=e.trak(t[n]);return e.box.apply(null,[e.types.moov,e.mvhd(t[0].timescale,t[0].duration)].concat(r).concat(e.mvex(t)))}},{key:"mvex",value:function(t){for(var n=t.length,r=[];n--;)r[n]=e.trex(t[n]);return e.box.apply(null,[e.types.mvex].concat(r))}},{key:"mvhd",value:function(t,n){n*=t;var r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,t>>24&255,t>>16&255,t>>8&255,255&t,n>>24&255,n>>16&255,n>>8&255,255&n,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.box(e.types.mvhd,r)}},{key:"sdtp",value:function(t){var n,r,i=t.samples||[],a=new Uint8Array(4+i.length);for(r=0;r<i.length;r++)n=i[r].flags,a[r+4]=n.dependsOn<<4|n.isDependedOn<<2|n.hasRedundancy;return e.box(e.types.sdtp,a)}},{key:"stbl",value:function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))}},{key:"avc1",value:function(t){var n,r,i,a=[],o=[];for(n=0;n<t.sps.length;n++)r=t.sps[n],i=r.byteLength,a.push(i>>>8&255),a.push(255&i),a=a.concat(Array.prototype.slice.call(r));for(n=0;n<t.pps.length;n++)r=t.pps[n],i=r.byteLength,o.push(i>>>8&255),o.push(255&i),o=o.concat(Array.prototype.slice.call(r));var s=e.box(e.types.avcC,new Uint8Array([1,a[3],a[4],a[5],255,224|t.sps.length].concat(a).concat([t.pps.length]).concat(o))),u=t.width,l=t.height,d=t.pixelRatio[0],c=t.pixelRatio[1];return e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,u>>8&255,255&u,l>>8&255,255&l,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),e.box(e.types.pasp,new Uint8Array([d>>24,d>>16&255,d>>8&255,255&d,c>>24,c>>16&255,c>>8&255,255&c])))}},{key:"esds",value:function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))}},{key:"mp4a",value:function(t){var n=t.audiosamplerate;return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]),e.box(e.types.esds,e.esds(t)))}},{key:"mp3",value:function(t){var n=t.audiosamplerate;return e.box(e.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]))}},{key:"stsd",value:function(t){return"audio"===t.type?t.isAAC||"mp3"!==t.codec?e.box(e.types.stsd,e.STSD,e.mp4a(t)):e.box(e.types.stsd,e.STSD,e.mp3(t)):e.box(e.types.stsd,e.STSD,e.avc1(t))}},{key:"tkhd",value:function(t){var n=t.id,r=t.duration*t.timescale,i=t.width,a=t.height;return e.box(e.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,n>>24&255,n>>16&255,n>>8&255,255&n,0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,255&i,0,0,a>>8&255,255&a,0,0]))}},{key:"traf",value:function(t,n){var r=e.sdtp(t),i=t.id;return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i])),e.box(e.types.tfdt,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n])),e.trun(t,r.length+16+16+8+16+8+8),r)}},{key:"trak",value:function(t){return t.duration=t.duration||4294967295,e.box(e.types.trak,e.tkhd(t),e.mdia(t))}},{key:"trex",value:function(t){var n=t.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}},{key:"trun",value:function(t,n){var r,i,a,o,s,u,l=t.samples||[],d=l.length,c=12+16*d,f=new Uint8Array(c);for(n+=8+c,f.set([0,0,15,1,d>>>24&255,d>>>16&255,d>>>8&255,255&d,n>>>24&255,n>>>16&255,n>>>8&255,255&n],0),r=0;r<d;r++)i=l[r],a=i.duration,o=i.size,s=i.flags,u=i.cts,f.set([a>>>24&255,a>>>16&255,a>>>8&255,255&a,o>>>24&255,o>>>16&255,o>>>8&255,255&o,s.isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,u>>>24&255,u>>>16&255,u>>>8&255,255&u],12+16*r);return e.box(e.types.trun,f)}},{key:"initSegment",value:function(t){e.types||e.init();var n,r=e.moov(t);return n=new Uint8Array(e.FTYP.byteLength+r.byteLength),n.set(e.FTYP),n.set(r,e.FTYP.byteLength),n}}]),e}();n.default=a},{}],38:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e(29),s=r(o),u=e(28),l=r(u),d=e(45),c=e(37),f=r(c),h=e(26),p=function(){function e(t,n,r,a){i(this,e),this.observer=t,this.id=n,this.config=r,this.typeSupported=a,this.ISGenerated=!1,this.PES2MP4SCALEFACTOR=4,this.PES_TIMESCALE=9e4,this.MP4_TIMESCALE=this.PES_TIMESCALE/this.PES2MP4SCALEFACTOR}return a(e,[{key:"destroy",value:function(){}},{key:"insertDiscontinuity",value:function(){this._initPTS=this._initDTS=void 0}},{key:"switchLevel",value:function(){this.ISGenerated=!1}},{key:"remux",value:function(e,t,n,r,i,a,o,s,u,d,c){if(this.level=e,this.sn=t,this.ISGenerated||this.generateIS(r,i,s,n),null!==c&&(this._initPTS=this._initDTS=c),this.ISGenerated)if(r.samples.length){var f=this.remuxAudio(r,s,u,d);if(i.samples.length){var h=void 0;f&&(h=f.endPTS-f.startPTS),this.remuxVideo(i,s,u,h)}}else{var p=void 0;i.samples.length&&(p=this.remuxVideo(i,s,u)),p&&r.codec&&this.remuxEmptyAudio(r,s,u,p)}a.samples.length&&this.remuxID3(a,s),o.samples.length&&this.remuxText(o,s),this.observer.trigger(l.default.FRAG_PARSED,{id:this.id,level:this.level,sn:this.sn})}},{key:"generateIS",value:function(e,t,n,r){var i,a,o=this.observer,s=e.samples,u=t.samples,c=this.PES_TIMESCALE,p=this.typeSupported,v="audio/mp4",m={},g={id:this.id,level:this.level,sn:this.sn,tracks:m,unique:!1},y=void 0===this._initPTS;y&&(i=a=1/0),e.config&&s.length&&(e.timescale=e.audiosamplerate,e.timescale*e.duration>Math.pow(2,32)&&!function(){var t=function e(t,n){return n?e(n,t%n):t};e.timescale=e.audiosamplerate/t(e.audiosamplerate,e.isAAC?1024:1152)}(),d.logger.log("audio mp4 timescale :"+e.timescale),e.isAAC||(p.mpeg?(v="audio/mpeg",e.codec=""):p.mp3&&(e.codec="mp3")),m.audio={container:v,codec:e.codec,initSegment:!e.isAAC&&p.mpeg?new Uint8Array:f.default.initSegment([e]),metadata:{channelCount:e.channelCount}},y&&(i=a=s[0].pts-c*n)),t.sps&&t.pps&&u.length&&(t.timescale=this.MP4_TIMESCALE,m.video={container:"video/mp4",codec:t.codec,initSegment:f.default.initSegment([t]),metadata:{width:t.width,height:t.height}},y&&(i=Math.min(i,u[0].pts-c*n),a=Math.min(a,u[0].dts-c*n),this.observer.trigger(l.default.INIT_PTS_FOUND,{id:this.id,initPTS:i,cc:r}))),Object.keys(m).length?(o.trigger(l.default.FRAG_PARSING_INIT_SEGMENT,g),this.ISGenerated=!0,y&&(this._initPTS=i,this._initDTS=a)):o.trigger(l.default.ERROR,{type:h.ErrorTypes.MEDIA_ERROR,id:this.id,details:h.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})}},{key:"remuxVideo",value:function(e,t,n,r){var i,a,o,s,u,c,p,v,m=8,g=this.PES_TIMESCALE,y=this.PES2MP4SCALEFACTOR,b=e.samples,E=[],_=b.length,T=this._PTSNormalize,S=this._initDTS;b.sort(function(e,t){var n=e.dts-t.dts;return n?n:e.pts-t.pts});var A=b.reduce(function(e,t){return Math.max(Math.min(e,t.pts-t.dts),-18e3)},0);if(A<0){d.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+Math.round(A/90)+" ms to overcome this issue");for(var L=0;L<b.length;L++)b[L].dts+=A}var R=void 0;R=n?this.nextAvcDts:t*g;var O=b[0];u=Math.max(T(O.dts-S,R),0),s=Math.max(T(O.pts-S,R),0);var k=Math.round((u-R)/90);n&&k&&(k>1?d.logger.log("AVC:"+k+" ms hole between fragments detected,filling it"):k<-1&&d.logger.log("AVC:"+-k+" ms overlapping between fragments detected"),u=R,b[0].dts=u+S,s=Math.max(s-k,R),b[0].pts=s+S,d.logger.log("Video/PTS/DTS adjusted: "+Math.round(s/90)+"/"+Math.round(u/90)+",delta:"+k+" ms")),c=u,O=b[b.length-1],v=Math.max(T(O.dts-S,R),0),p=Math.max(T(O.pts-S,R),0),p=Math.max(p,v);var w=navigator.vendor,D=navigator.userAgent,P=w&&w.indexOf("Apple")>-1&&D&&!D.match("CriOS");P&&(i=Math.round((v-u)/(y*(b.length-1))));for(var I=0;I<_;I++){var x=b[I];P?x.dts=u+I*y*i:(x.dts=Math.max(T(x.dts-S,R),u),x.dts=Math.round(x.dts/y)*y),x.pts=Math.max(T(x.pts-S,R),x.dts),x.pts=Math.round(x.pts/y)*y}var C=e.len+4*e.nbNalu+8;try{a=new Uint8Array(C)}catch(e){return void this.observer.trigger(l.default.ERROR,{type:h.ErrorTypes.MUX_ERROR,level:this.level,id:this.id,details:h.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:C,reason:"fail allocating video mdat "+C})}var M=new DataView(a.buffer);M.setUint32(0,C),a.set(f.default.types.mdat,4);for(var N=0;N<_;N++){for(var F=b[N],B=F.units.units,U=0,j=void 0,G=0,H=B.length;G<H;G++){var V=B[G],K=V.data,W=V.data.byteLength;M.setUint32(m,W),m+=4,a.set(K,m),m+=W,U+=4+W}if(P)j=Math.max(0,i*Math.round((F.pts-F.dts)/(y*i)));else{if(N<_-1)i=b[N+1].dts-F.dts;else{var Y=this.config,z=F.dts-b[N>0?N-1:N].dts;if(Y.stretchShortVideoTrack){var q=Y.maxBufferHole,X=Y.maxSeekHole,$=Math.floor(Math.min(q,X)*g),Q=(r?s+r*g:this.nextAudioPts)-F.pts;Q>$?(i=Q-z,i<0&&(i=z),d.logger.log("It is approximately "+Q/90+" ms to the next segment; using duration "+i/90+" ms for the last video frame.")):i=z}else i=z}i/=y,j=Math.round((F.pts-F.dts)/y)}E.push({size:U,duration:i,cts:j,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:F.key?2:1,isNonSync:F.key?0:1}})}this.nextAvcDts=v+i*y;var Z=e.dropped;if(e.len=0,e.nbNalu=0,e.dropped=0,E.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var J=E[0].flags;J.dependsOn=2,J.isNonSync=0}e.samples=E,o=f.default.moof(e.sequenceNumber++,u/y,e),e.samples=[];var ee={id:this.id,level:this.level,sn:this.sn,data1:o,data2:a,startPTS:s/g,endPTS:(p+y*i)/g,startDTS:u/g,endDTS:this.nextAvcDts/g,type:"video",nb:E.length,dropped:Z};return this.observer.trigger(l.default.FRAG_PARSING_DATA,ee),ee}},{key:"remuxAudio",value:function(e,t,n,r){var i,a,o,u,c,p,v,m,g,y,b,E,_,T,S,A,L=this.PES_TIMESCALE,R=e.timescale,O=L/R,k=e.timescale*(e.isAAC?1024:1152)/e.audiosamplerate,w=k*O,D=this._PTSNormalize,P=this._initDTS,I=!e.isAAC&&this.typeSupported.mpeg,x=I?0:8,C=[],M=[];if(e.samples.sort(function(e,t){return e.pts-t.pts}),M=e.samples,A=this.nextAudioPts,n|=M.length&&A&&(Math.abs(t-A/L)<.1||Math.abs(M[0].pts-A-this._initDTS)<20*w),n||(A=t*L),r&&e.isAAC)for(var N=0,F=A;N<M.length;){var B=M[N],U=D(B.pts-P,A),j=U-F;if(j<=-w)d.logger.warn("Dropping 1 audio frame @ "+Math.round(F/90)/1e3+"s due to "+Math.round(Math.abs(j/90))+" ms overlap."),M.splice(N,1),e.len-=B.unit.length;else if(j>=w&&F){var G=Math.round(j/w);d.logger.warn("Injecting "+G+" audio frame @ "+Math.round(F/90)/1e3+"s due to "+Math.round(j/90)+" ms gap.");for(var H=0;H<G;H++)S=F+P,S=Math.max(S,P),T=s.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount),T||(d.logger.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),T=B.unit.subarray()),M.splice(N,0,{unit:T,pts:S,dts:S}),e.len+=T.length,F+=w,N+=1;B.pts=B.dts=F+P,F+=w,N+=1}else Math.abs(j)>.1*w,F+=w,0===N?B.pts=B.dts=P+A:B.pts=B.dts=M[N-1].pts+w,N+=1}for(var V=0,K=M.length;V<K;V++){if(a=M[V],u=a.unit,y=a.pts-P,b=a.dts-P,void 0!==g)E=D(y,g),_=D(b,g),o.duration=Math.round((_-g)/O);else{E=D(y,A),_=D(b,A);var W=Math.round(1e3*(E-A)/L),Y=0;if(n&&e.isAAC&&W){if(W>0)Y=Math.round((E-A)/w),d.logger.log(W+" ms hole between AAC samples detected,filling it"),Y>0&&(T=s.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount),T||(T=u.subarray()),e.len+=Y*T.length);else if(W<-12){d.logger.log(-W+" ms overlapping between AAC samples detected, drop frame"),e.len-=u.byteLength;continue}E=_=A}if(v=Math.max(0,E),m=Math.max(0,_),!(e.len>0))return;var z=I?e.len:e.len+8;try{c=new Uint8Array(z)}catch(e){return void this.observer.trigger(l.default.ERROR,{type:h.ErrorTypes.MUX_ERROR,level:this.level,id:this.id,details:h.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:z,reason:"fail allocating audio mdat "+z})}I||(i=new DataView(c.buffer),i.setUint32(0,z),c.set(f.default.types.mdat,4));for(var q=0;q<Y;q++)S=E-(Y-q)*w,T=s.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount),T||(d.logger.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),T=u.subarray()),c.set(T,x),x+=T.byteLength,o={size:T.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},C.push(o)}c.set(u,x);var X=u.byteLength;x+=X,o={size:X,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},C.push(o),g=_}var $=0,Q=C.length;if(Q>=2&&($=C[Q-2].duration,o.duration=$),Q){this.nextAudioPts=E+O*$,e.len=0,e.samples=C,p=I?new Uint8Array:f.default.moof(e.sequenceNumber++,m/O,e),e.samples=[];var Z={id:this.id,level:this.level,sn:this.sn,data1:p,data2:c,startPTS:v/L,endPTS:this.nextAudioPts/L,startDTS:m/L,endDTS:(_+O*$)/L,type:"audio",nb:Q};return this.observer.trigger(l.default.FRAG_PARSING_DATA,Z),Z}return null}},{key:"remuxEmptyAudio",value:function(e,t,n,r){var i=this.PES_TIMESCALE,a=e.timescale?e.timescale:e.audiosamplerate,o=i/a,u=this.nextAudioPts,l=(void 0!==u?u:r.startDTS*i)+this._initDTS,c=r.endDTS*i+this._initDTS,f=1024,h=o*f,p=Math.ceil((c-l)/h),v=s.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(d.logger.warn("remux empty Audio"),!v)return void d.logger.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!");for(var m=[],g=0;g<p;g++){var y=l+g*h;m.push({unit:v,pts:y,dts:y}),e.len+=v.length}e.samples=m,this.remuxAudio(e,t,n)}},{key:"remuxID3",value:function(e,t){var n,r=e.samples.length;if(r){for(var i=0;i<r;i++)n=e.samples[i],n.pts=(n.pts-this._initPTS)/this.PES_TIMESCALE,n.dts=(n.dts-this._initDTS)/this.PES_TIMESCALE;this.observer.trigger(l.default.FRAG_PARSING_METADATA,{id:this.id,level:this.level,sn:this.sn,samples:e.samples})}e.samples=[],t=t}},{key:"remuxText",value:function(e,t){e.samples.sort(function(e,t){return e.pts-t.pts});var n,r=e.samples.length;if(r){for(var i=0;i<r;i++)n=e.samples[i],n.pts=(n.pts-this._initPTS)/this.PES_TIMESCALE;this.observer.trigger(l.default.FRAG_PARSING_USERDATA,{id:this.id,level:this.level,sn:this.sn,samples:e.samples})}e.samples=[],t=t}},{key:"_PTSNormalize",value:function(e,t){var n;if(void 0===t)return e;for(n=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=n;return e}},{key:"passthrough",get:function(){return!1}}]),e}();n.default=p},{26:26,28:28,29:29,37:37,45:45}],39:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){
function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e(28),s=r(o),u=function(){function e(t,n){i(this,e),this.observer=t,this.id=n,this.ISGenerated=!1}return a(e,[{key:"destroy",value:function(){}},{key:"insertDiscontinuity",value:function(){}},{key:"switchLevel",value:function(){this.ISGenerated=!1}},{key:"remux",value:function(e,t,n,r,i,a){var o=this.observer;if(!this.ISGenerated){var u={},l={id:this.id,tracks:u,unique:!0},d=t,c=d.codec;c&&(l.tracks.video={container:d.container,codec:c,metadata:{width:d.width,height:d.height}}),d=e,c=d.codec,c&&(l.tracks.audio={container:d.container,codec:c,metadata:{channelCount:d.channelCount}}),this.ISGenerated=!0,o.trigger(s.default.FRAG_PARSING_INIT_SEGMENT,l)}o.trigger(s.default.FRAG_PARSING_DATA,{id:this.id,data1:a,startPTS:i,startDTS:i,type:"audiovideo",nb:1,dropped:0})}},{key:"passthrough",get:function(){return!0}}]),e}();n.default=u},{28:28}],40:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=/^(\d+)x(\d+)$/,o=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,s=function(){function e(t){r(this,e),"string"==typeof t&&(t=e.parseAttrList(t));for(var n in t)t.hasOwnProperty(n)&&(this[n]=t[n])}return i(e,[{key:"decimalInteger",value:function(e){var t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t}},{key:"hexadecimalInteger",value:function(e){if(this[e]){var t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;for(var n=new Uint8Array(t.length/2),r=0;r<t.length/2;r++)n[r]=parseInt(t.slice(2*r,2*r+2),16);return n}return null}},{key:"hexadecimalIntegerAsNumber",value:function(e){var t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t}},{key:"decimalFloatingPoint",value:function(e){return parseFloat(this[e])}},{key:"enumeratedString",value:function(e){return this[e]}},{key:"decimalResolution",value:function(e){var t=a.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}}}],[{key:"parseAttrList",value:function(e){var t,n={};for(o.lastIndex=0;null!==(t=o.exec(e));){var r=t[2],i='"';0===r.indexOf(i)&&r.lastIndexOf(i)===r.length-1&&(r=r.slice(1,-1)),n[t[1]]=r}return n}}]),e}();n.default=s},{}],41:[function(e,t,n){"use strict";var r={search:function(e,t){for(var n=0,r=e.length-1,i=null,a=null;n<=r;){i=(n+r)/2|0,a=e[i];var o=t(a);if(o>0)n=i+1;else{if(!(o<0))return a;r=i-1}}return null}};t.exports=r},{}],42:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},o=function(e){var t=e;return a.hasOwnProperty(e)&&(t=a[e]),String.fromCharCode(t)},s=15,u=32,l={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},d={17:2,18:4,21:6,22:8,23:10,19:13,20:15},c={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},f={25:2,26:4,29:6,30:8,31:10,27:13,28:15},h=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],p={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e,t){var n=this.verboseFilter[e];this.verboseLevel>=n&&console.log(this.time+" ["+e+"] "+t)}},v=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].toString(16));return t},m=function(){function e(t,n,i,a,o){r(this,e),this.foreground=t||"white",this.underline=n||!1,this.italics=i||!1,this.background=a||"black",this.flash=o||!1}return i(e,[{key:"reset",value:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}},{key:"setStyles",value:function(e){for(var t=["foreground","underline","italics","background","flash"],n=0;n<t.length;n++){var r=t[n];e.hasOwnProperty(r)&&(this[r]=e[r])}}},{key:"isDefault",value:function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash}},{key:"equals",value:function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}},{key:"copy",value:function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}},{key:"toString",value:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}]),e}(),g=function(){function e(t,n,i,a,o,s){r(this,e),this.uchar=t||" ",this.penState=new m(n,i,a,o,s)}return i(e,[{key:"reset",value:function(){this.uchar=" ",this.penState.reset()}},{key:"setChar",value:function(e,t){this.uchar=e,this.penState.copy(t)}},{key:"setPenState",value:function(e){this.penState.copy(e)}},{key:"equals",value:function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}},{key:"copy",value:function(e){this.uchar=e.uchar,this.penState.copy(e.penState)}},{key:"isEmpty",value:function(){return" "===this.uchar&&this.penState.isDefault()}}]),e}(),y=function(){function e(){r(this,e),this.chars=[];for(var t=0;t<u;t++)this.chars.push(new g);this.pos=0,this.currPenState=new m}return i(e,[{key:"equals",value:function(e){for(var t=!0,n=0;n<u;n++)if(!this.chars[n].equals(e.chars[n])){t=!1;break}return t}},{key:"copy",value:function(e){for(var t=0;t<u;t++)this.chars[t].copy(e.chars[t])}},{key:"isEmpty",value:function(){for(var e=!0,t=0;t<u;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e}},{key:"setCursor",value:function(e){this.pos!==e&&(this.pos=e),this.pos<0?(p.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>u&&(p.log("ERROR","Too large cursor position "+this.pos),this.pos=u)}},{key:"moveCursor",value:function(e){var t=this.pos+e;if(e>1)for(var n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)}},{key:"backSpace",value:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}},{key:"insertChar",value:function(e){e>=144&&this.backSpace();var t=o(e);return this.pos>=u?void p.log("ERROR","Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),void this.moveCursor(1))}},{key:"clearFromPos",value:function(e){var t;for(t=e;t<u;t++)this.chars[t].reset()}},{key:"clear",value:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}},{key:"clearToEndOfRow",value:function(){this.clearFromPos(this.pos)}},{key:"getTextString",value:function(){for(var e=[],t=!0,n=0;n<u;n++){var r=this.chars[n].uchar;" "!==r&&(t=!1),e.push(r)}return t?"":e.join("")}},{key:"setPenStyles",value:function(e){this.currPenState.setStyles(e);var t=this.chars[this.pos];t.setPenState(this.currPenState)}}]),e}(),b=function(){function e(){r(this,e),this.rows=[];for(var t=0;t<s;t++)this.rows.push(new y);this.currRow=s-1,this.nrRollUpRows=null,this.reset()}return i(e,[{key:"reset",value:function(){for(var e=0;e<s;e++)this.rows[e].clear();this.currRow=s-1}},{key:"equals",value:function(e){for(var t=!0,n=0;n<s;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t}},{key:"copy",value:function(e){for(var t=0;t<s;t++)this.rows[t].copy(e.rows[t])}},{key:"isEmpty",value:function(){for(var e=!0,t=0;t<s;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e}},{key:"backSpace",value:function(){var e=this.rows[this.currRow];e.backSpace()}},{key:"clearToEndOfRow",value:function(){var e=this.rows[this.currRow];e.clearToEndOfRow()}},{key:"insertChar",value:function(e){var t=this.rows[this.currRow];t.insertChar(e)}},{key:"setPen",value:function(e){var t=this.rows[this.currRow];t.setPenStyles(e)}},{key:"moveCursor",value:function(e){var t=this.rows[this.currRow];t.moveCursor(e)}},{key:"setCursor",value:function(e){p.log("INFO","setCursor: "+e);var t=this.rows[this.currRow];t.setCursor(e)}},{key:"setPAC",value:function(e,t){p.log("INFO","pacData = "+JSON.stringify(e));var n=e.row-1;if(this.nrRollUpRows&&n<this.nrRollUpRows-1&&(n=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==n){for(var r=0;r<s;r++)this.rows[r].clear();var i=this.currRow+1-this.nrRollUpRows,a=t.rows[i].cueStartTime;if(a&&a<p.time)for(r=0;r<this.nrRollUpRows;r++)this.rows[n-this.nrRollUpRows+r+1].copy(t.rows[i+r])}this.currRow=n;var o=this.rows[this.currRow];if(null!==e.indent){var u=e.indent,l=Math.max(u-1,0);o.setCursor(e.indent),e.color=o.chars[l].penState.foreground}var d={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(d)}},{key:"setBkgData",value:function(e){p.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}},{key:"setRollUpRows",value:function(e){this.nrRollUpRows=e}},{key:"rollUp",value:function(){if(null===this.nrRollUpRows)return void p.log("DEBUG","roll_up but nrRollUpRows not set yet");p.log("TEXT",this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),p.log("INFO","Rolling up")}},{key:"getDisplayText",value:function(e){e=e||!1;for(var t=[],n="",r=-1,i=0;i<s;i++){var a=this.rows[i].getTextString();a&&(r=i+1,e?t.push("Row "+r+": '"+a+"'"):t.push(a.trim()))}return t.length>0&&(n=e?"["+t.join(" | ")+"]":t.join("\n")),n}},{key:"getTextAndFormat",value:function(){return this.rows}}]),e}(),E=function(){function e(t,n){r(this,e),this.chNr=t,this.outputFilter=n,this.mode=null,this.verbose=0,this.displayedMemory=new b,this.nonDisplayedMemory=new b,this.lastOutputScreen=new b,this.currRollUpRow=this.displayedMemory.rows[s-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}return i(e,[{key:"reset",value:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[s-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null}},{key:"getHandler",value:function(){return this.outputFilter}},{key:"setHandler",value:function(e){this.outputFilter=e}},{key:"setPAC",value:function(e){this.writeScreen.setPAC(e,this.lastOutputScreen)}},{key:"setBkgData",value:function(e){this.writeScreen.setBkgData(e)}},{key:"setMode",value:function(e){e!==this.mode&&(this.mode=e,p.log("INFO","MODE="+e),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset(),this.lastOutputScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}},{key:"insertChars",value:function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";p.log("INFO",n+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(p.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}},{key:"ccRCL",value:function(){p.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}},{key:"ccBS",value:function(){p.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}},{key:"ccAOF",value:function(){}},{key:"ccAON",value:function(){}},{key:"ccDER",value:function(){p.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}},{key:"ccRU",value:function(e){p.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}},{key:"ccFON",value:function(){p.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})}},{key:"ccRDC",value:function(){p.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}},{key:"ccTR",value:function(){p.log("INFO","TR"),this.setMode("MODE_TEXT")}},{key:"ccRTD",value:function(){p.log("INFO","RTD"),this.setMode("MODE_TEXT")}},{key:"ccEDM",value:function(){p.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()}},{key:"ccCR",value:function(){p.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()}},{key:"ccENM",value:function(){p.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}},{key:"ccEOC",value:function(){if(p.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,p.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()}},{key:"ccTO",value:function(e){p.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}},{key:"ccMIDROW",value:function(e){var t={flash:!1};if(t.underline=e%2===1,t.italics=e>=46,t.italics)t.foreground="white";else{var n=Math.floor(e/2)-16,r=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=r[n]}p.log("INFO","MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)}},{key:"outputDataUpdate",value:function(){var e=p.time;null!==e&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(e,this.displayedMemory),null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))}},{key:"cueSplitAtTime",value:function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}]),e}(),_=function(){function e(t,n,i){r(this,e),this.field=t||1,this.outputs=[n,i],this.channels=[new E(1,n),new E(2,i)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}}return i(e,[{key:"getHandler",value:function(e){return this.channels[e].getHandler()}},{key:"setHandler",value:function(e,t){this.channels[e].setHandler(t)}},{key:"addData",value:function(e,t){var n,r,i,a=!1;this.lastTime=e,p.setTime(e);for(var o=0;o<t.length;o+=2)if(r=127&t[o],i=127&t[o+1],0!==r||0!==i){if(p.log("DATA","["+v([t[o],t[o+1]])+"] -> ("+v([r,i])+")"),n=this.parseCmd(r,i),n||(n=this.parseMidrow(r,i)),n||(n=this.parsePAC(r,i)),n||(n=this.parseBackgroundAttributes(r,i)),!n&&(a=this.parseChars(r,i)))if(this.currChNr&&this.currChNr>=0){var s=this.channels[this.currChNr-1];s.insertChars(a)}else p.log("WARNING","No channel found yet. TEXT-MODE?");n?this.dataCounters.cmd+=2:a?this.dataCounters.char+=2:(this.dataCounters.other+=2,p.log("WARNING","Couldn't parse cleaned data "+v([r,i])+" orig: "+v([t[o],t[o+1]])))}else this.dataCounters.padding+=2}},{key:"parseCmd",value:function(e,t){var n=null,r=(20===e||28===e)&&32<=t&&t<=47,i=(23===e||31===e)&&33<=t&&t<=35;if(!r&&!i)return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,p.log("DEBUG","Repeated command ("+v([e,t])+") is dropped"),!0;n=20===e||23===e?1:2;var a=this.channels[n-1];return 20===e||28===e?32===t?a.ccRCL():33===t?a.ccBS():34===t?a.ccAOF():35===t?a.ccAON():36===t?a.ccDER():37===t?a.ccRU(2):38===t?a.ccRU(3):39===t?a.ccRU(4):40===t?a.ccFON():41===t?a.ccRDC():42===t?a.ccTR():43===t?a.ccRTD():44===t?a.ccEDM():45===t?a.ccCR():46===t?a.ccENM():47===t&&a.ccEOC():a.ccTO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0}},{key:"parseMidrow",value:function(e,t){var n=null;if((17===e||25===e)&&32<=t&&t<=47){if(n=17===e?1:2,n!==this.currChNr)return p.log("ERROR","Mismatch channel in midrow parsing"),!1;var r=this.channels[n-1];return r.ccMIDROW(t),p.log("DEBUG","MIDROW ("+v([e,t])+")"),!0}return!1}},{key:"parsePAC",value:function(e,t){var n=null,r=null,i=(17<=e&&e<=23||25<=e&&e<=31)&&64<=t&&t<=127,a=(16===e||24===e)&&64<=t&&t<=95;if(!i&&!a)return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,!0;n=e<=23?1:2,r=64<=t&&t<=95?1===n?l[e]:c[e]:1===n?d[e]:f[e];var o=this.interpretPAC(r,t),s=this.channels[n-1];return s.setPAC(o),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0}},{key:"interpretPAC",value:function(e,t){var n=t,r={color:null,italics:!1,indent:null,underline:!1,row:e};return n=t>95?t-96:t-64,r.underline=1===(1&n),n<=13?r.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(r.italics=!0,r.color="white"):r.indent=4*Math.floor((n-16)/2),r}},{key:"parseChars",value:function(e,t){var n=null,r=null,i=null;if(e>=25?(n=2,i=e-8):(n=1,i=e),17<=i&&i<=19){var a=t;a=17===i?t+80:18===i?t+112:t+144,p.log("INFO","Special char '"+o(a)+"' in channel "+n),r=[a]}else 32<=e&&e<=127&&(r=0===t?[e]:[e,t]);if(r){var s=v(r);p.log("DEBUG","Char codes =  "+s.join(",")),this.lastCmdA=null,this.lastCmdB=null}return r}},{key:"parseBackgroundAttributes",value:function(e,t){var n,r,i,a,o=(16===e||24===e)&&32<=t&&t<=47,s=(23===e||31===e)&&45<=t&&t<=47;return!(!o&&!s)&&(n={},16===e||24===e?(r=Math.floor((t-32)/2),n.background=h[r],t%2===1&&(n.background=n.background+"_semi")):45===t?n.background="transparent":(n.foreground="black",47===t&&(n.underline=!0)),i=e<24?1:2,a=this.channels[i-1],a.setBkgData(n),this.lastCmdA=null,this.lastCmdB=null,!0)}},{key:"reset",value:function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null}},{key:"cueSplitAtTime",value:function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e)}}]),e}();n.default=_},{}],43:[function(e,t,n){"use strict";var r={newCue:function(e,t,n,r){for(var i,a,o,s,u,l=window.VTTCue||window.TextTrackCue,d=0;d<r.rows.length;d++)if(i=r.rows[d],o=!0,s=0,u="",!i.isEmpty()){for(var c=0;c<i.chars.length;c++)i.chars[c].uchar.match(/\s/)&&o?s++:(u+=i.chars[c].uchar,o=!1);i.cueStartTime=t,a=new l(t,n,u.trim()),s>=16?s--:s++,navigator.userAgent.match(/Firefox\//)?a.line=d+1:a.line=d>7?d-2:d+1,a.align="left",a.position=Math.max(0,Math.min(100,100*(s/32)+(navigator.userAgent.match(/Firefox\//)?50:0))),e.addCue(a)}}};t.exports=r},{}],44:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t){r(this,e),this.alpha_=t?Math.exp(Math.log(.5)/t):0,this.estimate_=0,this.totalWeight_=0}return i(e,[{key:"sample",value:function(e,t){var n=Math.pow(this.alpha_,e);this.estimate_=t*(1-n)+n*this.estimate_,this.totalWeight_+=e}},{key:"getTotalWeight",value:function(){return this.totalWeight_}},{key:"getEstimate",value:function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/e}return this.estimate_}}]),e}();n.default=a},{}],45:[function(e,t,n){"use strict";function r(){}function i(e,t){return t="["+e+"] > "+t}function a(e){var t=self.console[e];return t?function(){for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];r[0]&&(r[0]=i(e,r[0])),t.apply(self.console,r)}:r}function o(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];n.forEach(function(t){l[t]=e[t]?e[t].bind(e):a(t)})}Object.defineProperty(n,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u={trace:r,debug:r,log:r,warn:r,info:r,error:r},l=u;n.enableLogs=function(e){if(e===!0||"object"===("undefined"==typeof e?"undefined":s(e))){o(e,"debug","log","info","warn","error");try{l.log()}catch(e){l=u}}else l=u},n.logger=l},{}],46:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){r(this,e)}return i(e,null,[{key:"toString",value:function(e){for(var t="",n=e.length,r=0;r<n;r++)t+="["+e.start(r).toFixed(3)+","+e.end(r).toFixed(3)+"]";return t}}]),e}();n.default=a},{}],47:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e(45),o=function(){function e(t){r(this,e),t&&t.xhrSetup&&(this.xhrSetup=t.xhrSetup)}return i(e,[{key:"destroy",value:function(){this.abort(),this.loader=null}},{key:"abort",value:function(){var e=this.loader;e&&4!==e.readyState&&(this.stats.aborted=!0,e.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null}},{key:"load",value:function(e,t,n){this.context=e,this.config=t,this.callbacks=n,this.stats={trequest:performance.now(),retry:0},this.retryDelay=t.retryDelay,this.loadInternal()}},{key:"loadInternal",value:function(){var e,t=this.context;e="undefined"!=typeof XDomainRequest?this.loader=new XDomainRequest:this.loader=new XMLHttpRequest,e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.open("GET",t.url,!0),t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.responseType=t.responseType;var n=this.stats;n.tfirst=0,n.loaded=0,this.xhrSetup&&this.xhrSetup(e,t.url),this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),e.send()}},{key:"readystatechange",value:function(e){var t=e.currentTarget,n=t.readyState,r=this.stats,i=this.context,o=this.config;if(!r.aborted&&n>=2)if(window.clearTimeout(this.requestTimeout),0===r.tfirst&&(r.tfirst=Math.max(performance.now(),r.trequest)),4===n){var s=t.status;if(s>=200&&s<300){r.tload=Math.max(r.tfirst,performance.now());var u=void 0,l=void 0;"arraybuffer"===i.responseType?(u=t.response,l=u.byteLength):(u=t.responseText,l=u.length),r.loaded=r.total=l;var d={url:t.responseURL,data:u};this.callbacks.onSuccess(d,r,i)}else r.retry>=o.maxRetry||s>=400&&s<499?(a.logger.error(s+" while loading "+i.url),this.callbacks.onError({code:s,text:t.statusText},i)):(a.logger.warn(s+" while loading "+i.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,o.maxRetryDelay),r.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),o.timeout)}},{key:"loadtimeout",value:function(){a.logger.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context)}},{key:"loadprogress",value:function(e){var t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total);var n=this.callbacks.onProgress;n&&n(t,this.context,null)}}]),e}();n.default=o},{45:45}]},{},[33])(33)})},function(e,t,n){var r,i,a;(function(e){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(o,s){if("object"===n(t)&&"object"===n(e))e.exports=s();else{i=[],r=s,a="function"==typeof r?r.apply(t,i):r,!(void 0!==a&&(e.exports=a))}}(void 0,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=22)}({1:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default={INTENT_TO_PLAY:"intentToPlay",LOADED:"loaded",UNLOAD:"unload",PLAYING:"playing",PAUSE:"pause",SEEKED:"seeked",SEEKING:"seeking",ENDED:"ended",ERROR:"error",BUFFERSTART:"bufferstart",BUFFEREND:"bufferend",BITRATESWITCH:"bitrateswitch",PROGRAM_CHANGED:"programChanged",DATA_CHANGED:"dataChanged"}},22:function(e,t,n){e.exports=n(1)}})})}).call(t,n(24)(e))},function(e,t,n){var r,i,a;(function(e){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(o,s){if("object"===n(t)&&"object"===n(e))e.exports=s();else{i=[],r=s,a="function"==typeof r?r.apply(t,i):r,!(void 0!==a&&(e.exports=a))}}(void 0,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=23)}([function(e,t,r){function i(e){return null!==e}function a(e,t){return/undefined/.test(t)?("undefined"==typeof e?"undefined":l(e))===t:s(e)&&("undefined"==typeof e?"undefined":l(e))===t}function o(e){return i(e)&&!a(e,"undefined")}function s(e){return i(e)&&o(e)}function u(e){return"function"==typeof e.on&&"function"==typeof e.emit}Object.defineProperty(t,"__esModule",{value:!0});var l="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(e){return"undefined"==typeof e?"undefined":n(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":"undefined"==typeof e?"undefined":n(e)};t.notNull=i,t.isType=a,t.isDefined=o,t.isValid=s,t.isEmitter=u},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default={INTENT_TO_PLAY:"intentToPlay",LOADED:"loaded",UNLOAD:"unload",PLAYING:"playing",PAUSE:"pause",SEEKED:"seeked",SEEKING:"seeking",ENDED:"ended",ERROR:"error",BUFFERSTART:"bufferstart",BUFFEREND:"bufferend",BITRATESWITCH:"bitrateswitch",PROGRAM_CHANGED:"programChanged",DATA_CHANGED:"dataChanged"}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default={AKAMAI:"akamai",SCORES:"scores",GA:"ga"}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.default=function(e,t){var n=e&&e.getLogger;return(0,r.isType)(n,"function")&&(0,r.isType)(n(t),"function")?n(t):function(){}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default={STARTED:"started",QUANTILE:"quantile",LIVE_PROGRESS:"liveProgress"}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=t.METRICS={started:"metric21",playedTime:"metric22",totalPlayedTime:"metric23",stopped:"metric24",timeBehindLive:"metric25"},i=t.DIMENSIONS={id:"dimension1",title:"dimension2",year:"dimension3",month:"dimension4",day:"dimension5",referrerDomain:"dimension6",referrer:"dimension7",userIdHit:"dimension8",userIdSession:"dimension9",sourceID:"dimension10",category:"dimension23",autoplay:"dimension24",mediaType:"dimension25",mediaCategory:"dimension26",mimeType:"dimension27",adapterType:"dimension28",errorReason:"dimension30",errorType:"dimension31"};t.default={METRICS:r,DIMENSIONS:i}},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(){}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(10),s=n(1),u=r(s),l=n(2),d=r(l);t.default=function(e,t,n){i(e,t,n);var r=!1,s=n.getConfig(d.default.AKAMAI),l=s.getVendor(d.default.AKAMAI),c=n.getPosition,f=n.getDuration,h={on:t.on.bind(t),off:t.off.bind(t),once:t.once.bind(t),position:c,duration:f},p=void 0;t.on(u.default.DATA_CHANGED,function(){p=s.getData(d.default.AKAMAI)});var v=(0,o.create)(e,h,l,a({},s));return t.on(u.default.DATA_CHANGED,function(){r&&(v.stop(),r=!1),p&&(v.start(p),r=!0)}),{stop:function(){return v.stop()}}}},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t,n){if(!(0,h.isType)(e.setTimeout,"function"))throw new Error("global.setTimeout is not a function");if(!(0,h.isType)(e.clearTimeout,"function"))throw new Error("global.clearTimeout is not a function");if(!(0,h.isType)(n.getConfig(b.default.GA).getVendor,"function"))throw new Error("adapter.getConfig().getVendor is not a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=n(9),u=r(s),l=n(5),d=n(12),c=n(13),f=n(11),h=n(0),p=n(3),v=r(p),m=n(1),g=r(m),y=n(2),b=r(y),E=n(4),_=r(E);t.default=function(e,t,n){function r(){p&&s(),A&&(p=!0,S("start tracking"),L?(C.start(),I.on(_.default.LIVE_PROGRESS,P)):(x.start(),I.on(_.default.QUANTILE,D)),R.start(),I.on(_.default.STARTED,w))}function s(){p&&(p=!1,S("stop tracking"),L?(C.stop(),I.off(_.default.LIVE_PROGRESS,P)):(x.stop(),I.off(_.default.QUANTILE,D)),R.stop(),I.off(_.default.STARTED,w))}a(e,t,n);var p=!1,m=n.getConfig(b.default.GA),y=m.getVendor(b.default.GA),E=n.getPosition,T=n.getDuration,S=(0,v.default)(m,b.default.GA),A=void 0,L=void 0;t.on(g.default.DATA_CHANGED,function(){var e=m.getData(b.default.GA);A=e?Object.keys(e).reduce(function(t,n){var r=e[n];return(0,h.isType)(r,"string")&&0===r.length||null===r||(0,h.isType)(r,"undefined")||(t[n]=r),t},{}):e,L=A&&/live/.test(A[l.DIMENSIONS.mediaCategory])});var R=(0,d.create)(e,t,E,T,S),O={position:E,duration:T,
played:R.played},k=function(e){var t={};A[l.DIMENSIONS.title]&&(t.eventLabel=A[l.DIMENSIONS.title]),y(o(t,A||{},e))},w=function(){var e;S("track playback-started"),k((e={eventCategory:"media-playback",eventAction:"media-playback-started"},i(e,l.METRICS.playedTime,0),i(e,l.METRICS.totalPlayedTime,0),i(e,l.METRICS.started,1),e))},D=function(e){var t;S("track playback-"+e.name+': {"quantileTime": '+e.quantileTime+', "totalTime": '+e.totalTime+"}"),k(o((t={eventCategory:"media-playback",eventAction:"media-playback-"+e.name},i(t,l.METRICS.playedTime,e.quantileTime),i(t,l.METRICS.totalPlayedTime,e.totalTime),t),"completed"===e.name?i({},l.METRICS.stopped,1):{}))},P=function(e){var t;S('track progress: { "programId": '+e.programId+', "progressTime": '+e.progressTime+', "totalTime": '+e.totalTime+', "timeBehindLive": '+e.timeBehindLive+"}"),k((t={eventCategory:"media-playback",eventAction:"media-playback-progress"},i(t,l.DIMENSIONS.id,e.programId),i(t,l.METRICS.playedTime,e.progressTime),i(t,l.METRICS.totalPlayedTime,e.totalTime),i(t,l.METRICS.timeBehindLive,e.timeBehindLive),t))},I=new u.default,x=(0,c.create)(e,O,I,S),C=(0,f.create)(e,O,I,S);return t.on(g.default.PROGRAM_CHANGED,C.programChanged),t.on(g.default.LOADED,r),t.on(g.default.ENDED,s),t.on(g.default.UNLOAD,s),{stop:s}}},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(!(0,s.isValid)(e.screen))throw new Error("global.screen is null or undefined")}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(15),s=n(0),u=n(1),l=r(u),d=n(2),c=r(d);t.default=function(e,t,n){i(e,t,n);var r=n.getConfig(c.default.SCORES),s=r.getVendor(c.default.SCORES),u=n.getPosition,d=n.getDuration,f={on:t.on.bind(t),off:t.off.bind(t),once:t.once.bind(t),position:u,duration:d},h=void 0;t.on(l.default.DATA_CHANGED,function(){h=r.getData(c.default.SCORES)});var p=(0,o.create)(e,f,s,a({},r));return t.on(l.default.LOADED,function(){h&&p.start(h)}),t.on(l.default.UNLOAD,function(){return p.stop()}),{stop:function(){return p.stop()}}}},function(e,t,n){function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function a(){this._events=new r,this._eventsCount=0}var o=Object.prototype.hasOwnProperty,s="~";Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(s=!1)),a.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)o.call(e,t)&&n.push(s?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},a.prototype.listeners=function(e,t){var n=s?s+e:e,r=this._events[n];if(t)return!!r;if(!r)return[];if(r.fn)return[r.fn];for(var i=0,a=r.length,o=new Array(a);i<a;i++)o[i]=r[i].fn;return o},a.prototype.emit=function(e,t,n,r,i,a){var o=s?s+e:e;if(!this._events[o])return!1;var u,l,d=this._events[o],c=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),c){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,n),!0;case 4:return d.fn.call(d.context,t,n,r),!0;case 5:return d.fn.call(d.context,t,n,r,i),!0;case 6:return d.fn.call(d.context,t,n,r,i,a),!0}for(l=1,u=new Array(c-1);l<c;l++)u[l-1]=arguments[l];d.fn.apply(d.context,u)}else{var f,h=d.length;for(l=0;l<h;l++)switch(d[l].once&&this.removeListener(e,d[l].fn,void 0,!0),c){case 1:d[l].fn.call(d[l].context);break;case 2:d[l].fn.call(d[l].context,t);break;case 3:d[l].fn.call(d[l].context,t,n);break;case 4:d[l].fn.call(d[l].context,t,n,r);break;default:if(!u)for(f=1,u=new Array(c-1);f<c;f++)u[f-1]=arguments[f];d[l].fn.apply(d[l].context,u)}}return!0},a.prototype.on=function(e,t,n){var r=new i(t,n||this),a=s?s+e:e;return this._events[a]?this._events[a].fn?this._events[a]=[this._events[a],r]:this._events[a].push(r):(this._events[a]=r,this._eventsCount++),this},a.prototype.once=function(e,t,n){var r=new i(t,n||this,!0),a=s?s+e:e;return this._events[a]?this._events[a].fn?this._events[a]=[this._events[a],r]:this._events[a].push(r):(this._events[a]=r,this._eventsCount++),this},a.prototype.removeListener=function(e,t,n,i){var a=s?s+e:e;if(!this._events[a])return this;if(!t)return 0===--this._eventsCount?this._events=new r:delete this._events[a],this;var o=this._events[a];if(o.fn)o.fn!==t||i&&!o.once||n&&o.context!==n||(0===--this._eventsCount?this._events=new r:delete this._events[a]);else{for(var u=0,l=[],d=o.length;u<d;u++)(o[u].fn!==t||i&&!o[u].once||n&&o[u].context!==n)&&l.push(o[u]);l.length?this._events[a]=1===l.length?l[0]:l:0===--this._eventsCount?this._events=new r:delete this._events[a]}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=s?s+e:e,this._events[t]&&(0===--this._eventsCount?this._events=new r:delete this._events[t])):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prototype.setMaxListeners=function(){return this},a.prefixed=s,a.EventEmitter=a,e.exports=a},function(e,t,r){function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.create=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(e){return"undefined"==typeof e?"undefined":n(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":"undefined"==typeof e?"undefined":n(e)},s=r(0),u=r(3),l=i(u),d=r(1),c=i(d),f=r(2),h=i(f);t.create=function(e,t,n,r){function i(e){u(),y="object"===o(e.data)&&"object"===o(e.config)?a({},e.data,e.config):e,t.once(c.default.INTENT_TO_PLAY,f)}function u(){g=!1}function d(e){return["show","title","category","device","cdnName"].map(function(t){return e[t]}).filter(function(e){return e}).join(", ")}function f(){v("start tracking: {"+d(y)+"}"),u();var r=y.beacon+"?enableGenericAPI=1",i={streamHeadPosition:function(){return t.position()},streamLength:function(){return t.duration()},streamURL:function(){return y.src},configPath:r};e.AKAMAI_MEDIA_ANALYTICS_CONFIG_FILE_PATH=r,m=new n(i),Object.keys(y).forEach(function(e){if(!/(beacon|src)/.test(e)){var t=y[e];m.setData(e,t)}}),m.handleSessionInit()}function p(){t.off(c.default.INTENT_TO_PLAY,f),m&&(m.handlePlayEnd("Play.Stop.Detected"),m=null)}if(!(0,s.isType)(r.playerName,"string")||!(0,s.isType)(r.playerVersion,"string"))throw new Error("playerName and playerVersion must be defined");var v=(0,l.default)(r,h.default.AKAMAI),m=void 0,g=!1,y=void 0;t.on(c.default.PAUSE,function(){m&&m.handlePause()}),t.on(c.default.PLAYING,function(){m&&(g?m.handleResume():(g=!0,m.handlePlaying()))}),t.on(c.default.BUFFERSTART,function(){m&&m.handleBufferStart()}),t.on(c.default.BUFFEREND,function(){m&&m.handleBufferEnd()}),t.on(c.default.SEEKING,function(){m&&m.handleSeek&&m.handleSeek()}),t.on(c.default.BITRATESWITCH,function(e){m&&m.handleBitRateSwitch(e)}),t.on(c.default.ERROR,function(e){m&&(v("stop stacking ("+e+")"),m.handleError(e),m=null)});var b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Play.End.Detected";return function(){m&&(v("stop stacking ("+e+")"),m.handlePlayEnd(e),m=null)}};return t.on(c.default.ENDED,b()),t.on(c.default.UNLOAD,b("Play.Unload.Detected")),{start:i,stop:p}}},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.create=void 0;var i=n(4),a=r(i),o=3,s=600;t.create=function(e,t,n){var r=void 0,i=void 0,u=void 0,l=void 0,d=null,c=function(){for(var e=t.played(),n=0,r=0;r<e.length;++r)n+=e.end(r)-e.start(r);return Math.round(n)},f=function(){return Math.round(t.duration()-t.position())},h=function(){var t=c();t>=o&&(n.emit(a.default.STARTED),e.clearInterval(i))},p=function(){var e=c(),t=f(),r=e-l;l=e,r&&n.emit(a.default.LIVE_PROGRESS,{progressTime:r,timeBehindLive:t,totalTime:e,programId:d})},v=function(){r=!0,l=0,e.clearInterval(i),e.clearInterval(u),i=e.setInterval(h,1e3*o),u=e.setInterval(p,1e3*s)},m=function(){r&&p(),r=!1,e.clearInterval(i),e.clearInterval(u)},g=function(e){r&&p(),d=e?"prf:"+e.toUpperCase():null};return{start:v,stop:m,programChanged:g}}},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.create=void 0;var i=n(0),a=n(1),o=r(a);t.create=function(e,t,n,r,a){function s(e){return e&&e.length?e.map(function(e){return e.map(function(e){return e})}).map(function(e){return 1===e.length&&e.push(n()),e}).filter(function(e){return e[0]<e[1]}).sort(function(e,t){return e[0]-t[0]}).reduce(function(e,t){var n=e.length&&e[e.length-1];return!n||n[1]<t[0]?e.push(t):n[1]=Math.max(n[1],t[1]),e},[]):[]}function u(e){return{length:e.length,start:function(t){return e[t][0]},end:function(t){return e[t][1]}}}function l(){return u(s(p))}function d(e){return function(){function t(e){"number"==typeof e&&a&&a.length<2&&(h("timeRange: "+Math.round(a[0])+" => "+Math.round(e)),a.push(e))}function i(e){a&&2!==a.length||p.push([e])}var a=p[p.length-1];switch(e){case o.default.PLAYING:i(n());break;case o.default.PAUSE:t(n());break;case o.default.SEEKING:t(v);break;case o.default.SEEKED:i(n());break;case o.default.ENDED:t(r());break;case o.default.ERROR:t(n())}}}function c(){f(),p=[],v=n(),m=e.setInterval(function(){v=n()},1e3)}function f(){e.clearInterval(m)}if(!(0,i.isEmitter)(t))throw new Error("playerEventEmitter is not an EventEmitter");if("function"!=typeof n||"function"!=typeof r)throw new Error("position and duration are required to be functions");var h="function"==typeof a?a:function(){},p=[],v=void 0,m=void 0;return[o.default.PLAYING,o.default.PAUSE,o.default.SEEKED,o.default.SEEKING,o.default.ENDED,o.default.ERROR].forEach(function(e){return t.on(e,d(e))}),{start:c,stop:f,played:l}}},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.create=void 0;var i=n(14),a=n(4),o=r(a),s=1e3,u=3,l=4;t.create=function(e,t,n){var r=void 0,a=function(){var a=new i.Quantiles(t.duration(),l),d=0,c=!1,f=!1;e.clearTimeout(r),r=e.setTimeout(function i(){var h=Math.floor(t.position()),p=a.getIndex(h);if(!f&&h>=u){for(var v=t.played(),m=0,g=0;g<v.length;g++)m+=v.end(g)-v.start(g);n.emit(o.default.STARTED),f=!0}if(p>0&&p!==d){var y=a.getQuantile(h),b=t.played(),E=0,_=0;if(!y.sent){for(var T=0;T<b.length;T++){var S=Math.floor(b.start(T)),A=Math.floor(b.end(T));S>y.end||(_+=Math.round(Math.min(A,y.end)-S),A<y.start||(E+=Math.min(A,y.end)-Math.max(S,y.start)))}n.emit(o.default.QUANTILE,{name:y.name,quantileTime:E,totalTime:_}),y.sent=!0,d=p,d===l&&(c=!0)}}c||(r=e.setTimeout(i,s))},s)},d=function(){e.clearTimeout(r)};return{start:a,stop:d}}},function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){return(e+1)/t*100===100?"completed":(e+1)/t*100}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=t.Quantile=function(){function e(t,n,a){r(this,e);var o=Math.floor(n/a);this.name=i(t,a),this.start=o*t,this.end=t===a-1?n/100*95:o*(t+1)-1,this.sent=!1}return a(e,[{key:"offset",value:function(e){this.start+=e,this.end+=e}}]),e}(),s=t.Quantiles=function(){function e(t,n){r(this,e),this.qSize=Math.floor(t/n),this.items=[];for(var i=0;i<n;i++)this.items.push(new o(i,t,n));for(var a=Math.ceil(t)%n,s=0;s<a;s++)this.items[s].offset(1)}return a(e,[{key:"getIndex",value:function(e){return e>this.items[this.items.length-1].end?this.items.length:Math.floor(e/this.qSize)}},{key:"getQuantile",value:function(e){return this.items[this.getIndex(e)-1]}}]),e}();t.default=s},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.create=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(0),o=n(3),s=r(o),u=n(1),l=r(u),d=n(2),c=r(d);t.create=function(e,t,n,r){function o(t,n){var r=void 0;return function(){for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];var s=function(){r=null,t.apply(void 0,a)};e.clearTimeout(r),r=e.setTimeout(s,n)}}function u(e){k=/\/live\//i.test(e.springStreamStream),w=e,f(),h(),p()}function d(){v()}function f(){O&&v(),O=R=!1,t.off(l.default.PROGRAM_CHANGED,b),t.off(l.default.ENDED,m),t.off(l.default.ERROR,g)}function h(){k?t.on(l.default.PROGRAM_CHANGED,b):t.on(l.default.ENDED,m),t.on(l.default.ERROR,g),T={stream:w.springStreamStream,ct:w.springStreamContentType},(0,a.isType)(w.springStreamProgramId,"string")&&y(w.springStreamProgramId),S={getMeta:function(){return{pl:r.playerName,plv:r.playerVersion,sx:e.screen.width,sy:e.screen.height}},getDuration:function(){return k?0:Math.round(t.duration())},getPosition:function(){return t.position()}},A=new n(w.springStreamSite||"test")}function p(){R||(E("start tracking id:"+T.cq+" stream:"+T.stream),L=A.track("nrk",i({},T),S),O=!0)}function v(){L&&O&&(E("stop tracking"),L.stop(),O=!1)}function m(){v()}function g(){R=!0,v()}function y(e){var t=T.cq;return e?T.cq=e.toUpperCase():delete T.cq,t!==T.cq}function b(e){y(e)&&D()}if(!(0,a.isType)(r.playerName,"string")||!(0,a.isType)(r.playerVersion,"string"))throw new Error("playerName and playerVersion must be defined");var E=(0,s.default)(r,c.default.SCORES),_=r.debounceRestartTime||25,T=void 0,S=void 0,A=void 0,L=void 0,R=void 0,O=void 0,k=void 0,w=void 0,D=o(function(){v(),p()},1e3*_);return{start:u,stop:d}}},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){if(!(0,f.isValid)(e))throw new Error("global is null or undefined");if(!(0,f.isValid)(t))throw new Error("emitter is null or undefined");if(!(0,f.isValid)(n))throw new Error("adapter is null or undefined");if(!(0,f.isEmitter)(t))throw new Error("emitter is not an EventEmitter");if(!(0,f.isType)(n.getConfig,"function"))throw new Error("adapter.getConfig is not a function");if(!(0,f.isType)(n.getPosition,"function"))throw new Error("adapter.getPosition is not a function");if(!(0,f.isType)(n.getDuration,"function"))throw new Error("adapter.getDuration is not a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(7),s=r(o),u=n(8),l=r(u),d=n(6),c=r(d),f=n(0),h=n(2),p=r(h);t.default=function(e,t,n){i(e,t,n);var r={getDuration:n.getDuration,getPosition:n.getPosition},o=a({},r,{getConfig:function(){return n.getConfig(p.default.GA)}}),u=a({},r,{getConfig:function(){return n.getConfig(p.default.SCORES)}}),d=a({},r,{getConfig:function(){return n.getConfig(p.default.AKAMAI)}}),f=(0,s.default)(e,t,o),h=(0,l.default)(e,t,u),v=(0,c.default)(e,t,d),m=[f,h,v],g=function(){m.forEach(function(e){return e.stop()})};return{google:f,scores:h,akamai:v,stop:g}}},,,,,,,function(e,t,n){e.exports=n(16)}])})}).call(t,n(24)(e))},function(e,t,n){var r,i,a;(function(e){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(o,s){if("object"===n(t)&&"object"===n(e))e.exports=s();else{i=[],r=s,a="function"==typeof r?r.apply(t,i):r,!(void 0!==a&&(e.exports=a))}}(void 0,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=27)}({2:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default={AKAMAI:"akamai",SCORES:"scores",GA:"ga"}},27:function(e,t,n){e.exports=n(2)}})})}).call(t,n(24)(e))},function(e,t,n){!function(t,n){e.exports=n()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=29)}({20:function(e,t){function n(e){function t(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function n(){return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}function r(e,t){if(null!=e&&""!=e){var n=/(\w+):\/\/([^\/:]+):?([^\/]+)?(\/[^#?]*)#?([^?]+)?\??(.+)?/;try{var r=n.exec(e);t.protocol=r[1],t.hostName=r[2],t.port=r[3]?r[3]:"80",t.path=r[4];var i=t.path.split("/"),a=i.length;t.streamName=i[a-1];var o=t.streamName.toLowerCase();o.indexOf(".m3u")==-1&&o.indexOf("manifest")==-1&&o.indexOf(".f4m")==-1&&o.indexOf(".mpd")==-1||a>=3&&(t.streamName=i[a-2]+"/"+i[a-1]),t.hash=r[5]?r[5]:"",t.search=r[6]?r[6]:"",t.host=t.hostName+":"+t.port}catch(e){ke("Exception,  parseStreamUrl :"+e)}}}function i(e,t){var n;return n=null!=e?e:(new Date).getTime()}function a(){this.aisRetries=0,this.aisRequestLimit=3,this.aisRequestInterval=3e4,this.requestFailed=!1}function o(){var e=!1;try{if(window!==window.parent){var t={},n={},i=document.URL,a=null;document&&document.referrer&&(a=document.referrer),null!=i&&r(i,t),null!=a&&r(a,n),t.port===n.port&&t.protocol===n.protocol&&t.hostName===n.hostName&&(e=!0)}else e=!0}catch(e){}return e}function s(){var e=!1;try{var t=document.URL,n=/(\w+):\/\/([^\/:]+):?([^\/]+)?(\/[^#?]*)#?([^?]+)?\??(.+)?/,r=n.exec(t),i=r[1];"https"==i&&(e=!0)}catch(e){}return e}function u(){if(!Vn.windowOpened&&(1==Vn.pageURLCsmaDebug||1==Vn.configURLCsmaDebug||1==Vn.configDebug)){if("function"==typeof AkamaiAnalytics_debugWindow_available&&"1"==AkamaiAnalytics_debugWindow_available())return;var e="JS -"+en;"pluginVersion"in ln&&(e=e+":"+ln.pluginVersion);s()?(ct("https://79423.analytics.edgekey.net/csma/debug/DebugWindow.js","AkamaiAnalytics_debug"),v(f,"https://79423.analytics.edgekey.net/plugins/release-details/latest/html5.xml",!1,!0)):(ct("http://79423.analytics.edgesuite.net/csma/debug/DebugWindow.js","AkamaiAnalytics_debug"),v(f,"http://79423.analytics.edgesuite.net/plugins/release-details/latest/html5.xml",!1,!0)),Vn.windowOpened=!0,l()}}function l(){try{var e=yn.url.toLowerCase(),t="";e.indexOf(".edgesuite.net/")==-1&&e.indexOf(".edgekey.net/")==-1&&(t="Incorrect Beacon XML Path",t+="<ul style='list-style-type:circle;margin:0'>",t+="<li>We have identified that the Beacon XML in not loaded from an Akamai Domain.</li>",t+="<li>Kindly use the same Beacon XML path that is provided in SOLA Anlaytics UI while provisioning.</li></ul>",ke(t,"ERROR"))}catch(e){}}function d(){try{var e=On.beaconUrl.toLowerCase(),t="";e.indexOf(".edgesuite.net/")==-1&&e.indexOf(".edgekey.net/")==-1&&(t="Beacons sent to incorrect domain : "+e,t+="<ul style='list-style-type:circle;margin:0'>",t+="<li>We have identified that the beacons are not sent to an Akamai Domain.</li>",t+="<li>Kindly use the proper Beacon XML path that is provided in SOLA Anlaytics UI while provisioning.</li></ul>",ke(t,"ERROR"))}catch(e){}}function c(){try{var e="";for(var t in fn)fn[t]&&(t in un||(e?e+=", "+t:e=t));e&&(e="Following dimensons have not being set : "+e,e+="<ul style='list-style-type:circle;margin:0'>",e+="<li>Please refer 'Set Custom Data' section in Integration guide for more details.</li></ul>",ke(e,"INTEGRATION"))}catch(e){}}function f(e){try{var t=e.readyState,n=e.status;if(4==t&&200==n){var r=e.responseXML;if(r){var i;if(i=r.documentElement?r.documentElement:r){var a=document.getElementsByTagName("script"),o=0,s=!1,u="";if("undefined"!=typeof akamaiBCVideoObject)Qn&&(s=!0,u=Qn);else if(nn)s=h(nn),u=nn;else if(a.length)for(o=0;o<a.length;o++)if(null!=a[o].src){var l=a[o].src;if(s=h(l)){u=l;break}}var d="";if(d="undefined"!=typeof akamaiBCVideoObject?i.getElementsByTagName("brightcove")[0]:i.getElementsByTagName("plugin")[0]){var c=d.getAttribute("name"),f=d.getAttribute("version"),v=(d.getAttribute("link"),d.getAttribute("size"),d.getAttribute("date")),m="";ke("Integration Type : "+c,"INTEGRATION"),s?ke("Plugin path is correct ["+u+"]","INTEGRATION"):(m="Incorrect Plugin Path",m+="<ul style='list-style-type:circle;margin:0'>",m+="<li>Kindly refer the Integration Guide and use the correct plugin path for integration</li>",m+="<li>The plugin path should be one of the below :</li>","undefined"!=typeof akamaiBCVideoObject?(m+="<ul><li>http://79423.analytics.edgesuite.net/html5/brightcoveAkamaihtml5-min.js</li>",m+="<li>https://79423.analytics.edgekey.net/html5/brightcoveAkamaihtml5-min.js</li></ul>"):(m+="<ul><li>http://79423.analytics.edgekey.net/html5/akamaihtml5-min.js</li>",m+="<li>http://79423.analytics.edgekey.net/js/csma.js</li></ul>"),m+="</ul>",ke(m,"ERROR"));var g=p(en,f);g>=0?ke("Plugin is Latest (Version = "+en+" )","INTEGRATION"):(m="Old Plugin Version",m+="<ul style='list-style-type:circle;margin:0'>",m+="<li>Current Plugin Version is "+en+"</li>",m+="<li>The latest plugin version in "+f+" which was released on date "+v+"</li>",m+="<li>Kindly check if proper path mentioned in integration guide is used for integration</li>",m+="<li>If proper path is used, try by clearing browser cache.</li>",ke(m,"ERROR"))}}}}}catch(e){}}function h(e){return!(e.indexOf("79423.analytics.edgesuite.net")==-1&&e.indexOf("79423.analytics.edgekey.net")==-1||e.indexOf("/html5/akamaihtml5-min.js")==-1&&e.indexOf("/js/csma.js")==-1&&e.indexOf("/js/brightcove-csma.js")==-1)}function p(e,t){try{var n=0;if(null!=e&&null!=t){for(var r=e.split("."),i=t.split(".");r.length>i.length;)i.push(0);for(;i.length>r.length;)r.push(0);for(var a=0;a<r.length;a++){if(parseInt(r[a])>parseInt(i[a])){n=1;break}if(parseInt(r[a])<parseInt(i[a])){n=-1;break}}}}catch(e){}return n}function v(e,t,n,r){gn||m(e,t,n,r)}function m(e,t,n,r){e&&ke("XML Request: isXDomainRequest = "+sn+":::funcCallback =  :url: "+t);var i;if(null!=t&&"undefined"!=t&&""!=t)try{if(sn){i=new XDomainRequest,e&&(i.onprogress=function(){},i.ontimeout=function(){},i.onload=function(){if(ke("XML Request : xmlClient.onload"),window.DOMParser){var t=new DOMParser,n=t.parseFromString(i.responseText,"text/xml"),r={};r.status="200",r.readyState="4",r.responseXML=n,r.responseText=i.responseText,e(r)}else{var n=new ActiveXObject("Microsoft.XMLDOM");n.async=!1,n.loadXML(i.responseText);var r={};r.status="200",r.readyState="4",r.responseXML=n,e(r)}},i.onerror=function(e){ke("XML Request : Error, loading xml. url = :"+t),t.indexOf("serverIp")!=-1&&(Cn=!0),t.indexOf("protocol-info")!=-1&&(Nn.fastTCPFailed=!0)}),i.open("GET",t,!n);try{r?setTimeout(function(){i.send()},100):i.send(null)}catch(e){try{i.send(null)}catch(e){}}}else i=new XMLHttpRequest,i.open("GET",t,!n),e&&(i.overrideMimeType&&i.overrideMimeType("text/xml"),i.onreadystatechange=function(){ke("XML Request : xmlClient.onreadystatechange"),e(i)}),i.send(null)}catch(e){ke("Exception,  XML Request for url :"+t+",Exception:"+e)}}function g(e){var t=e.readyState,n=e.status;ke("readConfig: readyState = "+t+":::status = "+n);try{if(4==t&&200==n){$t();var r=e.responseXML;if(r){var i;i=r.documentElement?r.documentElement:r;for(var a=i.getElementsByTagName("dataMetrics"),o=0;o<a.length;++o){var s=a[o],l=s.parentNode,c=l.nodeName;An[o]=c;var f=Sn[c]=[],h=l.getAttribute("eventCode");h&&(Dn[c]=h);for(var p=s.getElementsByTagName("data"),v=0;v<p.length;++v){var m=p[v];c=m.getAttribute("name");var g=m.getAttribute("key");h=m.getAttribute("value");var S=m.getAttribute("sendOnce"),A=m.getAttribute("fallback"),L=m.getAttribute("size"),R=m.getAttribute("regExpJS"),O=m.getAttribute("expiry"),k={};k.name=c,k.key=g,c in fn?fn[c]=!0:g.indexOf("_cd_")!=-1&&(fn[c]=!0),h&&(k.value=h),S&&(k.isSent=!1,k.sendOnce=S),A&&(k.fallback=A),L&&(k.size=L),R&&(k.regExpJS=R),O&&(k.expiryDuration=parseInt(parseInt(O)/1440)),f.push(k)}}Vn.configDebug=parseInt(i.getAttribute("debug")),1!=Vn.configDebug&&(Vn.configDebug=0),1==Vn.configDebug&&u(),i.getElementsByTagName("isActive")[0]&&i.getElementsByTagName("isActive")[0].childNodes[0]&&(Un=i.getElementsByTagName("isActive")[0].childNodes[0].nodeValue),Ln.beaconId=i.getElementsByTagName("beaconId")[0].childNodes[0].nodeValue,Ln.beaconVersion=i.getElementsByTagName("beaconVersion")[0].childNodes[0].nodeValue;var w=i.getElementsByTagName("logTo")[0];On.logType=w.getAttribute("logType"),On.logType||(On.logType="relative"),On.logInterval=1e3*w.getAttribute("logInterval"),On.logInterval||(On.loginterval=3e5),On.heartBeatInterval=1e3*w.getAttribute("heartBeatInterval"),On.heartBeatInterval||(On.heartBeatInterval=6e4),On.secondaryLogTime=1e3*w.getAttribute("secondaryLogTime"),On.secondaryLogTime||(On.secondaryLogTime=15e3),On.isSessionWithRebufferLimit=w.getAttribute("isSessionWithRebufferLimit"),On.isSessionWithRebufferLimit||(On.isSessionWithRebufferLimit=500),On.fastTCPEnabled=w.getAttribute("fastTCPEnabled"),On.fastTCPEnabled||(On.fastTCPEnabled=0),1==On.fastTCPEnabled&&(Nn.fastTCPEnabled=!0),On.aisRequestLimit=w.getAttribute("aisRequestLimit"),On.aisRequestLimit||(On.aisRequestLimit=3),Kn&&(Kn.aisRequestLimit=On.aisRequestLimit),On.aisRequestInterval=1e3*w.getAttribute("aisRequestInterval"),On.aisRequestInterval||(On.aisRequestInterval=3e4),Kn&&(Kn.aisRequestInterval=On.aisRequestInterval),On.startupTimeOutlierLimit=1e3*w.getAttribute("startupTimeOutlierLimit"),On.startupTimeOutlierLimit||(On.startupTimeOutlierLimit=6e5),On.visitTimeout=60*w.getAttribute("visitTimeout")*1e3,On.visitTimeout||(On.visitTimeout=36e5),On.urlParamSeparator=w.getAttribute("urlParamSeparator"),On.urlParamSeparator||(On.urlParamSeparator="~"),On.encodedParamSeparator=w.getAttribute("encodedParamSeparator"),On.encodedParamSeparator||(On.encodedParamSeparator="*@*"),On.initBrowserCloseTime=w.getAttribute("initBrowserCloseTime"),On.initBrowserCloseTime||(On.initBrowserCloseTime=9e5),On.seekThreshold=1e3*w.getAttribute("seekThreshold"),On.seekThreshold||(On.seekThreshold=2e3);var D=w.getAttribute("delayTimer");D&&(Tn.time=D);var P=w.getAttribute("disableDelay");1==P&&(Tn.enabled=!1);var I=w.getElementsByTagName("host")[0].childNodes;if(I.length>1){On.beaconUrl="";for(var v=0;v<I.length;v++)On.beaconUrl+=I[v].nodeValue}else On.beaconUrl=w.getElementsByTagName("host")[0].childNodes[0].nodeValue;On.beaconUrl.indexOf("http://")==-1&&On.beaconUrl.indexOf("https://")==-1&&(On.beaconUrl="http://"+On.beaconUrl),On.beaconUrl+=w.getElementsByTagName("path")[0].childNodes[0].nodeValue,On.maxLogLineLength=w.getAttribute("maxLogLineLength"),On.maxLogLineLength||(On.maxLogLineLength=2048),On.maxLogLineLength-=On.beaconUrl.length,On.logVersion="2.0",On.formatVersion="1.1",w.getElementsByTagName("formatVersion")&&w.getElementsByTagName("formatVersion")[0]&&w.getElementsByTagName("formatVersion")[0].childNodes[0]&&(On.formatVersion=w.getElementsByTagName("formatVersion")[0].childNodes[0].nodeValue),On.useKey=parseInt(i.getElementsByTagName("statistics")[0].getAttribute("useKey"));var x=i.getElementsByTagName("feedback")[0];null!=x&&""!==x&&(Bn.shouldSendFLine=!0,Bn.limit=x.getAttribute("limit"),Bn.limit||(Bn.limit=3),Bn.socialShareLimit=x.getAttribute("socialShareLimit"),Bn.socialShareLimit||(Bn.socialShareLimit=1));var C=i.getElementsByTagName("security")[0];if(null!=C&&""!==C){var M=C.getElementsByTagName("ViewerDiagnostics")[0];if(null!=M&&""!==M){kn.viewerDiagnostics={};var N=M.getElementsByTagName("salt")[0];if(null!=N&&""!==N){kn.viewerDiagnostics.salt={};var F=N.getAttribute("value"),B=N.getAttribute("version");null!=F&&""!==F?(kn.viewerDiagnostics.salt.value=F,kn.viewerDiagnosticsEnabled=!0,null!=B&&""!==B&&(kn.viewerDiagnostics.salt.version=B),kn.viewerDiagnostics.salt.bytes=2*N.getAttribute("bytes"),kn.viewerDiagnostics.salt.bytes||(kn.viewerDiagnostics.salt.bytes=32),kn.viewerDiagnostics.salt.iterations=N.getAttribute("iterations"),kn.viewerDiagnostics.salt.iterations||(kn.viewerDiagnostics.salt.iterations=50)):kn.viewerDiagnosticsEnabled=!1}}}var U=i.getElementsByTagName("bucketInfo")[0];wn.bucketLength=U.getElementsByTagName("bucketLength")[0].childNodes[0].nodeValue,wn.bucketCount=U.getElementsByTagName("bucketCount")[0].childNodes[0].nodeValue,En=!0;for(var j in un)try{"_cd_"==j.substring(0,4)&&y(j)}catch(e){}b(),De(),d();for(var G=i.getElementsByTagName("match"),v=0;v<G.length;v++){match=G[v];try{parentKey=match.parentNode.parentNode.getAttribute("name"),Pn[parentKey]||(Pn[parentKey]={}),Pn[parentKey][match.getAttribute("key")]={type:match.getAttribute("type"),name:match.getAttribute("name"),value:match.getAttribute("value")}}catch(e){ke(e)}}E(),_(),T()}}}catch(e){ke("Exception,  readConfig :"+e)}}function y(e){var t=Sn.common;if(null!=t){var n={};n.name=e,n.key=e,t.push(n)}}function b(){try{for(var e=Sn.split,t=0;t<e.length;t++)Rn[e[t].name]=e[t].key}catch(e){}}function E(){var e={};try{if(Pn.bitRateBucketTimes){var t,n,r;for(r in Pn.bitRateBucketTimes)if(e=Pn.bitRateBucketTimes[r])if(e.key=r,e.value){t=e.value,n=t.split(";");for(var i=0;i<n.length;i++)n[i].indexOf("min:")!=-1?e.min=parseInt(n[i].split(":")[1]):n[i].indexOf("max:")!=-1&&(e.max=parseInt(n[i].split(":")[1]))}else e.category="first"}else Pn.bitRateBucketTimes={},e=Pn.bitRateBucketTimes,e.U={key:"U",type:"range"},e.S={key:"S",max:1500,value:"max:1500",type:"range"},e.Q={key:"Q",min:1500,max:2500,value:"min:1500;max:2500",type:"range"},e.D={key:"D",min:2500,value:"min:2500",type:"range"};Yn.bitRateBucketMap={};for(var a in Pn.bitRateBucketTimes)Yn.bitRateBucketMap[a]=0}catch(e){ke("Exception, find bit rate match rules :"+e)}}function _(){if(ke("fillVideoWithConfig function"),hn&&hn.akamai){var e=hn.akamai;e.populateMetricsFromConfiguration(),e.isSLineSent&&z(hn),kn.viewerDiagnosticsEnabled&&j(e),e.cdn=S(e)}}function T(){ke("sendStoredBeacons: number of beacons to be sent = "+_n.length);try{for(hn.akamai;_n.length>0;){var e=_n.shift();ke("readConfig: sending beacon event code = "+e.code),e.element.populateMetricsFromConfiguration(),e.element.xViewerId=Gn.xViewerId,e.element.xViewerIdVersion=Gn.xViewerIdVersion,e.element.cdn=S(e.element),me(e.element,e.code,e.synch)}}catch(e){ke("Exception,  sendStoredBeacons"+e)}}function S(e){if(un.cdn)return un.cdn;try{for(key in Pn.cdn){var t=Pn.cdn[key];if(t&&t.name&&t.value)for(var n=e[t.name],r=t.value.split(","),i=0;i<r.length;i++)if(n&&n.indexOf(r[i].trim())!=-1)return key}}catch(e){ke("Exception Get CDN"+e.message)}}function A(e){var t,n="";if(e.indexOf("://")!=-1&&(t=e.indexOf("://"),e=e.substring(t+3)),e.indexOf("/")!=-1){if(t=e.indexOf("/"),e.indexOf("?")!=-1){var r=e.indexOf("?");t=t<r?t:r}n=e.substring(0,t)}else if(e.indexOf("?")!=-1){var t=e.indexOf("?");n=e.substring(0,t)}else n=e;return n}function L(e,t,n,r){var i=e.currentState,a=e.seekObject;"S"==r&&a.seekStartStreamTime==-1?(a.seekStartEpochTime=i.timeUpdateClockTime,a.seekEndEpochTime=t,a.seekStartStreamTime=i.timeUpdateStreamTime,a.seekEndStreamTime=n):"S"==r&&a.seekEndStreamTime==i.timeUpdateStreamTime?(a.seekEndEpochTime=t,a.seekEndStreamTime=n):a.seekStartStreamTime!=-1&&(e.seekTime+=a.seekEndEpochTime-a.seekStartEpochTime,"-"!=e.seekIntervalsAsString?e.seekIntervalsAsString+=","+a.seekStartStreamTime+":"+a.seekEndStreamTime:e.seekIntervalsAsString=a.seekStartStreamTime+":"+a.seekEndStreamTime,
"-"!=e.pauseSeekSession?e.pauseSeekSession+=",S("+a.seekStartStreamTime+":"+(a.seekStartEpochTime-e.startTimer)+"-"+a.seekEndStreamTime+":"+(a.seekEndEpochTime-e.startTimer)+")":e.pauseSeekSession="S("+a.seekStartStreamTime+":"+(a.seekStartEpochTime-e.startTimer)+"-"+a.seekEndStreamTime+":"+(a.seekEndEpochTime-e.startTimer)+")",++e.seekCount,e.seekObject={seekStartEpochTime:-1,seekEndEpochTime:-1,seekStartStreamTime:-1,seekEndStreamTime:-1})}function R(e,t){ke("set RebufferSession : curTime = "+t);try{var n=Math.round(t-e.lastLogTime-e.curRebufferTime),r=Math.round(e.curRebufferTime);e.currRebufferEndEpoch=Math.round(t),e.currRebufferStartEpoch=Math.round(t-r),r>On.isSessionWithRebufferLimit&&(e.isSessionWithRebuffer=1),e.rebufferSession?e.rebufferSession=e.rebufferSession+";"+n+":"+r:e.rebufferSession=n+":"+r}catch(e){ke("Error, set RebufferSession"+e.message)}}function O(e,t){var n,r;if("B"==t){var i="";if(e.rebufferSession){for(var a=e.rebufferSession.split(";"),o=0;o<a.length;o++){var s=a[o].split(":");i+=0==o?"0:"+s[1]:a[o],o!=a.length-1&&(i+=";")}ke("newRebufferSession = "+i),e.rebufferSession=i}r=1,n=0}else r=0,n=e.lastRebufferEndEpoch>0?e.firstRebufferStartEpoch-e.lastRebufferEndEpoch:-1;e.rebufferSession=r+":"+n+";"+e.rebufferSession,e.lastRebufferEndEpoch=e.currRebufferEndEpoch}function k(e,t){var n=1;if(e.rebufferSessionH=null,e.rebufferSessionArrayHLine&&(!e.rebufferSessionArrayHLine||0!==e.rebufferSessionArrayHLine.length)){for(;e.rebufferSessionArrayHLine[n]&&t-e.rebufferSessionArrayHLine[n]>2*On.heartBeatInterval;)e.rebufferSessionArrayHLine.shift(),e.rebufferSessionArrayHLine.shift(),1==e.isSessionWithRebufferH&&(e.sendIsSessionWithRebufferH=0,e.isSessionWithRebufferH=null);for(;e.rebufferSessionArrayHLine[n];){var r=t-e.rebufferSessionArrayHLine[n-1],i=e.rebufferSessionArrayHLine[n]-e.rebufferSessionArrayHLine[n-1];1==e.sendIsSessionWithRebufferH&&i>On.isSessionWithRebufferLimit&&(e.isSessionWithRebufferH=1),e.rebufferSessionH?e.rebufferSessionH=e.rebufferSessionH+";"+r+":"+i:e.rebufferSessionH=r+":"+i,n+=2}if(n-=1,e.rebufferSessionArrayHLine[n]){var r=t-e.rebufferSessionArrayHLine[n];1==e.sendIsSessionWithRebufferH&&r>On.isSessionWithRebufferLimit&&(e.isSessionWithRebufferH=1),e.rebufferSessionH?e.rebufferSessionH=e.rebufferSessionH+";"+r+":"+r:e.rebufferSessionH=r+":"+r}}}function w(e){return un.deliveryType?un.deliveryType:e.deliveryType}function D(e){var t=e.readyState,n=e.status;if(4!==parseInt(n/100)&&0!==n||(ke("readServerIp: serverIpFailed request falied as status is ,in 400 series"),Cn=!0),4==t&&200==n){var r=e.responseXML;if(r){var i;i=r.documentElement?r.documentElement:r,Mn?xn.serverip=i.getElementsByTagName("ip")[0].childNodes[0].nodeValue:xn.serverip=i.getElementsByTagName("serverip")[0].childNodes[0].nodeValue,ke("readServerIp : diagnostics.serverip =  "+xn.serverip)}}}function P(e){var t=e.akamai;if(Cn)return void ke("getting ServerIp : serverIp request failed");if(t.hostName)try{var n=null;t.protocol&&(t.protocol.indexOf("rtmp")!=-1?(n="http://"+t.hostName+"/fcs/ident",Mn=!0):n=t.protocol+"://"+t.hostName+"/serverip",ke("getting ServerIp : serverIpPath = "+n),v(D,n,!1,!0))}catch(e){Cn=!0,ke("getting ServerIp: error, xmphttprequest")}}function I(e){var t="",n=e.readyState,r=e.status;4!==parseInt(r/100)&&0!==r||(ke("read fast tcp: fast tcp Failed request falied as status is 400 series"),Nn.fastTCPFailed=!0);try{if(4==n&&200==r){var i=e.responseXML;if(i){ke("populating fast tcp");var a;if(a=i.documentElement?i.documentElement:i,a&&a.firstElementChild){var o=a.firstElementChild,s="",u="";if(o)for(o.hasAttribute("key")&&(u=o.getAttribute("key"),s=o.childNodes[0].nodeValue,t=u+":"+s);o.nextElementSibling;)o=o.nextElementSibling,o.hasAttribute("key")&&(u=o.getAttribute("key"),s=o.childNodes[0].nodeValue,t?t+=","+u+":"+s:t=u+":"+s)}}}t&&(Nn.ftcp=t)}catch(e){ke("Exception,  read fast tcp"+e)}}function x(e){var t=e.akamai;if(Nn.fastTCPFailed)return void ke("getting fast tcp: request failed");if(t.hostName)try{var n=t.protocol+"://"+t.hostName+"/protocol-info";ke("getting fast tcp : fastTCPPath = "+n),v(I,n,!1,!0)}catch(e){Nn.fastTCPFailed=!0,ke("getting ServerIp: error, xmphttprequest")}}function C(e,t){try{var n=e.akamai;On&&On.logInterval&&!t&&(n.fastTCPServerIpTimer=W(C,On.logInterval,[e])),Cn||P(e),!Nn.fastTCPFailed&&Nn.fastTCPEnabled&&x(e),Cn&&Nn.fastTCPFailed&&Y(n.fastTCPServerIpTimer)}catch(e){ke("Exception get fast tcp server ip")}}function M(e){var t=null;return t=e.objectBased?e.errorReason?e.errorReason:cr[0]:e.error&&e.error.code?cr[e.error.code]:cr[0]}function N(e){var t="Play.End.Detected";return e.objectBased&&e.endReason&&(t=e.endReason),t}function F(){Gn.viewerId=un.viewerId?un.viewerId:null,Gn.viewerDiagnosticsId=un.viewerDiagnosticsId?un.viewerDiagnosticsId:un.viewerId?un.viewerId:null}function B(e){var t=n();return t}function U(e){var t=Gn.viewerId;if("-"!=t){if(!t)try{if(window&&window.localStorage&&window.localStorage.getItem("akamai_clientId"))t=window.localStorage.getItem("akamai_clientId");else if(Kt("HTML_ViewerId"))t=Kt("HTML_ViewerId");else try{t=n(),window&&window.localStorage&&window.localStorage.setItem("akamai_clientId",t);try{Yt("HTML_ViewerId",t)}catch(e){}}catch(e){ke("window.localStorage Exception :"+e)}}catch(e){ke("Exception,  getting viewerId"+e),t=n()}return t}}function j(e,t){var n=null;Gn&&Gn.viewerDiagnosticsId&&(n=Gn.viewerDiagnosticsId);var r="",i=50,a=32;if(n&&"-"!=n&&(!t||!e.xViewerId)){G(e),ke("get Viewer DiagnosticsID"),n=encodeURIComponent(n),kn&&kn.viewerDiagnostics&&kn.viewerDiagnostics.salt&&kn.viewerDiagnostics.salt.value&&(r=kn.viewerDiagnostics.salt.value),kn&&kn.viewerDiagnostics&&kn.viewerDiagnostics.salt&&kn.viewerDiagnostics.salt.iterations&&(i=kn.viewerDiagnostics.salt.iterations),kn&&kn.viewerDiagnostics&&kn.viewerDiagnostics.salt&&kn.viewerDiagnostics.salt.bytes&&(a=kn.viewerDiagnostics.salt.bytes);var o=on.PBKDF2(n,r,{keySize:a/8,iterations:i});e.xViewerId=o,Gn.xViewerId=o}}function G(e){var t=null;kn&&kn.viewerDiagnostics&&kn.viewerDiagnostics.salt&&kn.viewerDiagnostics.salt.version&&(t=kn.viewerDiagnostics.salt.version),e.xViewerIdVersion=t,Gn.xViewerIdVersion=t}function H(e,t,n){var r;"viewerId"!=t&&"clientId"!=t&&"viewerDiagnosticsId"!=t&&(n&&(un[n]?r=un[n]:e[n]&&(r=e[n])),e[t]=r)}function V(e,t,n){null==n&&(n="");try{if(""==t||null==t)return;e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var r=new RegExp("[\\?&]"+e+"=([^&#]*)"),i=r.exec(t);return null==i?n:i[1]}catch(e){return ke("Exception,  getValueFromQueryString :"+e),n}}function K(e){var t=e.akamai;Y(t.fastTCPServerIpTimer),an&&C(e)}function W(e,t,n){try{var r=null;return r=setTimeout(function(){e.apply(void 0,n)},t)}catch(i){ke("Exception, set window timeout:"+i);try{r=window.setTimeout(function(){e.apply(void 0,n)},t)}catch(e){return null}return r}}function Y(e){try{clearTimeout(e)}catch(t){ke("Exception clear window timeout:"+t);try{window.clearTimeout(e)}catch(e){}}}function z(e){ke("startBeaconTImer");var t=e.akamai;t.areTimerStarted||(ke("startBeaconTimer: starting beacon timer"),t.firstPLineTimer=W(Z,On.secondaryLogTime,[e]),t.hLineTimer=W(te,On.heartBeatInterval,[e]),t.fastTCPServerIpTimer=W(K,On.logInterval-5e3,[e]),e.objectBased&&(In=500),t.pollingTimer=W(ht,In,[e]),t.areTimerStarted=!0)}function q(e){var t=e.akamai;t&&(t.hLineTimer&&Y(t.hLineTimer),t.pollingTimer&&Y(t.pollingTimer),t.fastTCPServerIpTimer&&Y(t.fastTCPServerIpTimer),t.firstPLineTimer&&Y(t.firstPLineTimer),Kn&&Kn.retryTimer&&Y(Kn.retryTimer))}function X(e){var t=e.akamai;Bn.akamai={},Bn.dataSent={},t.areTimerStarted=!1,t.isCLineSent=!1,t.isELineSent=!1,t.lastRebufferEndEpoch=0,t.connectTime=0,Tn.browserClose=!1,t.totalPlayClockTime=t.totalStreamTime=t.totalRebufferCount=t.totalRebufferTime=0,t.isVisitEnd=0,t.sequenceId="0",bt(e),t.attemptId=t.sessionId=B(t),F(),t.clientId=t.viewerId=U(t),Yt("HTML_ViewerId",t.clientId,395),kn.viewerDiagnosticsEnabled&&j(t),t.lastPLineSentTime=t.hLineSentCount=t.lastSLineSentTime=t.lastHLineSentTime=0,t.lastHTime=0,Wt("HTML_LastCLineTime"),ur=[0,0,0,0,0,0,0,0,0,0,0,0];var r=parseInt(Kt("HTML_VisitCountCookie"));r&&""!=r||(t.isVisitStart=1,r=0,Yt("HTML_VisitCountCookie",r));var i=parseInt(Kt("HTML_isPlayingCount"));i&&""!=i||(i=0,Yt("HTML_isPlayingCount",i));var a=Kt("HTML_VisitValueCookie");a&&""!=a||Yt("HTML_VisitValueCookie","0|0|0|0|0|0|0|0|0|0|0|0|0");var o=Kt("HTML_BitRateBucketCsv");o&&""!=o||Yt("HTML_BitRateBucketCsv","0,0,0,0,0,0,0,0");var s=Kt(Zn);s&&""!=s?t.browserSessionId=t.visitId=Kt(Zn):(t.browserSessionId=t.visitId=n(),Yt(Zn,t.visitId))}function $(e,t){var n=e.akamai;if(n.isILineSent=!0,++n.iLineCount,n.lastSLineSentTime=t,1==n.iLineCount){var r=parseInt(Kt("HTML_VisitCountCookie"));++r,Yt("HTML_VisitCountCookie",r),or=t}var i=parseInt(Kt("HTML_VisitIntervalStartTime"));i&&" "!=i||(i=t,Yt("HTML_VisitIntervalStartTime",i)),ur[0]=1,n.sendVLine=!0}function Q(e,t){try{var n=hn.akamai;if(n.clearVisitTimeoutId&&Y(n.clearVisitTimeoutId),X(hn),n.logInterval="0",En)me(n,"init",e);else{var r=Oe(n),i={element:r,code:"init",synch:e};_n.push(i)}n.lastLogTime=t,++n.sequenceId,$(hn,t),n.currentState.state=sr.init,ke(": sendBeaconILineAd : Setting state to init"),n.currentState.timeUpdateClockTime=t,n.startTimer=t}catch(e){ke("Exception, send I line AD:"+e)}}function Z(e){var t=i(),n=e.akamai;n.lastPLineSentTime=t,Re(e,"playing",!1,t)}function J(e,t,n,i){try{ke("start of the session function");var a=e.akamai;if(!a||!a.firstTimePlay)return;a.adLoadTime&&a.adLoadTime>a.iLineSentTime?(a.startupTime=a.adLoadTime-a.iLineSentTime,a.adEndTime&&(a.startupTime+=n-a.adEndTime)):a.startupTime=n-a.iLineSentTime,a.startupTime>On.startupTimeOutlierLimit&&(a.outlierStartupTime=a.startupTime,a.startupTime=0),a.bufferingTime=a.startupTime;({type:"startup",startTime:0,endTime:a.startupTime});bt(e);var o=gt(e);r(o,a),a.streamUrl=o,null!=o&&o.indexOf("?")!=-1&&(o=o.substring(0,o.indexOf("?"))),null!=o&&""!=o&&(/.m3u8$/.exec(o)?(a.format="L",a.playerFormat=a.playerType+":"+a.format):(a.format="P",a.playerFormat=a.playerType+":"+a.format,a.deliveryType="O"),console.log("Creating hls stream"),a.stream=new $n),a.streamLength=parseInt(mt(e)),a.played=[];var s=parseInt(Kt("HTML_isPlayingCount"));s+=1,Yt("HTML_isPlayingCount",s),F(),kn.viewerDiagnosticsEnabled&&j(a,!0),a.lastSLineSentTime=n,Re(e,"playStart",!1,n),a.rebufferSessionArrayHLine=[],a.isSLineSent=!0,En&&z(e),ur[1]=1,a.isFirstTitle=null,a.isVisitStart=null,a.firstTimePlay=!1,a.initPlayed(i)}catch(e){ke("Exception, send S line:"+e)}}function ee(e,t,n){try{ke("send beacon I line");var r=e.akamai;r.cdn=S(r),an&&C(e,!0),r.iLineSentTime||(r.iLineSentTime=n),e.videoWidth&&e.videoHeight&&(r.videoSize=e.videoWidth+"x"+e.videoHeight),r.isILineSent||(X(e),Re(e,"init",t,n),$(e,n),r.clearVisitTimeoutId&&Y(r.clearVisitTimeoutId))}catch(e){ke("Exception send I line:"+e)}}function te(e){var t=e.akamai;t.hLineTimer=W(te,On.heartBeatInterval,[e]);var n=i();Re(e,"heartBeat",!1,n),t.lastHLineSentTime=n,t.hLineSentCount++,t.hLineSentCount%(On.logInterval/On.heartBeatInterval)==0&&(Re(e,"playing",!1,n),t.lastPLineSentTime=n)}function ne(e,t,n,r){try{ke("sendBeaconCLine : endReasonCode = "+t);var i=e.akamai;i.endReasonCode=t,Re(e,"complete",n,r);var a=parseInt(Kt("HTML_isPlayingCount"));a-=1,Yt("HTML_isPlayingCount",a),i.isVisitStart=null,i.isCLineSent=!0,i.firstTimePlay=!0,q(e);var o=r;Yt("HTML_LastCLineTime",o)}catch(e){ke("Exception, send beacon C Line:"+e)}}function re(e,t,n,r){try{var i=e.akamai;if(t?i.errorCode=t:i.errorCode="UNKNOWN",ke("sendBeaconELine : errorCode = "+i.errorCode),ur[3]=1,1==i.sequenceId&&(ur[11]=1,F(),kn.viewerDiagnosticsEnabled&&j(i,!0)),i.playerState="E",Re(e,"error",n,r),i.isSLineSent){var a=parseInt(Kt("HTML_isPlayingCount"));a-=1,Yt("HTML_isPlayingCount",a)}i.isELineSent=!0,i.isVisitStart=null,i.firstTimePlay=!0,q(e);var o=r;ge(i),Yt("HTML_LastCLineTime",o)}catch(e){ke("Exception, send beacon E line:"+e)}}function ie(e,t){try{ke("sendBeaconVLine");var n=e.akamai;n.isVisitEnd=1,ue(n);var r=parseInt(Kt("HTML_VisitIntervalStartTime"));n.visitMaxPersistentBitRateBucket=le(),n.visitInterval=t-r,(""==r||null==r||isNaN(r))&&(n.visitInterval=t-or),n.sessionId=null,n.attemptId=null,n.sequenceId=null,Wt("HTML_BitRateBucketCsv"),Wt("HTML_VisitValueCookie"),Wt("HTML_VisitIntervalStartTime"),Wt("HTML_LastCLineTime"),Wt("HTML_VisitCountCookie"),Wt("HTML_isPlayingCount"),Wt(Zn),Re(e,"visit",!0,t),Bn.akamai={},Bn.dataSent={},ke("sendBeaconVLine: beacon sent"),n.sendVLine=!1,n.iLineCount=0,Y(e.akamai.clearVisitTimeoutId);var i=n.isPlaylist;e.akamai=new Ne(hn),"undefined"!=typeof akamaiBCVideoObject&&(e.akamai.isPlaylist=i)}catch(e){ke("Exception, send beacon V line:"+e)}}function ae(){for(var e=Kt("HTML_VisitValueCookie"),t=e.split("|"),n=0;n<ur.length;n++)lr[n]+=ur[n];ke("setVisitValueCookie :: visit values saved"+lr);for(var r=0;r<t.length;r++)t[r]=parseInt(t[r])+ur[r];var i=t.join("|");Yt("HTML_VisitValueCookie",i)}function oe(){try{var e=Kt("HTML_BitRateBucketCsv"),t=dr.split(","),n=e.split(","),r=0;for(var i in Yn.bitRatePlayTime)i=parseInt(i),r=parseInt((i-1)/5e5),r>7&&(r=7),n[r]=parseInt(n[r])+Yn.bitRatePlayTime[i],t[r]=parseInt(t[r])+Yn.bitRatePlayTime[i];e=n.join(","),Yt("HTML_BitRateBucketCsv",e),dr=t.join(",")}catch(e){ke("Exception set bit rate bucketcsv"+e)}}function se(e){ke("entered setVisitValueParameters"),ur[4]=e.totalPlayClockTime,ur[5]=e.totalPlayStreamTime,ur[6]=e.totalRebufferCount,ur[7]=e.totalRebufferTime,ur[8]=e.totalAdPlayClockTime,ur[9]=e.totalAdStartCount,ur[10]=e.totalAdAbandonCount,e.totalPlayClockTime>5e3&&(ur[2]=1),oe(),ae()}function ue(e){try{var t=Kt("HTML_VisitValueCookie"),n=t.split("|"),r=!0;""!=n&&null!=n||(r=!1);var i=[];i=r?n:lr;for(var a=["visitAttempts","visitPlays","visitViews","visitErrors","visitPlayClockTime","visitPlayStreamTime","visitRebufferCount","visitRebufferTime","visitAdPlayClockTime","visitAdStartCount","visitAdAbandonCount","visitStartupErrors"],o=0;o<a.length;o++)e[a[o]]=i[o]}catch(e){ke("Exception get visit value  cookie : "+e)}}function le(){try{var e=Kt("HTML_BitRateBucketCsv"),t=e.split(","),n=!1;null!=t&&""!=t||(t=dr.split(",")),t[0]=parseInt(t[0]);for(var r="00",i=t[0],a=0;a<t.length;a++)t[a]=parseInt(t[a]),t[a]>0&&(n=!0),i<t[a]&&(i=t[a],r="0"+a);if(n)return r}catch(e){ke("Exception, get visit max bit rate bucket"+e)}}function de(e){try{var t=encodeURI(e);return t=t.replace(/#/g,"%23")}catch(t){return ke("Exception,  encoding beacon"),e}}function ce(){try{if(ke("send delayed beacon"),Tn.queue&&Tn.queue.length>0){var e=Tn.queue.shift();Tn.timer=W(ce,Tn.time,[]),ke("sending delayed beacon ::"+e.url,"BEACON"),v(null,e.url,e.isSync)}else ke("send delayed beacon : clear the timer"),Y(Tn.timer),Tn.timer=null}catch(e){}}function fe(e,t,n){if(0==Un)return void ke("put beacon On Wire, dont send beacon isACtive is zero");var r=On.beaconUrl+"?"+e;try{if(Tn.enabled){var i={};if(Tn.browserClose){if(Tn.timer&&Y(Tn.timer),Tn.queue&&Tn.queue.length>0)for(;Tn.queue.length>0;)i=Tn.queue.shift(),ke("put beacon on wire, send beacon from queue::"+i.url,"BEACON"),v(null,i.url,i.isSync);ke("put beacon on wire browser close::"+r,"BEACON"),v(null,r,t)}else ke("put beacon on wire pushing beacon in queue::"+r),i.url=r,i.isSync=t,Tn.queue.push(i),Tn.timer?ke("put beacon on wire: timer is running"):(ke("put beacon on wire: call send delayed beacon"),ce())}else ke("put beacon on wire"+r,"BEACON"),v(null,r,t)}catch(e){ke("failed to send beacon"),ke(e)}}function he(e,t){try{return e=e.substring(0,t)}catch(t){return ke("Exception,  getTruncatedMetric"+t),e}}function pe(e,t,n,r){try{for(var i,a=0;a<t.length;a++){t[a].expiryDuration&&zt(e,t[a]),i=t[a].name;var o=null;i in e&&(o=e[i]),t[a].value&&(o=t[a].value),(o||0==o)&&(t[a].sendOnce?t[a].isSent===!1&&(0!=o&&(t[a].isSent=!0),ve(o,t,i,a,r,n)):ve(o,t,i,a,r,n))}}catch(e){ke("Exception, assemble logs:"+e)}}function ve(e,t,n,r,i,a){try{if(t[r].regExpJS){var o=new RegExp(t[r].regExpJS),s=o.exec(e);s&&(e=s[s.length-1])}}catch(e){ke("Exception,  evaluating regExpJS attribute for metric : "+n)}e=String(e).replace(/~/g,On.encodedParamSeparator),t[r].size&&(e=he(e,t[r].size)),t[r].key in i||(i[t[r].key]=t[r].key,a.push((On.useKey?t[r].key:n)+"="+e))}function me(e,t,n){try{ke("getBeaconStrings : eventCode =  "+t);var r=Sn.common,i=[],a=Sn[t];if(null==a||"undefined"==a)return void ke("getbeaconstrings, return as eventmetrics undefined");var o=[],s={};if(e.eventCode||(e.eventCode=Dn[t]),pe(e,r,i,s),"error"==t&&(e.updateTerminateMetrics(),se(e,ur)),"complete"==t){e.updateTerminateMetrics();var u=Sn.playing;se(e,ur),pe(e,u,o,s)}pe(e,a,o,s);var l=i.join(On.urlParamSeparator);l=de(l);var d=0;try{for(var c in Rn)d+=On.useKey?Rn[c].length+3+On.urlParamSeparator.length:c.length+3+On.urlParamSeparator.length}catch(e){d=12}d--;var f=On.maxLogLineLength-d-l.length-3-On.beaconUrl.length;f<=0&&(f=4780-d-l.length-3-On.beaconUrl.length);var h=[],p="";if(f>0){if(o.length>0){var v,m="",g="";for(v=0;v<o.length;v++)g=de(o[v]),g.length>=f?h.push(g):m.length+g.length<=f?m?m+=On.urlParamSeparator+g:m=g:(h.push(m),m="");""!=m&&h.push(m)}var y=h.length;if(y>1)for(var b=1;b<=y;++b)p=l+On.urlParamSeparator,p+=(On.useKey?Rn.partNumber:"partNumber")+"="+b+On.urlParamSeparator,p+=(On.useKey?Rn.totalParts:"totalParts")+"="+y+On.urlParamSeparator,p+=h[b-1],p+=On.urlParamSeparator,Sn[t]&&fe(p,n,e);else p=l+On.urlParamSeparator+h[0]+On.urlParamSeparator,fe(p,n,e)}else{var E=o.join(On.urlParamSeparator);E=de(E),p=l+On.urlParamSeparator+E+On.urlParamSeparator,Sn[t]&&fe(p,n,e)}}catch(e){ke("Exception, get beacon Strings:"+e)}}function ge(e){Bn.fLineCount=0;var t=Oe(e);Bn.akamai=t,Bn.akamai.customDataPopulated=!1}function ye(){try{var e="socialShare:",t=e.length,n=Bn.socialSharingObj;for(var r in un)r.indexOf(e)!=-1&&(r in Bn.dataSent?Bn.dataSent[r].count<Bn.socialShareLimit&&(++Bn.dataSent[r].count,null==n?n[r.substring(t)]=un[r]:r.substring(t)in n?n[r.substring(t)]=parseInt(n[r.substring(t)])+parseInt(un[r]):n[r.substring(t)]=un[r]):(Bn.dataSent[r]={},Bn.dataSent[r].value=un[r],Bn.dataSent[r].count=1,n[r.substring(t)]=un[r]),delete un[r]);Bn.socialSharingObj=n}catch(e){ke("Exception,  getFeedbackObj"+e),Bn.socialSharing=null}}function be(e){try{var t=null;if(null!=Bn.socialSharingObj)for(var n in Bn.socialSharingObj)null==t?t=n+":"+Bn.socialSharingObj[n]+",":t+=n+":"+Bn.socialSharingObj[n]+",";null!=t&&(e.socialSharing=t.substring(0,t.length-1))}catch(t){ke("Exception,  getFeedbackData"+t),e.socialSharing=null}Bn.socialSharingObj={}}function Ee(e){try{for(var t in Sn)if(Sn[t])for(var n=0;n<Sn[t].length;n++)Sn[t][n].fallback&&!un[Sn[t][n].name]&&H(e,Sn[t][n].name,Sn[t][n].fallback)}catch(e){}}function _e(e){try{var t=ln.streamName?ln.streamName:e.streamName}catch(e){}try{un.title?e.title=un.title:e.title=un.eventName?un.eventName:t,un.eventName?e.eventName=un.eventName:e.eventName=un.title?un.title:t}catch(e){ke("Exception,  getting title and eventName, "+e)}}function Te(e,t,n,r){ke("updating metrics for playing and end events");var i=e.akamai,a=0,o=i.playerState,s=!0;switch(i.currentStreamTime=parseInt(vt(e)),i.currentState.state){case sr.playing:i.playerState="PL",t-i.seekTime>0&&i.updatePlayClockTime(t-i.seekTime,i.currentState.lastEventClockTime,n),i.playClockTime<0&&(i.playClockTime=0),i.updatePlayed(i.currentStreamTime);break;case sr.pause:i.pauseDuration+=t,i.playerState="PS";break;case sr.rebuffering:i.rebufferTime+=t,i.curRebufferTime+=t,R(i,n),i.playerState="B",a=n-i.curRebufferTime;break;case sr.resumeBuffering:i.playerState="RB",i.resumeBufferTime+=t;break;case sr.ended:i.updatePlayed(i.currentStreamTime);break;case sr.seek:n-i.currentState.timeUpdateClockTime>0&&L(i,n,i.currentStreamTime,"S"),i.currentState.timeUpdateClockTime=n,i.playerState="SK";break;default:s=!1}if(Yn.getTransitionSession(i),L(i),i.rebufferSession&&(O(i,o),i.firstRebufferStartEpoch=a),i.playClockTime>5e3&&(i.isView=1),s&&(i.currentState.lastEventClockTime=n),i.bytesLoaded=yt(e),i.played){var u=i.played;i.playStreamTime=0;for(var l=0;l<u.length;l++)i.playStreamTime+=parseInt(u[l][1]-u[l][0]);"R"==i.logType&&(i.playStreamTime-=i.lastPlayStreamTime,i.lastPlayStreamTime+=i.playStreamTime)}r&&"Browser.Close"!=i.endReasonCode&&!i.streamTitleSwitchReason&&(i.playerState="E")}function Se(e){try{var t="-";if(document&&document.referrer){var n=document.referrer;n=n.split("/",3),n&&n[2]&&(t=n[2])}window==window.top?(e.pageUrl=un.pageUrl?un.pageUrl:document.URL,e.pageHost=un.pageUrl&&A(un.pageUrl)?A(un.pageUrl):document.location.hostname,e.pageReferrer=un.pageReferrer?un.pageReferrer:document.referrer?document.referrer:"-",e.pageReferrerHost=un.pageReferrer&&A(un.pageReferrer)?A(un.pageReferrer):document.referrer?t:"-"):(e.pageUrl=un.pageUrl?un.pageUrl:document.referrer?document.referrer:"-",e.pageHost=un.pageUrl&&A(un.pageUrl)?A(un.pageUrl):document.referrer?t:"-",e.pageReferrer=un.pageReferrer?un.pageReferrer:"NA",e.pageReferrerHost=un.pageReferrer&&A(un.pageReferrer)?A(un.pageReferrer):"NA")}catch(e){}}function Ae(e){try{var t;for(t in ln)"viewerId"!=t&&"clientId"!=t&&"viewerDiagnosticsId"!=t&&"pluginVersion"!=t&&(e[t]=ln[t]);"pluginVersion"in ln&&(e.pluginVersion=en+":"+ln.pluginVersion)}catch(e){}}function Le(e,t){ke("populate custom data, eventCode = "+t);try{if(Se(e),e.deliveryType=w(e),e.device=un.device?un.device:ir,!("playing"!=t&&"complete"!=t&&"feedback"!=t&&"error"!=t||(be(e),null!=e.socialSharing&&""!=e.socialSharing||"feedback"!=t||e.customDataChanged)))return void--Bn.fLineCount;var n;for(n in un)"viewerId"!=n&&"clientId"!=n&&"viewerDiagnosticsId"!=n&&(n in cn||(e[n]=un[n]));if(Kn&&Kn.akamai)for(var r in Kn.akamai)e[r]=Kn.akamai[r];_e(e),e.cdn=S(e)}catch(e){ke("Exception,  populate Custom Data , "+e)}}function Re(e,t,n,r){try{ke("sendBeacon: eventCode = "+t+", clocktime = "+r);var i=e.akamai,a=r-i.currentState.lastEventClockTime;if("init"!=t?i.logInterval=i.lastLogTime<=0?"0":(r-i.lastLogTime)/1e3:i.logInterval="0",i.customDataPopulated||Le(i,t),i.serverIp=xn.serverip?xn.serverip:"-",i.fastTCP=Nn.ftcp?Nn.ftcp:"-",i.eventCode=Dn[t],i.hLineSentCount>0?i.lastHTime=(r-i.lastHLineSentTime)/1e3:i.lastHTime=(r-i.lastSLineSentTime)/1e3,"heartBeat"==t){var o=i.logInterval;i.logInterval=(r-i.lastPLineSentTime)/1e3,k(i,r)}i.logInterval<0&&(i.logInterval="0");var s=!1;if("complete"==t&&(t="playing",s=!0),i.endOfStream=e.ended?"1":"0",i.currentClockTime=r-i.startTimer,i.currentStreamTime=parseInt(vt(e)),"playing"!=t||i.playEndMetricsUpdated||(s&&k(i,r),ke("send Beacon, updating play and end metrics"),Te(e,a,r,s),bt(e)),i.customDataPopulated||Ee(i),Ae(i),!En){var u=Oe(i),l={element:u,code:s?"complete":t,synch:n};return _n.push(l),"playing"!=t&&"playStart"!=t||i.clearRelativeMetrics(),void("heartBeat"!=t?(ke("send beacon :configurationPopulated false sequenceId = "+i.sequenceId),++i.sequenceId,i.lastLogTime=r):i.logInterval=o)}if("playStart"==t&&c(),i.populateMetricsFromConfiguration(),i.xViewerId=Gn.xViewerId,i.xViewerIdVersion=Gn.xViewerIdVersion,"undefined"!=typeof akaMediaAnalytics&&null!=akaMediaAnalytics){var d=akaMediaAnalytics.getStream();d&&(i.bandwidth=d.getBandwidthFromFragments(),ke("reporting bandwidth = "+i.bandwidth),d.cleanupFragments())}s?me(i,"complete",n):me(i,t,n),i.qualityOfExperience=null,s=!1,"playing"!=t&&"playStart"!=t||i.clearRelativeMetrics(),"heartBeat"!=t?(++i.sequenceId,i.lastLogTime=r):i.logInterval=o}catch(e){ke("Exception, send beacon:"+e)}}function Oe(e,t){var t=t||{};try{for(var n in e)"object"==typeof e[n]&&e[n]?(t[n]=e[n].constructor===Array?[]:{},Oe(e[n],t[n])):t[n]=e[n];return t}catch(e){}}function ke(e,t){try{if(1==Vn.configURLCsmaDebug||1==Vn.pageURLCsmaDebug||1==Vn.configDebug){try{Vn.printException&&e.indexOf("Exception")!=-1&&(t="ERROR")}catch(e){}try{we(e,t)}catch(e){}try{console.log(e)}catch(e){}}else if(!En){var n={message:e,msgType:t};Hn.push(n)}}catch(e){}}function we(e,t){if(null!=t&&""!=t||(t="TRACE"),null!=e&&""!=e)if("function"==typeof AkamaiAnalytics_debugWindow_available&&"1"==AkamaiAnalytics_debugWindow_available())AkamaiAnalytics_debugWindow_appendLog(e,t);else{var n={message:e,msgType:t};Hn.push(n)}}function De(){try{if((1==Vn.configURLCsmaDebug||1==Vn.pageURLCsmaDebug||1==Vn.configDebug)&&Vn.logStoredMsg)if("function"==typeof AkamaiAnalytics_debugWindow_available&&"1"==AkamaiAnalytics_debugWindow_available()){if(Vn.logTimer&&Y(Vn.logTimer),Vn.logStoredMsg=!1,Hn.length){for(var e=0;e<Hn.length;e++)ke(Hn[e].message,Hn[e].msgType);Hn=[]}}else Vn.logTimer=W(De,1e3,[])}catch(e){}}function Pe(){if(navigator&&navigator.userAgent){try{var e=navigator.userAgent,t=/\((\w+)/,n=t.exec(e);er=n[1].toLowerCase(),er=e.indexOf("Xbox")!=-1?"Xbox":er.indexOf("compatible")!=-1||er.indexOf("windows")!=-1||er.indexOf("mobile")!=-1?"Windows":er.indexOf("x11")!=-1?"Linux":er.indexOf("macintosh")!=-1||er.indexOf("mac os")!=-1||er.indexOf("macos")!=-1?"Mac OS":er.indexOf("ipad")!=-1?"iPad":er.indexOf("iphone")!=-1?"iPhone":er.indexOf("ipod")!=-1?"iOS":e.indexOf("Android")!=-1?"Android":e.indexOf("PlayStation 4")!=-1?"PlayStation 4":e.indexOf("PLAYSTATION 3")!=-1?"PlayStation 3":"Others"}catch(e){ke("Exception,  finding Osname"),er="Others"}tr=er;try{if(t=/(NT|Phone|OS X|Linux|CPU.*?OS) ([0-9\._]+)/,n=t.exec(e),n&&n.length>2){rr=n[2]?n[2]:"",rr&&(tr+=" "+rr);var r=null;"Windows"==er&&(r=Ie(rr),er=er+" "+r)}}catch(e){ke("Exception,  OSVersion"+e)}}}function Ie(e){var t=null;if(e)if("6.3"==e||"6.2"==e)t="8";else if("6.1"==e)t="7";else if("6.0"==e)t="Vista";else if("5.2"==e||"5.1"==e)t="XP";else{var n=e.split(".");t=parseInt(n[0])>=8?n[0]:"Other"}return t}function xe(){if(navigator&&navigator.userAgent){var e=navigator.userAgent,t=/(MSIE|Chrome|Version|Firefox)[ \/]([0-9]+)/;try{var n=t.exec(e);if(Jn=n[1],"Version"==n[1]){t=/(Opera|Safari)/;var r=t.exec(e);Jn=r[1]}}catch(e){ke("Exception,  browserName"+e)}try{ke("browser version = "+n[2]);var i=e.indexOf("Edge");if(i!=-1){uagentLength=e.length;var a=e.substr(i,uagentLength-i),o=a.split("/");Jn=o[0],nr=o[1]}else nr=n[2];Jn&&nr&&(Jn=Jn+" "+nr)}catch(e){ke("Exception,  browserVersion"+e)}}}function Ce(){if(navigator&&navigator.userAgent)try{var e=navigator.userAgent;e=e.toLowerCase(),ir=e.indexOf("ipad")!=-1?"iPad":e.indexOf("ipod")!=-1?"iPod":e.indexOf("iphone")!=-1?"iPhone":e.indexOf("android")!=-1?"Android Device":e.indexOf("xbox")!=-1?"Xbox":e.indexOf("macintosh")!=-1||e.indexOf("windows")!=-1||e.indexOf("compatible")!=-1?"Desktop":e.indexOf("playstation 4")!=-1?"PlayStation 4":e.indexOf("playstation 3")!=-1?"PlayStation 3":"Others"}catch(e){ke("Exception,  getitng device name : "+e),ir="Others"}}function Me(e){try{switch(e){case sr.ended:return"ended";case sr.init:return"init";case sr.playing:return"playing";case sr.pause:return"pause";case sr.seek:return"seek";case sr.rebuffering:return"rebuffering";case sr.resumeBuffering:return"resumeBuffering";default:return"undefined"}}catch(e){}}function Ne(e){if(e&&e.customMetrics)for(var t in e.customMetrics)t in cn||(this[t]=e.customMetrics[t]);this.userAgent=ar,this.playerType="HTML5",this.pluginVersion=en,this.os=er,this.fullOs=tr,this.osVersion=rr,this.browser=Jn,this.browserVersion=nr,this.browserSize=window.innerWidth+"x"+window.innerHeight,this.rebufferCount=0,this.bytesLoadedCallback=0,this.lastBytesLoaded=0,this.currRebufferEndEpoch=0,this.totalPlayClockTime=0,this.totalPlayStreamTime=0,this.totalRebufferCount=0,this.totalRebufferTime=0,this.totalPauseCount=0,this.totalPauseDuration=0,this.totalSeekCount=0,this.totalSeekTime=0,this.totalResumeBufferCount=0,this.totalResumeBufferTime=0,this.totalAdPlayClockTime=0,this.totalAdStartCount=0,this.totalAdAbandonCount=0,this.updateTerminateMetrics=function(){try{this.playClockTime&&(this.totalPlayClockTime+=parseInt(this.playClockTime)),this.playStreamTime&&(this.totalPlayStreamTime+=parseInt(this.playStreamTime)),this.rebufferCount&&(this.totalRebufferCount+=parseInt(this.rebufferCount)),this.rebufferTime&&(this.totalRebufferTime+=parseInt(this.rebufferTime)),this.pauseCount&&(this.totalPauseCount+=parseInt(this.pauseCount)),this.pauseDuration&&(this.totalPauseDuration+=parseInt(this.pauseDuration)),this.seekCount&&(this.totalSeekCount+=parseInt(this.seekCount)),this.seekTime&&(this.totalSeekTime+=parseInt(this.seekTime)),this.resumeBufferCount&&(this.totalResumeBufferCount+=parseInt(this.resumeBufferCount)),this.resumeBufferTime&&(this.totalResumeBufferTime+=parseInt(this.resumeBufferTime)),this.adPlayClockTime&&(this.totalAdPlayClockTime+=parseInt(this.adPlayClockTime)),this.adCount&&(this.totalAdStartCount+=parseInt(this.adCount)),this.adAbandonCount&&(this.totalAdAbandonCount+=parseInt(this.adAbandonCount));var e=i();this.startupAbondonWaitTime=e,this.playInterval=e}catch(e){ke("Unable to update cumulative metrics")}},this.clearRelativeMetrics=function(){var e=["rebufferCount","rebufferTime","playClockTime","playStreamTime","seekCount","seekTime","pauseCount","pauseDuration","resumeBufferCount","resumeBufferTime","averagedBitRate","transitionUpSwitchCount","transitionDownSwitchCount","rebufferSession","curRebufferTime","adCount","adPlayClockTime","adStartupTime","adAbandonCount","adPauseTime"];this.updateTerminateMetrics();for(var t=0;t<e.length;++t)this[e[t]]=0;this.pauseIntervalsAsString="-",this.seekIntervalsAsString="-",this.pauseSeekSession="-",this.transitionStreamTimeSession="-",this.socialSharing=null,this.adSession=null,Bn.socialSharing=null,Bn.socialSharingObj={},Yn.bitRateArr=[],delete this.rebufferSession},this.populateMetricsFromConfiguration=function(){this.beaconId=Ln.beaconId,this.beaconVersion=Ln.beaconVersion,this.logType="relative"==On.logType?"R":"C",this.logVersion=On.logVersion,this.startupTimeOutlierLimit=On.startupTimeOutlierLimit,this.formatVersion=On.formatVersion,this.bucketCount=wn.bucketCount,this.bucketLength=wn.bucketLength;for(var e in Sn)if(Sn[e])for(var t=0;t<Sn[e].length;t++)Sn[e][t].value&&(this[Sn[e][t].name]=Sn[e][t].value)},this.initPlayed=function(e){this.played.push([e,e]),this.playingIndex=0},this.updatePlayClockTime=function(e,t,n){this.playClockTime+=e,Yn.updateBitRateArr(e)},this.updatePlayed=function(e,t){var n=this.played;if(n){for(var r=0;r<n.length;r++);for(var r=this.playingIndex;r<n.length&&e>n[r][0];r++);if(r!=this.playingIndex?(n[this.playingIndex][1]=Math.max(e,n[r-1][1]),n.splice(this.playingIndex+1,r-this.playingIndex-1)):n[this.playingIndex][1]=Math.max(e,n[this.playingIndex][1]),null!=t){for(r=0;r<n.length;r++){if(n[r][0]<=t&&n[r][1]>=t)return void(this.playingIndex=r);if(r+1<n.length&&n[r][1]<t&&n[r+1][0]>t)return r++,this.playingIndex=r,void n.splice(r,0,[t,t])}r==n.length&&(n.push([t,t]),this.playingIndex=r)}}},this.isVisitEnd=0,this.sequenceId="0",this.isSLineSent=!1,this.sendVLine=!1,this.played=[],this.iLineCount=0,this.isPlaylist=!1,this.isFirstTitle=1,this.currentState={state:sr.ended,lastEventClockTime:0,pauseStartStreamTime:0,pauseStartClockTime:0,timeUpdateStreamTime:0,timeUpdateClockTime:0,pollingTimerStreamTime:0,seekStartStreamPos:0},this.seekObject={seekStartEpochTime:-1,seekEndEpochTime:-1,seekStartStreamTime:-1,seekEndStreamTime:-1},this.clearRelativeMetrics(),ke("value of configurationPopulated"+En),En&&this.populateMetricsFromConfiguration(),this.loadStartILine=!1,this.canPlayUpdated=!1,this.canPlayEventAutoPlay=!0,this.format="P",this.playerFormat=this.playerType+":"+this.format,this.deliveryType="O",this.firstTimeProgress=!0,this.firstTimePlay=!0,this.isILineSent=!1,this.seekFrom=0,this.lastPlayStreamTime=0,this.lastPlayLogTime=0,this.lastLogTime=0,this.curRebufferTime=0,this.sendIsSessionWithRebufferH=1}function Fe(){try{var e,t;for(e in Sn)if(Sn[e])for(t=0;t<Sn.length;t++)Sn[e][t].isSent&&Sn[e][t].isSent===!0&&(Sn[e][t].isSent=!1)}catch(e){}}function Be(e){ke("endOfTheSession");var t=e.akamai,n=t.isPlaylist,r=t.visitId,i=t.viewerId,a=t.streamName,o=t.cdn,s=t.sendVLine,u=t.iLineCount;e.akamai=null,Fe(),t=e.akamai=new Ne(e),t.visitId=t.browserSessionId=r,t.viewerId=t.clientId=i,t.cdn=o,jn=-1,t.streamName=a,t.iLineCount=u,e.akamai.clearVisitTimeoutId=W(jt,On.visitTimeout,[e,1]),
t.sendVLine=s,t.isPlaylist=n,e.played&&(e.played.length=0),Yn.clearBitRate()}function Ue(){try{if(4==this.readyState&&200==this.status&&this.responseText){var e,t,n=this.akamai,r=this.responseText.split("\n"),i="",a=/PROGRAM-ID=(\d+)/;if(r){for(t=0;t<r.length;t++)if(e=a.exec(r[t])){if(e[1]==i)break;i=e[1]}t!=r.length&&(n.format="L",n.playerFormat=n.playerType+":"+n.format)}if(a=/^#EXT((INF)|(-X-STREAM-INF))[^\n]*\n([^\n]*)\n/m,ke("Checking"),e=a.exec(this.responseText))if(ke("Checking done "+e[4]),/.m3u8$/.exec(e[4]))try{var o=new XMLHttpRequest;o.open("GET",e[4],!0),o.onreadystatechange=function(){console.log("current content type from stream url is = "+this.getResponseHeader("content-type")),4==this.readyState&&200==this.status&&this.responseText&&/^#EXT-X-ENDLIST/m.exec(this.responseText)&&(n.deliveryType="O")},o.overrideMimeType&&o.overrideMimeType("text/plain"),o.send(null)}catch(e){ke("parsePlaylist, Exception,  parsing play list, "+e)}else/^#EXT-X-ENDLIST/m.exec(this.responseText)&&(n.deliveryType="O")}}catch(e){ke("Exception,  parsePlaylist : "+e)}}function je(e){return!!(pn&&pn.dataset&&pn.dataset.isad&&"true"==pn.dataset.isad)}function Ge(e,t,n,r){"playing"==t&&(Fn=[]);var i={};if(i.eventType=t,i.eventTime=r,n&&(i.streamUrl=n),"error"==t&&(i.errorCode=M(e)),Fn&&Fn.length>0){var a=Fn[Fn.length-1];a.eventType==i.eventType&&a.streamUrl==i.streamUrl?("error"==t&&(a.errorCode=i.errorCode),a.eventTime=i.eventTime):Fn.push(i)}else Fn.push(i)}function He(e,t,n,r){try{var i=!1;if(Fn.length>0){var a=Fn[Fn.length-1];if(ke("check error events array, previous event is : "+a.eventType),"error"==a.eventType&&n==a.streamUrl)if("error"==t){var o=M(e);i=a.errorCode==o,a.eventTime=r,a.errorCode=o}else"play"==t&&a.eventTime&&r-a.eventTime<=2e3&&(i=!0)}}catch(e){ke("Exception,  checkErrorEventsArray"+e),i=!1}return i}function Ve(e,t,n){if(je(e))return void ke("handle Seeked Event : video tag is of type AD, return");try{t||(t=i()),n||(n=parseInt(vt(e)));var r=e.akamai,a=r.currentState,o=t-a.lastEventClockTime,s=(t-r.startTimer,a.state);if(ke("entered function handle Seeked Event, currentstate = "+Me(a.state)),s==sr.pause||s==sr.playing||s==sr.rebuffering||a.state==sr.seek)switch(t-a.timeUpdateClockTime>0&&L(r,t,n,"S"),s){case sr.playing:r.updatePlayed(a.timeUpdateStreamTime,n),a.lastEventClockTime=t,r.updatePlayClockTime(o,a.lastEventClockTime,t),a.state=sr.seek,a.seekStartStreamPos=n;break;case sr.rebuffering:ke("handle seeked event, previous state is rebuffering"),r.rebufferTime+=o,r.curRebufferTime+=o,r.rebufferSessionArrayHLine&&r.rebufferSessionArrayHLine.push(t);try{R(r,t),r.curRebufferTime=0}catch(e){ke("Error...Play"+e.message)}a.lastEventClockTime=t,a.state=sr.seek}}catch(e){ke("Exception,  handle Seeked Event :"+e)}}function Ke(e,t){if(je(e))return void ke("handlePauseEvent : video tag is of type AD, return");try{ke("entered function handle Pause Event");var n=i(t),r=parseInt(vt(e)),a=e.akamai,o=a.currentState,s=mt(e);if(a.firstTimePlay||o.state==sr.pause)return;if(s&&0!=s&&r&&0!=r&&Math.abs(s-r)<1e3)return;var u=n-o.lastEventClockTime,l=n-a.startTimer,d=o.state;switch(d){case sr.playing:a.updatePlayClockTime(u,o.lastEventClockTime,n),++a.pauseCount,L(a,n,r,"P"),"-"!=a.pauseSeekSession?a.pauseSeekSession+=",P("+r+":"+l+")":a.pauseSeekSession="P("+r+":"+l+")",a.updatePlayed(r);break;case sr.rebuffering:++a.pauseCount,L(a,n,r,"P"),"-"!=a.pauseSeekSession?a.pauseSeekSession+=",P("+r+":"+l+")":a.pauseSeekSession="P("+r+":"+l+")",a.rebufferTime+=u,a.curRebufferTime+=u,a.rebufferSessionArrayHLine&&(ke("handlePauseEvent : pushing, rebufferSessionArrayHLine"),a.rebufferSessionArrayHLine.push(n));try{R(a,n),a.curRebufferTime=0}catch(e){ke("Error...Pause"+e.message)}}o.state=sr.pause,o.pauseStartStreamTime=r,o.pauseStartClockTime=n,o.lastEventClockTime=n}catch(e){ke("Exception,  handlePauseEvent : "+e)}}function We(e,t){try{if(hn&&hn.akamai){ke("handle bit rate switch");try{e=parseInt(e)}catch(e){return void ke("Exception,bit rate to int :"+e)}isNaN(e)&&ke("handle bitrate swtich, bite rate isNaN");var n=hn.akamai,r=n.currentState,i=vt(hn);"-"!=Yn.currentBitRate&&(e>Yn.currentBitRate?n.transitionUpSwitchCount++:e<Yn.currentBitRate&&n.transitionDownSwitchCount++),r&&r.state==sr.playing&&ze(hn,t),Yn.currentBitRate=e,Yn.currentStartPos=i}}catch(e){ke("Exception, handle bit rate switch:"+e)}}function Ye(e,t){if(je(e))return void ke("handle Play Event : video tag is of type AD, return");try{var n=i(t),a=gt(e);if(e.akamai&&e.akamai.postRollTimer&&(ke("handle play event: send the C line without changing set data"),Y(e.akamai.postRollTimer),delete e.akamai.postRollTimer,Qe(e,n)),!e.objectBased&&!a)return void ke("handle play event, video is null");if(He(e,"play",a,n))return void ke("handle play Event: play is thrown after error, return, curTime = "+n);Ge(e,"play",a,n);var o=e.akamai,s=parseInt(vt(e)),u=o.currentState,l=n-u.lastEventClockTime,d=n-o.startTimer,c=u.state;switch(ke("entered function handle Play Event, current state = "+Me(u.state)),c){case sr.ended:if(r(a,o),o.streamUrl=a,o.startTimer=n,o.streamLength=parseInt(mt(e)),null!=a&&a.indexOf("?")!=-1&&(a=a.substring(0,a.indexOf("?"))),null!=a&&""!=a&&/.m3u8$/.exec(a)){o.format="L",o.playerFormat=o.playerType+":"+o.format,o.deliveryType="L";try{var f=new XMLHttpRequest;f.akamai=o,f.open("GET",a,!0),f.onreadystatechange=Ue,f.overrideMimeType&&f.overrideMimeType("text/plain"),f.send(null)}catch(e){ke("handleplayEvent, Exception,  parsing play list, "+e)}}jn=-1,ee(e,!1,n),o.currentState.state=sr.init,ke(n+": handlePlayBackEvent : Setting state to init"),o.currentState.timeUpdateClockTime=n,o.currentState.timeUpdateStreamTime=0,o.currentState.lastEventClockTime=n,o.isPlaylist=!0;break;case sr.pause:o.pauseDuration+=l,"-"!=o.pauseIntervalsAsString?o.pauseIntervalsAsString+=","+u.pauseStartStreamTime+":"+(n-u.pauseStartClockTime):o.pauseIntervalsAsString=u.pauseStartStreamTime+":"+(n-u.pauseStartClockTime),"-"!=o.pauseSeekSession?o.pauseSeekSession+=",R("+u.pauseStartStreamTime+":"+d+")":o.pauseSeekSession="R("+u.pauseStartStreamTime+":"+d+")",o.updatePlayed(u.pauseStartStreamTime,s),o.currentState.lastEventClockTime=n,++o.resumeBufferCount,u.state=sr.resumeBuffering;break;case sr.init:o.iLineSentTime||(o.iLineSentTime=n),!o.loadStartILine||o.canPlayEventAutoPlay||o.canPlayUpdated||(o.iLineSentTime=n,o.canPlayUpdated=!0)}}catch(e){ke("Exception,  handle Play Event:"+e)}}function ze(e,t){if(je(e))return void ke("handle Playing Event : video tag is of type AD, return");try{var n=i(t),r=gt(hn);if(!e.objectBased&&!r)return void ke("handle playing event, video is null");Ge(e,"playing",r,n);var a=parseInt(vt(e)),o=e.akamai,s=o.currentState,u=n-s.lastEventClockTime,l=(n-o.startTimer,s.state);switch(ke("entered function handle Playing Event, current State = "+Me(s.state)),l){case sr.rebuffering:o.rebufferTime+=u,o.curRebufferTime+=u,o.rebufferSessionArrayHLine&&o.rebufferSessionArrayHLine.push(n);try{R(o,n),o.curRebufferTime=0}catch(e){ke("Error...Play"+e.message)}break;case sr.pause:case sr.resumeBuffering:o.resumeBufferTime+=u,0==u&&o.resumeBufferCount>0&&--o.resumeBufferCount;break;case sr.init:J(e,u,n,a),Yn.currentStartPos=a;break;case sr.ended:ke("handle Playing Event : dispatch play and playing event"),Ye(e,n),ze(e,n);break;case sr.playing:o.updatePlayClockTime(u,s.lastEventClockTime,n);break;case sr.seek:n-s.timeUpdateClockTime>0&&(L(o,n,a,"S"),o.updatePlayed(s.seekStartStreamPos,a))}s.state=sr.playing,s.lastEventClockTime=n}catch(e){ke("Exception,  handle Playing Event:"+e)}}function qe(e,t){if(je(e))return void ke("handleWaitingEvent : video tag is of type AD, return");try{var n=e.akamai;if(n.currentState.state==sr.rebuffering)return void ke("already inside handleWaiting Event");var r=i(t),a=parseInt(vt(e)),o=n.currentState,s=r-o.lastEventClockTime,u=(r-n.startTimer,o.state);switch(ke("entered function handle Waiting Event, current state = "+Me(o.state)),u){case sr.playing:n.updatePlayClockTime(s,o.lastEventClockTime,r),++n.rebufferCount,1==n.rebufferCount&&"B"!=n.playerState&&(n.firstRebufferStartEpoch=Math.round(r)),n.rebufferSessionArrayHLine&&(ke("handleWaitingEvent : pushing, rebufferSessionArrayHLine"+r),n.rebufferSessionArrayHLine.push(r)),n.updatePlayed(a),o.state=sr.rebuffering;break;case sr.pause:++n.resumeBufferCount,o.state=sr.resumeBuffering;break;case sr.init:}o.lastEventClockTime=r,ke("handle waiting event, if seek starts, stream pos = "+a),o.seekStartStreamPos=a}catch(e){ke("Exception,  handleWaitingEvent:"+e)}}function Xe(e,t){if(je(e))return void ke("handle Error Event : video tag is of type AD, return");try{var n=i(t),r=gt(e),a=M(e);if(!e.objectBased&&!r)return void ke("handle error event, video is null");if(He(e,"error",r,n))return void ke("handle Error Event: consecutive error events thrown, return, curTime = "+n);e&&e.akamai&&!e.akamai.isILineSent&&(ke("handle Error Event: calling handle Play Event"),Ye(e,n)),Ge(e,"error",r,n);var o=(parseInt(vt(e)),e.akamai),s=o.currentState,u=n-s.lastEventClockTime;n-o.startTimer,s.state;if(ke("entered function handle Error Event, current state = "+Me(s.state)),s.state==sr.playing&&o.updatePlayClockTime(u,s.lastEventClockTime,n),o.isELineSent||o.isCLineSent)return;re(e,a,n),s.state=sr.ended;parseInt(Kt("HTML_LastCLineTime"));Be(e),s.lastEventClockTime=n}catch(e){ke("Exception,  handleErrorEvent:"+e)}}function $e(e,t){if(je(e))return void ke("handle Ended Event WithDelay : video tag is of type AD, return");try{var n=e.akamai,r=n.currentState;ke("entered function handle Ended Event WithDelay, current state"+Me(r.state));var a=i(t),o=(N(e),a-r.lastEventClockTime);if(n.pollingTimer&&Y(n.pollingTimer),Kn&&Kn.retryTimer&&Y(Kn.retryTimer),n.hLineTimer&&Y(n.hLineTimer),n.fastTCPServerIpTimer&&Y(n.fastTCPServerIpTimer),n.firstPLineTimer&&Y(n.firstPLineTimer),Kn&&Kn.retryTimer&&Y(Kn.retryTimer),n.postRollTimer)return void ke("handle Ended Event WithDelay: postRollTimer already started return");Le(n,"complete"),Ae(n),Ee(n),n.postRollTimer=W(Qe,1e3,[e]),ge(n),n.customDataPopulated=!0,k(n,a),Te(e,o,a,!0),n.playEndMetricsUpdated=!0}catch(t){ke("Exception,  handle Ended Event WithDelay"+t),Qe(e,a)}}function Qe(e,t){try{var n=e.akamai;if(n.postRollTimer&&(Y(n.postRollTimer),delete n.postRollTimer),n.isELineSent||n.isCLineSent)return void ke("handle Ended Event : already sent C line, return");var r=i(t),a=(parseInt(vt(e)),n.currentState),o=r-a.lastEventClockTime;r-n.startTimer,a.state;ke("entered function handle Ended Event, current state"+Me(a.state)),n.playEndMetricsUpdated||(Te(e,o,r,!0),n.playEndMetricsUpdated=!0),a.state=sr.ended;var s=N(e);null!=n.streamTitleSwitchReason&&""!=n.streamTitleSwitchReason&&(s=n.streamTitleSwitchReason),ne(e,s,!1,r);parseInt(Kt("HTML_LastCLineTime"));Be(e),a.lastEventClockTime=r}catch(e){ke("Exception,  handle Ended Event :"+e)}}function Ze(){var e=navigator.connection||navigator.mozConnection||navigator.webkitConnection;e&&e.type&&(hn.akamai.connectivity=e.type)}function Je(e){if(e){if(navigator.geolocation&&null==rn){rn=navigator.geolocation.watchPosition(et,tt);var t=navigator.connection||navigator.mozConnection||navigator.webkitConnection;t&&t.type&&(hn.akamai.connectivity=t.type,t.addEventListener("typechange",Ze))}}else navigator.geolocation&&null!=rn&&(navigator.geolocation.clearWatch(rn),rn=null,t.removeEventListener("typechange",Ze))}function et(e){e&&e.coords&&(hn.akamai.latitude=e.coords.latitude,hn.akamai.longitude=e.coords.longitude)}function tt(e){var t="";switch(e.code){case e.PERMISSION_DENIED:t="User denied the request for Geolocation.";break;case e.POSITION_UNAVAILABLE:t="Location information is unavailable.";break;case e.TIMEOUT:t="The request to get user location timed out.";break;case e.UNKNOWN_ERROR:t="An unknown error occurred."}ke("Location Error : ",t)}function nt(e,t){try{if(hn&&hn.akamai&&hn.akamai.isSLineSent?ke("setData() API called after 'Start Of Play' for dimension -> "+e+"|All custom dimensions should be set before the play is initiated.","WARN"):ke("Set Data("+e+":"+t+")"),"customDataObject"==e)rt(t);else if("customDataFunction"==e)dn=t;else{try{null!=t&&(t=t.trim())}catch(e){}"viewerId"!=e&&"viewerDiagnosticsId"!=e||null!=t&&""!=t||(t="-");try{En&&"_cd_"==e.substring(0,4)&&y(e)}catch(e){}try{e.indexOf("std:")!=-1?ln[e.substring(4)]=t:un[e]=t}catch(n){un[e]=t}e.indexOf("socialShare:")==-1&&e.indexOf("feedback:")==-1||ot()}}catch(e){ke("Exception, Set Data :"+e)}}function rt(e){try{if("object"==typeof e)for(var t in e)nt(t,e[t])}catch(e){ke("Exception set custom data object"+e)}}function it(e){var t=hn.akamai;t.streamTitleSwitchReason="Stream.Switched",Qe(hn,e)}function at(e,t){hn.akamai.streamTitleSwitchReason="Title.Switched";var n=hn.akamai.isFirstTitle;Qe(hn,t);try{if(null!=e&&""!=e)for(var r in e)nt(r,e[r])}catch(e){ke("Exception, handle title switch:"+e)}hn.akamai.isFirstTitle=n,Ye(hn,t),ze(hn,t);try{hn.akamai.currentState.timeUpdateStreamTime=parseInt(vt(hn))}catch(e){ke("Exception,  handleTitleSwitch"+e)}}function ot(){try{var e="feedback:",t=e.length,n=!1,r=i();for(var a in un)if(a.indexOf(e)!=-1){var o=a.substring(t);un[o]=un[a],delete un[a],n=!0}ye(),ke("handleFeedbackEvent"),Bn&&Bn.shouldSendFLine&&Bn.akamai&&(Bn.akamai.isCLineSent||Bn.akamai.postRollTimer)&&(n&&(Bn.akamai.customDataChanged=!0),Bn.fLineCount<Bn.limit&&Re(Bn,"feedback",!1,r),++Bn.fLineCount,Bn.akamai.customDataChanged=!1,Bn.akamai.socialSharing=null)}catch(e){ke("Exception, handle feed back event :"+e)}}function st(){try{hn.objectBased||(ke("application exit, unsubscribe video events"),Ft(hn))}catch(e){}Gt()}function ut(e){if(!je(e))try{if(vn)return void ke("handle time update event, return as inside background state for idevice");var t=i(null,!0),n=parseInt(vt(e)),r=e.akamai;if(!r)return;if(r.postRollTimer)return;var a=r.currentState,o=(t-a.lastEventClockTime,t-r.startTimer,a.state,n-a.timeUpdateStreamTime);0!=a.timeUpdateStreamTime&&(Math.abs(o)>=On.seekThreshold&&r.isSLineSent?(ke("stream diff in time update is "+o),Ve(e,t,n)):o>0&&o<=750&&(e.objectBased?a.state==sr.seek&&ze(e):r.isSLineSent&&a.state!=sr.seek&&a.state!=sr.rebuffering||(ke("handle time update event,  dispatching playing event,  current Video state is : "+Me(a.state)),ze(e)))),a.timeUpdateClockTime=t,a.timeUpdateStreamTime=n}catch(e){ke("Exception,  handleTimeupddate :"+e)}}function lt(e,t,n){try{var r=Kn.aisRequestLimit,i=Kn.aisRequestInterval;if(Kn=new a,Kn.aisRequestInterval=i,Kn.aisRequestLimit=r,!e)return void ke("return from ais, platform is null");Kn.platform=e,Kn.version=t?t:"1.0",n&&(Kn.aisCustomDataObj=n),Kn.requestUrl="http://idp.securetve.com/rest/",Kn.initUrl=Kn.requestUrl+Kn.version+"/"+Kn.platform+"/init/?format=jsonp&responsefield=akaMediaAnalytics.receiveAISInitRequest",Kn.identityUrl=Kn.requestUrl+Kn.version+"/"+Kn.platform+"/identity/?format=jsonp&responsefield=akaMediaAnalytics.receiveAISIdentityRequest",Kn.initUrlId="AkamaiAISInitUrl",Kn.identityUrlId="AkamaiAISIdentityUrl",ct(Kn.initUrl,Kn.initUrlId)}catch(e){Kn.requestFailed=!0}}function dt(){var e,t,n={};try{if(Kn&&Kn.aisCustomDataObj){Kn.akamai||(Kn.akamai={});for(var r in Kn.aisCustomDataObj)if(e=Kn.aisCustomDataObj[r].split("/"),"INIT"==e[0]&&Kn.initObj?n=Kn.initObj:"IDENTITY"==e[0]&&Kn.identityObj&&(n=Kn.identityObj),n){for(t=1;t<e.length;t++)e[t]&&n[e[t]]&&(n=n[e[t]]);"object"!=typeof n&&(Kn.akamai[r]=n)}}}catch(e){ke("Exception,  populateAISCustomData"+e)}}function ct(e,t){try{var n=document.createElement("script");n.setAttribute("src",e),n.id=t,document.getElementsByTagName("head")[0].appendChild(n)}catch(t){ke("Exception,  loading JavaScript File "+e)}}function ft(e){try{var t=document.getElementById(e);t.parentNode.removeChild(t)}catch(t){ke("Exception,  removing script with id "+e)}}function ht(e){var t;t=e.akamai,t.pollingTimer=W(ht,In,[e]),e&&(e.isBrightcoveVideo?akamaiBCVideoModule.getVideoPosition(!1,pt):pt(0,e))}function pt(e,t){var n,r;i(null,!0);if(null!=hn&&hn.isBrightcoveVideo?(hn.currentTime=parseInt(e),r=parseInt(1e3*e),t=hn):r=parseInt(vt(t)),"undefined"!=r&&!isNaN(r)&&""!=r){n=t.akamai;var a=n.currentState;if(a.state!=sr.ended)if(t.objectBased)ut(t);else{if(a.state==sr.pause||a.state==sr.seek)return;0!=r&&r===a.pollingTimerStreamTime&&a.state!=sr.rebuffering?(ke("check stream head position, call handle waiting event"),qe(t)):a.pollingTimerStreamTime=r}}}function vt(t){var n=0;try{t.objectBased?e&&e.streamHeadPosition&&(n=e.streamHeadPosition(),t.currentTime=n):pn.currentTime&&(n=pn.currentTime,t.currentTime=n)}catch(e){}return 0==n&&jn!=-1&&(n=jn),0!=n&&(jn=n),1e3*n}function mt(t){var n=0;try{t&&(t.objectBased?e&&e.streamLength&&(n=e.streamLength(),t.duration=n):(n=pn.duration,t.duration=n))}catch(e){}return 1e3*n}function gt(t){var n="";try{t&&(t.objectBased?e&&e.streamURL&&(n=e.streamURL(),t.currentSrc=n):(n=pn.currentSrc,t.currentSrc=n))}catch(e){}return n}function yt(t){var n=0,r=0;try{t&&t.objectBased&&e&&e.bytesLoaded&&(n=parseInt(e.bytesLoaded()),r=n-t.akamai.lastBytesLoaded)}catch(e){}if(t.akamai.lastBytesLoaded=n,r>0)return r}function bt(e){try{var t={};null!=dn&&(t=dn(),rt(t))}catch(e){}}function Et(e,t){try{ke("handle Ad loaded"),Wn.isAdLoaded&&ke("handleAdLoaded API is called multiple times.|We have identified that 2 successive handleAdLoaded APIs are called.|Kindly ensure that sequence of Ad calls -- handleAdLoaded->handleAdStarted->handleAdComplete is maintained.","WARN");var n=hn.akamai;if(!n.isILineSent){(new Date).getTime()}var r=i(t);Wn.clearAdAnalytics(),Wn.isAdLoaded=!0,Wn.adLoadTime=r,Wn.adCount=1,Wn.adAbandoned=!0,n.postRollTimer?(q(hn),Y(n.postRollTimer),n.postRollAd=!0,n.customDataPopulated=!1,Wn.type=2):n.isILineSent&&(n.isSLineSent?(Ke(hn,r),Wn.type=1):n.isSLineSent||n.adLoadTime||(n.adLoadTime=r)),kt(e),n.isILineSent||Q(!1,r)}catch(e){ke("Exception,handle ad loaded:"+e)}}function _t(e,t){try{ke("handle Ad Started");var n=i(t);Wn.isAdStarted=!0,Wn.isAdLoaded||(ke("handleAdLoaded API is missing.|We have identified that handleAdStarted API is called without handleAdLoaded.|Kindly ensure that handleAdLoaded API is called for every Ad and relevant adObject is passed as an argument.","WARN"),Et(e,n)),Wn.playBucket="0",Wn.adStartTime=n,Wn.adStartupTime=n-Wn.adLoadTime,Wn.startPos=vt(hn),kt(e)}catch(e){ke("Exception,handle ad started:"+e)}}function Tt(e){try{ke("handleAdEnded"),"0"==Wn.playBucket&&ke("Ad Progress related APIs not called.|We have identified that handleAdFirstQuartile,handleAdMidPoint & handleAdThirdQuartile APIs have not been called.|It will be good if these APIs are called in order to capture more accurate Ad information","WARN"),Wn.playBucket="4",wt("0",e)}catch(e){ke("Exception,handle ad completed:"+e)}}function St(){Wn.isAdStarted||ke("handleAdStarted API is missing.|We have identified that handleAdFirstQuartile API is called without handleAdStarted.|Kindly ensure that handleAdStarted API is called for every Ad that starts successfully.","ERROR"),Wn.playBucket="1"}function At(){Wn.playBucket="2"}function Lt(){Wn.playBucket="3"}function Rt(e){wt("1",e)}function Ot(e){wt("3",e)}function kt(e){try{var t=Wn.setDataArr;ke("populate ad metric");for(var n=0;n<t.length;n++)t[n]in e&&(Wn[t[n]]=e[t[n]])}catch(e){}}function wt(e,t){try{var n=i(t),r=hn.akamai;Wn.endStatus=e,"0"!=e&&(Wn.adAbandonCount=1),Wn.isAdLoaded&&Wn.isAdStarted&&(Wn.adPlayClockTime=n-Wn.adStartTime),Wn.adSession=Dt();for(var a=["adStartupTime","adCount","adPlayClockTime","adAbandonCount"],o=0;o<a.length;o++)r[a[o]]+=Wn[a[o]];r.adSession?r.adSession+=","+Wn.adSession:r.adSession=Wn.adSession,Wn.isAdStarted=!1,Wn.isAdLoaded=!1,"2"!=e&&(Wn.adAbandoned=!1,r&&(r.postRollAd?(r.postRollAd=null,Qe(hn,n)):r.isSLineSent?(Ye(hn,n),ze(hn,n)):r.isSLineSent||(r.adEndTime=n)))}catch(e){ke("Exception,populate ad end:"+e)}}function Dt(){var e="",t=["adId","type","startPos","adStartupTime","adPlayClockTime","playBucket","endStatus","adDuration","adTitle","adCategory","adPartnerId","adServer","adDaypart","adIndustryCategory","adEvent"];try{for(var n=0;n<t.length;n++)e+=0==Wn[t[n]]||null!=Wn[t[n]]&&""!=Wn[t[n]]?Wn[t[n]]+":":":";e=e.substring(0,e.length-1)}catch(e){}return e}function Pt(e){try{if(je(e))return;var t=e.akamai;t.firstTimeProgress}catch(e){}}function It(e){try{if(je(e))return;var t=e.akamai;pn.autoplay&&(Ye(e),t.loadStartILine=!0)}catch(e){}}function xt(e){try{if(je(e))return;var t=e.akamai;pn.autoplay?t.canPlayEventAutoPlay=!0:t.canPlayEventAutoPlay=!1}catch(e){}}function Ct(e){try{if(je(e))return;var t=e.akamai;t.firstTimeProgress&&(t.firstTimeProgress=!1),"R"==t.logType}catch(e){}}function Mt(e){try{if(je(e))return;var t=e.akamai;t.streamLength=parseInt(mt(e))}catch(e){}}function Nt(e){ke("subscribeToEvents : video = "+e);pn=e;try{e.addEventListener("play",bn.play=function(){Ye(hn)},!1),e.addEventListener("pause",bn.pause=function(){Ke(hn)},!1),e.addEventListener("error",bn.error=function(){Xe(hn)},!1),e.addEventListener("ended",bn.ended=function(){$e(hn)},!1),e.addEventListener("playing",bn.playing=function(){ze(hn)},!1),e.addEventListener("waiting",bn.waiting=function(){qe(hn)},!1),e.addEventListener("timeupdate",bn.timeupdate=function(){ut(hn)},!1),e.addEventListener("load",bn.load=function(){Pt(hn)},!1),e.addEventListener("progress",bn.progress=function(){Ct(hn)},!1),e.addEventListener("durationchange",bn.durationchange=function(){Mt(hn)},!1),e.addEventListener("canplay",bn.canplay=function(){xt(hn)},!1),e.addEventListener("loadstart",bn.loadstart=function(){It(hn)},!1),ke("subscribed to events completed")}catch(e){ke("Exception,  subscribeToEvents,unable to add listeners to video tag :"+e)}}function Ft(e){try{e.removeEventListener("play",bn.play,!1),e.removeEventListener("pause",bn.pause,!1),e.removeEventListener("error",bn.error,!1),e.removeEventListener("ended",bn.ended,!1),e.removeEventListener("playing",bn.playing,!1),e.removeEventListener("waiting",bn.waiting,!1),e.removeEventListener("timeupdate",bn.timeupdate,!1),e.removeEventListener("load",bn.load,!1),e.removeEventListener("progress",bn.progress,!1),e.removeEventListener("durationchange",bn.durationchange,!1),e.removeEventListener("canplay",bn.canplay,!1),e.removeEventListener("loadstart",bn.loadstart,!1)}catch(e){ke("Exception, unSubscribeFrom Events:"+e)}}function Bt(e){try{if("undefined"!=typeof akamaiBCVideoObject)pn=akamaiBCVideoObject,hn.isBrightcoveVideo=!0,initBrightcove();else if(hn.objectBased||hn.videoPassed);else if(document){var t=document.getElementsByTagName("video");ke("add MediaEvent Listeners : videos.length "+t.length),t&&0==t.length&&(t=document.getElementsByTagName("audio"));for(var n=0;n<t.length;++n)Nt(t[n]);document.addEventListener("DOMNodeInserted",Ut,!1),document.addEventListener("DOMNodeRemoved",Ut,!1),document.addEventListener("DOMAttrModified",Ut,!1)}e&&("DOMContentLoaded"==e.type?document.removeEventListener("load",Bt,!0):"load"==e.type&&t&&t.length>0&&document.removeEventListener("load",Bt,!0))}catch(e){ke("Exception,  add MediaEvent Listeners :"+e)}}function Ut(e){var t=e.target;if(t.nodeType!=t.COMMENT_NODE&&null!=t.tagName&&("video"==t.tagName.toLowerCase()||"audio"==t.tagName.toLowerCase()))switch(e.type){case"DOMNodeRemoved":t.dataset&&t.dataset.isad&&"true"==t.dataset.isad||jt(hn,0);break;case"DOMNodeInserted":Nt(t)}}function jt(e,t){ke("handle Video Unload");var n=i(),r=e.akamai,a=parseInt(Kt("HTML_VisitCountCookie"));Tn.browserClose=!0;try{if(r&&r.currentState.state>=sr.init&&0==t){if(r.isELineSent||r.isCLineSent)return;if(Wn&&Wn.adAbandoned){var o="Ad.Abandon";r.postRollTimer&&(Y(r.postRollTimer),delete r.postRollTimer),ne(e,o,!0,n)}else if(r.firstTimePlay){var s="Browser.Refresh.NoStart";n-r.startTimer>On.initBrowserCloseTime&&(s="Browser.Refresh.NoStart.Late"),re(e,s,!0,n)}else{var o="Browser.Close";r.postRollTimer&&(Y(r.postRollTimer),delete r.postRollTimer),ne(e,o,!0,n)}}}catch(e){}try{var u=parseInt(Kt("HTML_LastCLineTime")),l=u+On.visitTimeout-n,d=parseInt(Kt("HTML_isPlayingCount"));if(ke("handle Video Unload: playing cookie =  "+d+", visit cookie :"+a),a>=1&&1==t){if(l>0)return Y(r.clearVisitTimeoutId),void(e.akamai.clearVisitTimeoutId=W(jt,l,[e,1]));if(l<=0&&a>1&&d>0)return Y(r.clearVisitTimeoutId),void(e.akamai.clearVisitTimeoutId=W(jt,On.visitTimeout,[e,1]))}ke("handle Video Unload: decrementing HTML_VisitCountCookie"),a-=1,Yt("HTML_VisitCountCookie",a);var a=parseInt(Kt("HTML_VisitCountCookie"));(0===a||isNaN(a))&&r.sendVLine&&ie(e,n)}catch(e){}}function Gt(){try{Wn.isAdLoaded&&wt("2")}catch(e){}jt(hn,0)}function Ht(e){ke("handlePagehide"),vn=!0,Gt()}function Vt(e){ke("handlePageshow:");try{hn&&hn.tagName&&(ke("handlePageShow: media tag is :"+hn.tagName),hn.akamai&&vn&&(ke("handlePageshow: send play and playing on timeupdate"),mn=!0))}catch(e){ke("Exception,  handlePagehsow : "+e)}vn=!1}function Kt(e){var t=e+"=",n="";try{document.cookie.length>0&&(offset=document.cookie.indexOf(t),offset!=-1&&(offset+=t.length,end=document.cookie.indexOf(";",offset),end==-1&&(end=document.cookie.length),n=document.cookie.substring(offset,end)))}catch(e){}return n}function Wt(e){try{var t=location.pathname.split("/"),n=" path=";document.cookie=e+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT;";for(var r=0;r<t.length;r++)n+=("/"!=n.substr(-1)?"/":"")+t[r],document.cookie=e+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT;"+n+";"}catch(e){}}function Yt(e,t,n){try{var r=e+"="+t+";Path=/;";if(n&&parseInt(n)>0){var i=new Date;i.setDate(i.getDate()+parseInt(n)),null!=i&&(r+="expires="+i.toUTCString()+";")}document&&(document.cookie=r)}catch(e){}}function zt(e,t){try{if("undefined"!=typeof e&&null!==e&&"undefined"!=typeof t&&null!==t){var n=e[qt(t.name)],r=on.SHA1(n).toString(),a=Xt(r),o=0,s=i();a&&(o=s-parseFloat(a),o=o/1e3/60,o=o>0?o.toFixed(2):0),Qt(r,s,t.expiryDuration),e[t.name]=o.toString()}}catch(e){ke("Exception,  calculateUniqueDimension :"+e)}}function qt(e){return dimension="","viewerInterval"===e?dimension="viewerId":"viewerTitleInterval"===e&&(dimension="title"),dimension}function Xt(e){try{var t=window.localStorage.getItem(e);if("undefined"!=typeof t&&null!==t){var n=JSON.parse(t),r=n.value;return r}}catch(e){}}function $t(){try{ke("deleteExpiredDataFromLocalStorage");for(var e=i(),t=null,n=window.localStorage.length,r=n-1;r>=0;r--){var a=window.localStorage.getItem(window.localStorage.key(r));if("undefined"!=typeof a&&null!==a&&a.indexOf("expiryDate")!==-1){var o=JSON.parse(a);"undefined"!=typeof o&&null!==o&&"undefined"!=typeof o.expiryDate&&null!==o.expiryDate&&(t=Date.parse(o.expiryDate),t<=e&&window.localStorage.removeItem(window.localStorage.key(r)))}}}catch(e){}}function Qt(e,t,n){try{var r={value:t};if("undefined"!=typeof n&&null!==n){var i=new Date;parseInt(n)>0?i.setDate(i.getDate()+parseInt(n)):i.setDate(i.getDate()+parseInt(90)),r.expiryDate=i.toDateString()}window.localStorage.setItem(e,JSON.stringify(r))}catch(e){}}function Zt(){try{if("iPad"==er||"iPhone"==er)return!0}catch(e){return!1}}function Jt(){try{hn.objectBased||hn.videoPassed?Bt():(ke("adding MediaEventListeners: DOMContentLoaded"),document.addEventListener("DOMContentLoaded",Bt,!1),ke("adding MediaEventListeners: Load"),document.addEventListener("load",Bt,!0))}catch(e){ke("Exception,  Addding DOMContentLoaded and Load event listeners :"+e)}if(window)if(Zt())window.addEventListener("pagehide",Ht,!1),window.addEventListener("pageshow",Vt,!1);else if("undefined"!=typeof akamaiBCVideoObject&&window.addEventListener)window.addEventListener("beforeunload",Gt,!1);else if(window.addEventListener)try{o()?window.parent.addEventListener("beforeunload",Gt,!1):window.addEventListener("beforeunload",Gt,!1)}catch(e){ke("Exception, add window document listeners : "+e),window.addEventListener("beforeunload",Gt,!1)}else if(window.attachEvent)try{o()?window.parent.attachEvent("onbeforeunload",Gt):window.attachEvent("onbeforeunload",Gt)}catch(e){window.attachEvent("onbeforeunload",Gt)}}var en="3.10.4",tn=document.currentScript,nn=null,rn=null,an=!0;tn?nn=tn.src:ke("Should be Internet Explorer");var on=on||function(e,t){var n={},r=n.lib={},i=r.Base=function(){function e(){}return{extend:function(t){e.prototype=this;var n=new e;return t&&n.mixIn(t),n.$super=this,n},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.$super.extend(this)}}}(),a=r.WordArray=i.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||s).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,e=e.sigBytes;if(this.clamp(),r%4)for(var i=0;i<e;i++)t[r+i>>>2]|=(n[i>>>2]>>>24-8*(i%4)&255)<<24-8*((r+i)%4);else if(65535<n.length)for(i=0;i<e;i+=4)t[r+i>>>2]=n[i>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-8*(n%4),t.length=e.ceil(n/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],r=0;r<t;r+=4)n.push(4294967296*e.random()|0);return a.create(n,t)}}),o=n.enc={},s=o.Hex={stringify:function(e){for(var t=e.words,e=e.sigBytes,n=[],r=0;r<e;r++){var i=t[r>>>2]>>>24-8*(r%4)&255;n.push((i>>>4).toString(16)),n.push((15&i).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-4*(r%8);return a.create(n,t/2)}},u=o.Latin1={stringify:function(e){for(var t=e.words,e=e.sigBytes,n=[],r=0;r<e;r++)n.push(String.fromCharCode(t[r>>>2]>>>24-8*(r%4)&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-8*(r%4);return a.create(n,t)}},l=o.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},d=r.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=a.create(),this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,i=n.sigBytes,o=this.blockSize,s=i/(4*o),s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0),t=s*o,i=e.min(4*t,i);if(t){for(var u=0;u<t;u+=o)this._doProcessBlock(r,u);u=r.splice(0,t),n.sigBytes-=i}return a.create(u,i)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});r.Hasher=d.extend({init:function(){this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize(),this._hash},clone:function(){var e=d.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:16,_createHelper:function(e){return function(t,n){return e.create(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return c.HMAC.create(e,n).finalize(t)}}});var c=n.algo={};return n}(Math);!function(){var e=on,t=e.lib,n=t.WordArray,t=t.Hasher,r=[],i=e.algo.SHA1=t.extend({_doReset:function(){this._hash=n.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,i=n[0],a=n[1],o=n[2],s=n[3],u=n[4],l=0;80>l;l++){if(16>l)r[l]=0|e[t+l];else{var d=r[l-3]^r[l-8]^r[l-14]^r[l-16];r[l]=d<<1|d>>>31}d=(i<<5|i>>>27)+u+r[l],d=20>l?d+((a&o|~a&s)+1518500249):40>l?d+((a^o^s)+1859775393):60>l?d+((a&o|a&s|o&s)-1894007588):d+((a^o^s)-899497514),u=s,s=o,o=a<<30|a>>>2,a=i,i=d}n[0]=n[0]+i|0,n[1]=n[1]+a|0,n[2]=n[2]+o|0,n[3]=n[3]+s|0,n[4]=n[4]+u|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;t[r>>>5]|=128<<24-r%32,t[(r+64>>>9<<4)+15]=n,e.sigBytes=4*t.length,this._process()}});e.SHA1=t._createHelper(i),e.HmacSHA1=t._createHmacHelper(i)}(),function(){var e=on,t=e.enc.Utf8;e.algo.HMAC=e.lib.Base.extend({init:function(e,n){e=this._hasher=e.create(),"string"==typeof n&&(n=t.parse(n));
var r=e.blockSize,i=4*r;n.sigBytes>i&&(n=e.finalize(n));for(var a=this._oKey=n.clone(),o=this._iKey=n.clone(),s=a.words,u=o.words,l=0;l<r;l++)s[l]^=1549556828,u[l]^=909522486;a.sigBytes=o.sigBytes=i,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,e=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(e))}})}(),function(){var e=on,t=e.lib,n=t.Base,r=t.WordArray,t=e.algo,i=t.HMAC,a=t.PBKDF2=n.extend({cfg:n.extend({keySize:4,hasher:t.SHA1,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,a=i.create(n.hasher,e),o=r.create(),s=r.create([1]),u=o.words,l=s.words,d=n.keySize,n=n.iterations;u.length<d;){var c=a.update(t).finalize(s);a.reset();for(var f=c.words,h=f.length,p=c,v=1;v<n;v++){p=a.finalize(p),a.reset();for(var m=p.words,g=0;g<h;g++)f[g]^=m[g]}o.concat(c),l[0]++}return o.sigBytes=4*d,o}});e.PBKDF2=function(e,t,n){return a.create(n).compute(e,t)}}();var sn=!1;if(window)try{sn=!!window.XDomainRequest}catch(e){sn=!1}var un={},ln={},dn=null,cn={eventCode:"",beaconId:"",sequenceId:"",logType:"",endOfStream:"",logVersion:"",formatVersion:"",visitId:"",errorCode:"",partNumber:"",totalParts:"",hostName:"",streamName:"",port:"",protocol:"",userAgent:"",playerType:"",os:"",format:"",connectTime:"",bufferingTime:"",startupTime:"",streamLength:"",bytesTotal:"",browser:"",browserSize:"",videoSize:"",streamUrl:"",deliveryType:"",pluginVersion:"",beaconVersion:"",serverIp:"",playerFormat:"",outlierStartupTime:"",isFirstTitle:"",rebufferSessionH:"",sequenceIdH:"",isSessionWithRebufferH:"",playerState:"",currentStreamTime:"",currentClockTime:"",playClockTime:"",playStreamTime:"",rebufferCount:"",rebufferTime:"",pauseCount:"",pauseDuration:"",pauseIntervalsAsString:"",seekCount:"",seekTime:"",seekIntervalsAsString:"",pauseSeekSession:"",resumeBufferCount:"",resumeBufferTime:"",isView:"",isSessionWithRebuffer:"",logInterval:"",rebufferSession:"",socialSharing:"",endReasonCode:"",totalPlayClockTime:"",totalPlayStreamTime:"",totalRebufferCount:"",totalRebufferTime:"",totalAdPlayClockTime:"",totalAdStartCount:"",totalAdAbandonCount:"",lastHTime:"",isVisitStart:"",isVisitEnd:"",visitAttempts:"",visitPlays:"",visitViews:"",visitErrors:"",visitInterval:"",visitPlayClockTime:"",visitPlayStreamTime:"",visitRebufferCount:"",visitRebufferTime:"",visitStartupErrors:"",visitAdPlayClockTime:"",visitAdStartCount:"",visitAdAbandonCount:"",visitUniqueTitles:"",adAbandonCount:"",adPauseTime:"",adStartupTime:"",adPlayClockTime:"",adCount:"",adSession:"",sessionId:"",attemptId:"",playerReferrer:"",ais_idpId:"",ais_idpName:"",ais_idpDisplayName:"",ais_idpUrl:"",ais_queryToken:"",ais_aisuid:"",qualityOfExperience:"",transitionStreamTimeSession:"",transitionUpSwitchCount:"",transitionDownSwitchCount:"",averagedBitRate:"",fullOs:"",longitude:"",latitude:"",connectivity:""},fn={title:!1,category:!1,subCategory:!1,show:!1,contentLength:!1,contentType:!1,device:!1,deliveryType:!1,playerId:!1,eventName:!1},hn={},pn={};hn.isBrightcoveVideo=!1,hn.objectBased=!1,hn.videoPassed=!1;var vn=!1,mn=!1,gn=!1,yn={},bn={},En=!1,_n=[],Tn={timer:null,queue:[],browserClose:!1,enabled:!0,time:250},Sn={},An=[],Ln={},Rn={},On={};On.seekThreshold=2e3,On.visitTimeout=36e5;var kn={},wn={},Dn={},Pn={},In=100,xn={},Cn=!1,Mn=!1,Nn={fastTCPFailed:!1,fastTCPEnabled:!1},Fn=[],Bn={};Bn.dataSent={};var Un=1,jn=-1,Gn={},Hn=[],Vn={pageURLCsmaDebug:0,configURLCsmaDebug:0,configDebug:0,windowOpened:!1,logStoredMsg:!0,printException:!1},Kn=new a,Wn={setDataArr:["adId","adDuration","adTitle","adCategory","adPartnerId","adServer","adDaypart","adIndustryCategory","adEvent"],clearAdAnalytics:function(){this.isAdLoaded=!1,this.isAdStarted=!1,this.id="",this.type="0",this.startPos="0",this.playBucket="-1",this.endStatus="2",this.adLoadTime=null,this.adStartTime=null,this.adStartupTime="0";for(var e=0;e<this.setDataArr.length;e++)this[this.setDataArr[e]]=""}},Yn={bitRateArr:[],currentBitRate:"-",currentStartPos:0,bitRateCount:{},bitRatePlayTime:{},bitRateBucketMap:{},clearBitRate:function(){this.bitRateArr=[],this.currentBitRate="-",this.bitRateCount={},this.bitRatePlayTime={}},updateBitRateArr:function(e){if(this.bitRateArr.length>0){var t=this.bitRateArr.length,n=Yn.bitRateArr[t-1];this.currentBitRate==n.bitRate?n.playTime+=e:this.pushInBitRateArr(e,this.currentBitRate,this.currentStartPos)}else this.pushInBitRateArr(e,this.currentBitRate,this.currentStartPos)},pushInBitRateArr:function(e,t,n){this.bitRateArr.push({bitRate:t,playTime:e,startPos:n})},populateBitRateBucketMap:function(e,t){var n,r=!1,i=Pn.bitRateBucketTimes;"-"!=e&&""!==e&&(e=parseInt(e/1e3));for(var a in i)if(r=!1,n=i[a],"-"==e||""===e||e<0){if(!n.max&&!n.min){r=!0;break}}else if(n.max&&n.min){if(e>=n.min&&e<n.max){r=!0;break}}else if(n.max){if(e<n.max){r=!0;break}}else if(n.min&&e>=n.min){r=!0;break}r&&(this.bitRateBucketMap[a]+=t)},findMaxPersistentBitRate:function(){try{if(this.bitRatePlayTime){var e=0,t=-1;for(var n in this.bitRatePlayTime)this.bitRatePlayTime[n]>t&&(t=this.bitRatePlayTime[n],e=n);if(0!==e)return e}}catch(e){ke("Exception, find max persistent bit rate")}},getTransitionSession:function(e){try{var t,n,r,i=null,a="",o=0,s=0,u=0,l=!0;this.bitRateArr.length>0&&(t=this.bitRateArr[0],"-"==t.bitRate&&(l=!1,this.bitRateArr[1]&&"-"!=this.bitRateArr[1].bitRate&&(l=!0,this.bitRateArr[1].startPos=this.bitRateArr[0].startPos,this.bitRateArr[1].playTime+=this.bitRateArr[0].playTime,this.bitRateArr.shift())));for(n in this.bitRateBucketMap)this.bitRateBucketMap[n]=0;for(o=0;o<this.bitRateArr.length;o++){t=this.bitRateArr[o],t.bitRate in this.bitRateCount?0!=o&&this.bitRateCount[t.bitRate]++:this.bitRateCount[t.bitRate]=1,""!=t.bitRate&&"-"!=t.bitRate&&(t.bitRate in this.bitRatePlayTime?this.bitRatePlayTime[t.bitRate]+=t.playTime:this.bitRatePlayTime[t.bitRate]=t.playTime),r=this.bitRateCount[t.bitRate],i?i+=","+t.bitRate+":"+t.startPos+":"+t.playTime+"::"+r:i=t.bitRate+":"+t.startPos+":"+t.playTime+"::"+r,this.populateBitRateBucketMap(t.bitRate,t.playTime);try{l&&(s+=t.bitRate*t.playTime,u+=t.playTime)}catch(e){}}e.maxPersistentBitRate=this.findMaxPersistentBitRate(),e.transitionStreamTimeSession=i;for(n in this.bitRateBucketMap)a?a+=","+n+":"+this.bitRateBucketMap[n]:a=n+":"+this.bitRateBucketMap[n];e.bitRateBucketTimes=a;try{l&&u&&0!=u?e.averagedBitRate=s+":"+u:e.averagedBitRate=null}catch(e){}}catch(e){ke("Exception, get transition Session :"+e)}}},zn={Invalid:"Invalid",InPorgress:"InProgress",Completed:"Completed"},qn=function(e,t){this.id=e,this.bitrate=t,this.timeStamp=(new Date).getTime(),this.state=zn.InPorgress,this.downloadTime=0,this.bytesDownloaded=0},Xn=function(){this.fragments={},this.fragmentId=0,this.downloadStarted=function(e){var t=new qn(this.fragmentId,e);this.fragments[this.fragmentId.toString()]=t},this.cleanup=function(){for(var e in this.fragments)delete this.fragments[e]},this.downloadCompleted=function(e,t){if(this.fragments[this.fragmentId.toString()]&&this.fragments[this.fragmentId.toString()].state!==zn.Completed){var n=this.fragments[this.fragmentId.toString()],r=(new Date).getTime();n.downloadTime=r-n.timeStamp,n.state=zn.Completed,t?(n.bytesDownloaded=t,console.log("bytesDownloaded reported = "+t)):(n.bytesDownloaded=e*n.downloadTime,console.log("bytesDownloaded not reported and calculated one is = "+n.bytesDownloaded)),this.fragmentId++}}},$n=function(){var e=0,t=new Xn;this.streamFragmentDownloadStarted=function(n){t.downloadStarted(n),e!==n&&We(n)},this.streamFragmentDownloadCompleted=function(e){t.downloadCompleted(e,0)},this.cleanupFragments=function(){t.cleanup()},this.getBandwidthFromFragments=function(){var e=0,n=0;for(index in t.fragments){var r=t.fragments[index];r.state===zn.Completed&&r.bytesDownloaded&&(e+=r.bytesDownloaded,n+=r.downloadTime)}return 0===n?0:e/n}},Qn="";(function(){if("undefined"!=typeof akamaiBCVideoObject)try{var t=document.getElementsByTagName("script"),n=0,r="";if(t.length)for(n=0;n<t.length;n++)null==t[n].src||t[n].src.indexOf("79423.analytics.edgesuite.net")==-1&&t[n].src.indexOf("79423.analytics.edgekey.net")==-1||(Qn=t[n].src,r=V("configPath",t[n].src),""!=r&&(yn.url=r))}catch(e){}else e&&e.configPath?(yn.url=e.configPath,hn.objectBased=!0):yn.url=AKAMAI_MEDIA_ANALYTICS_CONFIG_FILE_PATH;try{if(window){var i=null;o()?(i=V("AkamaiAnalytics_configPath",window.parent.location),i&&(yn.url=i)):(i=V("AkamaiAnalytics_configPath",window.location),i&&(yn.url=i))}}catch(e){}if(yn.url){var a=parseInt(V("enableGenericAPI",yn.url));1==a&&(hn.objectBased=!0),yn.beaconSent=parseInt(V("beaconSentNotify",yn.url));var s=parseInt(V("setVideoObject",yn.url));1==s&&(hn.videoPassed=!0);var u=parseInt(V("subscribeVideo",yn.url));1==u&&(hn.videoPassed=!0);var l=parseInt(V("exception",yn.url));1==l&&(Vn.printException=!0),Vn.configURLCsmaDebug=parseInt(V("debug",yn.url))}})();try{window&&(o()?Vn.pageURLCsmaDebug=parseInt(V("AkamaiAnalytics_debug",window.parent.location)):Vn.pageURLCsmaDebug=parseInt(V("AkamaiAnalytics_debug",window.location)))}catch(e){}try{"undefined"!=typeof akamaiBCVideoObject&&"undefined"!=typeof brightcovePerforceVersion&&nt("std:pluginVersion","Brightcove-"+brightcovePerforceVersion)}catch(e){ke("Exception,  pluginVersion: "+e)}u(),v(g,yn.url,!1,!0),this.getValueFromQueryString=function(){return V(key,searchURL)},this.logMessage=function(e,t){ke(e,t)};var Zn="AkamaiAnalytics_BrowserSessionId",Jn=null,er=null,tr=null,nr=null,rr=null,ir=null,ar=null;navigator&&navigator.userAgent&&(ar=navigator.userAgent),Pe(),xe(),Ce();var or,sr={ended:0,init:1,playing:2,pause:3,seek:4,rebuffering:5,resumeBuffering:6},ur=[0,0,0,0,0,0,0,0,0,0,0,0],lr=[0,0,0,0,0,0,0,0,0,0,0,0],dr="0,0,0,0,0,0,0,0";hn.akamai=new Ne(hn);var cr=["UNKNOWN","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED"];this.getViewerId=function(){try{var e=hn.akamai;return e&&e.viewerId?e.viewerId:null}catch(e){return null}},this.setData=function(e,t){nt(e,t)},this.handleStreamSwitch=function(){it()},this.handleTitleSwitch=function(e){at(e)},this.handleFeedbackEvent=function(){ot()},this.handleApplicationExit=function(){st()},this.enableServerIpLookUp=function(){an=!0},this.disableServerIpLookUp=function(){an=!1},this.enableLocation=function(e){Je(e)},this.handleSessionInit=function(t,n){try{t&&("object"!=typeof e&&(e={}),t.streamHeadPosition&&(e.streamHeadPosition=t.streamHeadPosition),t.streamLength&&(e.streamLength=t.streamLength),t.streamURL&&(e.streamURL=t.streamURL),t.bytesLoaded&&(e.bytesLoaded=t.bytesLoaded),t.customDataFunction&&(e.customDataFunction=t.customDataFunction),e.customDataFunction&&(dn=e.customDataFunction),t.firstBitRate&&(e.firstBitRate=t.firstBitRate),e.firstBitRate&&We(e.firstBitRate,n)),Ye(hn,n)}catch(e){}},this.handleBitRateSwitch=function(e,t){We(e,t)},this.handlePlaying=function(e){Ye(hn,e),ze(hn,e)},this.handlePlayEnd=function(e,t){hn.objectBased&&(hn.endReason=e),$e(hn,t)},this.handleMediaChangedEvent=function(){Qe(hn)},this.handlePause=function(e){Ke(hn,e)},this.handleResume=function(e){Ye(hn,e),ze(hn,e)},this.handleBufferStart=function(e){qe(hn,e)},this.handleBufferEnd=function(e){Ye(hn,e),ze(hn,e)},this.handleError=function(e,t){try{hn.objectBased&&(hn.errorReason=e),Xe(hn,t)}catch(e){}},this.handleTimeupdateEvent=function(){ut(hn)},this.updateAdObject=function(e){kt(e)},this.handleAdLoaded=function(e,t){try{Et(e,t)}catch(e){}},this.handleAdStarted=function(e,t){_t(e,t)},this.handleAdCompleted=function(e){Tt(e)},this.handleAdFirstQuartile=function(){St()},this.handleAdMidPoint=function(){At()},this.handleAdThirdQuartile=function(){Lt()},this.handleAdStopped=function(e){Rt(e)},this.handleAdError=function(e){Ot(e)},this.handleSetupAISEvent=function(e,t,n){lt(e,t,n)},this.getStream=function(){var e=hn.akamai;return e.stream},this.receiveAISInitRequest=function(e){try{if(Kn.initObj=e,ft(Kn.initUrlId),""==Kn.initObj||null==Kn.initObj)return void(Kn.requestFailed=!0);if(Kn.requestFailed)return;if(Kn.initObj.authenticated){if(Kn.akamai={},Kn.akamai.ais_queryToken=Kn.initObj.querytoken,Kn.initObj.idps){var t=Kn.initObj.idps;for(var n in t)Kn.akamai.ais_idpId=n,Kn.akamai.ais_idpName=t[n].name,Kn.akamai.ais_idpDisplayName=t[n].display_name,Kn.akamai.ais_idpUrl=t[n].url}ct(Kn.identityUrl,Kn.identityUrlId)}else Kn.requestFailed||(ke("receiveAISInitRequest, retrying the request"),++Kn.aisRetries,Kn.aisRetries<Kn.aisRequestLimit&&(Kn.retryTimer=W(ct,Kn.aisRequestInterval,[Kn.initUrl,Kn.initUrlId])))}catch(e){Kn.requestFailed=!0}},this.receiveAISIdentityRequest=function(e){try{if(Kn.identityObj=e,ft(Kn.identityUrlId),null==e||""==e)return;Kn.akamai||(Kn.akamai={}),e.indentity&&e.identity.aisuid&&(Kn.akamai.ais_aisuid=e.identity.aisuid),dt()}catch(e){Kn.requestFailed=!0}},this.subscribeVideoObject=function(e){try{e&&Nt(e)}catch(e){}},Jt()}"undefined"!=typeof akamaiBCVideoObject?akaMediaAnalytics=new n(null):"undefined"!=typeof AKAMAI_MEDIA_ANALYTICS_CONFIG_FILE_PATH&&AKAMAI_MEDIA_ANALYTICS_CONFIG_FILE_PATH.indexOf("enableGenericAPI=1")==-1&&AKAMAI_MEDIA_ANALYTICS_CONFIG_FILE_PATH.indexOf("subscribeVideo")==-1&&(akaMediaAnalytics=new n(null)),e.exports=n},29:function(e,t,n){e.exports=n(20)}})})},function(e,t,n){!function(t,n){e.exports=n()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=30)}({18:function(e,t){function n(e){function t(){var e={"2cnt.net":{syncrates:[3,7,10,10,10,10,10,60]}};return e}function n(e){var t;if(e){for(var n in e)n==M&&(t=e[n]);t&&r(t.syncrates)}}function r(e){e&&(G=e)}function i(){return G}function a(e,t,n){if(void 0===j.pageContext&&(j.pageContext=j.defaultPageContext),e){var r=new y(this,e,t,n);return U.push(r),r}}function o(){setInterval(u,N),setInterval(l,F)}function s(){for(var e=0;e<U.length;++e)try{U[e].stop()}catch(e){d(e)}}function u(e){for(var t=0;t<U.length;++t)try{U[t].update(e)}catch(e){d(e)}}function l(e){for(var t=0;t<U.length;++t)try{U[t].sync(e)}catch(e){d(e)}}function d(e){m("",e)}function c(e,t){return g([[e,t]])}function f(e){return e&&void 0!=e.site?e.site:B}function h(e){}function p(){return void 0===j.pageContext.getWindowLocationURL()?"http://":"https"==j.pageContext.getWindowLocationURL().slice(0,5)?"https://ssl-":"http://"}function v(){if(!this.nlso)try{var e="";if(e=j.pageContext.getLocalStorageItem("i00"))return"&c="+e;var t="0000",n=t+Math.ceil((new Date).getTime()/1e3).toString(16)+(32768|65535*Math.random()).toString(16)+t;j.pageContext.setLocalStorageItem("i00",n)}catch(e){console.log("error"+e)}return""}function m(e,t){var n=p()+f(t)+"."+M+"/j0="+c(e,t)+"?lt="+(new Date).getTime().toString(36)+v();j.pageContext.preloadImage(n),this.debug(n)}function g(e){var t,n,r,i,a,o,s=/[+&,;=~]/g;switch(typeof e){case"string":return s.test(e)?escape(e).replace(s,function(e){var t=o[e];return t?t:e}):escape(e);case"number":return isFinite(e)?e.toString():"null";case"boolean":case"null":return e.toString();case"object":if(!e)return"null";if(t=[],"number"==typeof e.length&&!e.propertyIsEnumerable("length")){for(i=e.length,n=0;n<i;n+=1)t.push(g(e[n])||"null");return","+t.join("+")+";"}for(r in e)"string"==typeof r&&"site"!=r&&(a=g(e[r]),a&&t.push(g(r)+"="+a));return","+t.join("+")+";"}return""}function y(e,t,n,r){function i(e){var t=new Object;for(var n in e)t[n]=e[n];return t}function a(e){p.length<f.maxstates&&p.push(e)}function o(e){T=[e,e,Math.round((new Date).getTime()/1e3).toString(36)],a(T),L=!0,S=0}function s(){null!=y&&b<y.length&&(g=y[b++],f.debug("switch syncrate to "+g))}function u(e){if(!R){var t=T[1],n=t;try{n=Math.round(m.getPosition(h))}catch(e){}try{if(t==n)return void(S>=0&&(S++,S==f.pausesync&&(L=!0)));S>=f.pausesync?o(n):t<n-1?o(n):t>n?o(n):(T[1]=n,T[1]-T[0]>=g&&n-A>=g&&(L=!0,s()),S=0)}catch(e){d=!0,f.error(e)}}}function l(){R||(L=!0,R=!0,c(null))}function c(e){if(L){try{h.width&&(v.sx=h.width),h.videoWidth&&(v.sx=h.videoWidth),h.height&&(v.sy=h.height),h.videoHeight&&(v.sy=h.videoHeight)}catch(e){}void 0!==j.pageContext.getDeviceID&&void 0!==j.pageContext.getDeviceID()&&(v[j.pageContext.getDeviceID().id_name]=j.pageContext.getDeviceID().id_value),v.uid=E,v.pst=p;var t;try{v.dur&&0!=v.dur||(v.dur=m.getDuration(h))}catch(e){}try{t=m.getMeta(h)}catch(e){}v.vt=Math.round((new Date).getTime()/1e3)-_,f.send(t,v),A=T[1]}L=!1}var f,h,p,v,m,g,y,b,E=Math.round(1e10*Math.random()).toString(36),_=Math.round((new Date).getTime()/1e3),T=[0,0,_.toString(36)],S=0,A=0,L=!0,R=!1;f=e,h=t,m=r?r:f.HTML5Adapter,v=i(n),p=new Array,p.push(T),b=0,g=e.syncrate,y=e.getSyncRates(),s(),this.update=u,this.stop=l,this.sync=c}function b(e){return{pl:"HTML 5 Video",pv:"HTML 5",sx:screen.width,sy:screen.height}}function E(e){return Math.round(e.duration)}function _(e){return e.currentTime}function T(e){return{pl:"DEF",pv:version,sx:screen.width,sy:screen.height}}function S(e){return(new Date).getTime()/1e3}function A(e){return 0}function L(e){return{pl:"MSWM",plv:e.versionInfo,sx:screen.width,sy:screen.height}}function R(e){return e.CurrentPosition?e.CurrentPosition:e.currentPosition?e.currentPosition:e.controls&&e.controls.currentPosition?e.controls.currentPosition:e.Controls&&e.Controls.currentPosition?e.Controls.currentPosition:0}function O(e){if(e.currentMedia){if(e.currentMedia.Duration)return e.currentMedia.Duration;if(e.currentMedia.duration)return e.currentMedia.duration}else if(e.CurrentMedia){if(e.CurrentMedia.duration)return e.CurrentMedia.duration;if(e.CurrentMedia.Duration)return e.CurrentMedia.Duration}}function k(e){return{pl:"RV",plv:e.GetVersionInfo(),sx:screen.width,sy:screen.height}}function w(e){return e.GetPosition()/1e3}function D(e){return e.GetLength()/1e3}function P(e,t){localStorage.setItem(e,t)}function I(e){return localStorage.getItem(e)}function x(e){(new Image).src=e}function C(){return document.location.href}this.version="2.0.0";var M="tns-cs.net",N=200,F=2e3,B="default",U=new Array;this.namespace="com.kma.springstreams",this.syncrate=20,this.pausesync=6,this.maxstates=50;var j=this;this.pageContext;var G;n(t()),e&&(B=e),o(),this.getSyncRates=i,this.track=a,this.unload=s,this.doUpdate=u,this.doSync=l,this.error=d,this.debug=h,this.send=m,this.defaultPageContext={getLocalStorageItem:I,setLocalStorageItem:P,preloadImage:x,getWindowLocationURL:C},this.HTML5Adapter={getMeta:b,getPosition:_,getDuration:E},this.DefaultAdapter={getMeta:T,getPosition:S,getDuration:A},this.WMStreamAdapter={getMeta:L,getPosition:R,getDuration:O},this.RVStreamAdapter={getMeta:k,getPosition:w,getDuration:D}}n.prototype.setPageContext=function(e){this.pageContext=e},e.exports=n},30:function(e,t,n){e.exports=n(18)}})})},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(27),s=i(o),u=n(4),l=i(u),d=n(1),c=i(d),f=n(3),h=i(f),p=n(9),v=i(p),m=n(26),g=i(m),y=n(7),b=i(y),E=n(11),_=i(E),T=n(10),S=i(T),A=n(25),L=i(A),R=n(8),O=i(R),k=n(28),w=i(k),D=n(6),P=r(D);e.exports=a({ludo:w.default,LudoError:l.default,LudoEvents:c.default,LudoOptions:h.default,LudoMediaTypes:v.default,LudoErrorMessageHandler:g.default,LudoMediaItem:s.default,LudoHTML5PlayerAdapter:S.default,LudoHLSPlayerAdapter:L.default,LudoPlayerAdapterInterface:b.default,LudoLivePlayerAdapter:_.default,ludoHlsDetails:O.default},P)},2,5,22,20,function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="\\d+(?:[\\.,]\\d{0,3})?",r="("+n+"W)",i="("+n+"Y)?("+n+"M)?("+n+"D)?",a="T("+n+"H)?("+n+"M)?("+n+"S)?",o="P(?:"+r+"|"+i+"(?:"+a+")?)",s=["weeks","years","months","days","hours","minutes","seconds"],u=t.pattern=new RegExp(o),l=t.parse=function(e){return e.match(u).slice(1).reduce(function(e,t,n){return e[s[n]]=parseFloat(t)||0,e},{})},d=t.toSeconds=function(e,t){var n=t?t.getTime():Date.now(),r=new Date(n),i=new Date(n);i.setFullYear(i.getFullYear()+e.years),i.setMonth(i.getMonth()+e.months),i.setDate(i.getDate()+e.days),i.setHours(i.getHours()+e.hours),i.setMinutes(i.getMinutes()+e.minutes),i.setMilliseconds(i.getMilliseconds()+1e3*e.seconds),i.setDate(i.getDate()+7*e.weeks);var a=(i.getTime()-r.getTime())/1e3;return a};t.default={toSeconds:d,pattern:u,parse:l}},function(e,t){(function(t){function n(e,t){return null==e?void 0:e[t]}function r(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function i(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function a(){this.__data__=me?me(null):{}}function o(e){return this.has(e)&&delete this.__data__[e]}function s(e){var t=this.__data__;if(me){var n=t[e];return n===V?void 0:n}return de.call(t,e)?t[e]:void 0}function u(e){var t=this.__data__;return me?void 0!==t[e]:de.call(t,e)}function l(e,t){var n=this.__data__;return n[e]=me&&void 0===t?V:t,this}function d(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function c(){this.__data__=[]}function f(e){var t=this.__data__,n=T(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():pe.call(t,n,1),!0}function h(e){var t=this.__data__,n=T(t,e);return n<0?void 0:t[n][1]}function p(e){return T(this.__data__,e)>-1}function v(e,t){var n=this.__data__,r=T(n,e);return r<0?n.push([e,t]):n[r][1]=t,this}function m(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function g(){this.__data__={hash:new i,map:new(ve||d),string:new i}}function y(e){return O(this,e).delete(e)}function b(e){return O(this,e).get(e)}function E(e){return O(this,e).has(e)}function _(e,t){return O(this,e).set(e,t),this}function T(e,t){for(var n=e.length;n--;)if(M(e[n][0],t))return n;return-1}function S(e,t){t=w(t,e)?[t]:R(t);for(var n=0,r=t.length;null!=e&&n<r;)e=e[I(t[n++])];return n&&n==r?e:void 0}function A(e){if(!F(e)||P(e))return!1;var t=N(e)||r(e)?fe:ee;return t.test(x(e))}function L(e){if("string"==typeof e)return e;if(U(e))return ye?ye.call(e):"";var t=e+"";return"0"==t&&1/e==-K?"-0":t}function R(e){return Ee(e)?e:be(e)}function O(e,t){var n=e.__data__;return D(t)?n["string"==typeof t?"string":"hash"]:n.map}function k(e,t){var r=n(e,t);return A(r)?r:void 0}function w(e,t){if(Ee(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!U(e))||(X.test(e)||!q.test(e)||null!=t&&e in Object(t))}function D(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function P(e){return!!ue&&ue in e}function I(e){if("string"==typeof e||U(e))return e;var t=e+"";return"0"==t&&1/e==-K?"-0":t}function x(e){if(null!=e){try{return le.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function C(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError(H);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o),o};return n.cache=new(C.Cache||m),n}function M(e,t){return e===t||e!==e&&t!==t}function N(e){var t=F(e)?ce.call(e):"";return t==W||t==Y}function F(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function B(e){return!!e&&"object"==typeof e}function U(e){return"symbol"==typeof e||B(e)&&ce.call(e)==z}function j(e){return null==e?"":L(e)}function G(e,t,n){var r=null==e?void 0:S(e,t);return void 0===r?n:r}var H="Expected a function",V="__lodash_hash_undefined__",K=1/0,W="[object Function]",Y="[object GeneratorFunction]",z="[object Symbol]",q=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,X=/^\w*$/,$=/^\./,Q=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Z=/[\\^$.*+?()[\]{}|]/g,J=/\\(\\)?/g,ee=/^\[object .+?Constructor\]$/,te="object"==typeof t&&t&&t.Object===Object&&t,ne="object"==typeof self&&self&&self.Object===Object&&self,re=te||ne||Function("return this")(),ie=Array.prototype,ae=Function.prototype,oe=Object.prototype,se=re["__core-js_shared__"],ue=function(){var e=/[^.]+$/.exec(se&&se.keys&&se.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),le=ae.toString,de=oe.hasOwnProperty,ce=oe.toString,fe=RegExp("^"+le.call(de).replace(Z,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),he=re.Symbol,pe=ie.splice,ve=k(re,"Map"),me=k(Object,"create"),ge=he?he.prototype:void 0,ye=ge?ge.toString:void 0;i.prototype.clear=a,i.prototype.delete=o,i.prototype.get=s,i.prototype.has=u,i.prototype.set=l,d.prototype.clear=c,d.prototype.delete=f,d.prototype.get=h,d.prototype.has=p,d.prototype.set=v,m.prototype.clear=g,m.prototype.delete=y,m.prototype.get=b,m.prototype.has=E,m.prototype.set=_;var be=C(function(e){e=j(e);var t=[];return $.test(e)&&t.push(""),e.replace(Q,function(e,n,r,i){t.push(r?i.replace(J,"$1"):n||e)}),t});C.Cache=m;var Ee=Array.isArray;e.exports=G}).call(t,function(){return this}())},function(e,t,n){(function(t){"use strict";var r=n(47),i=Number.isNaN||function(e){return e!==e},a=Number.isFinite||function(e){return"number"==typeof e&&t.isFinite(e)},o=Array.prototype.indexOf;e.exports=function(e){var t=arguments.length>1?r.ToInteger(arguments[1]):0;if(o&&!i(e)&&a(t)&&"undefined"!=typeof e)return o.apply(this,arguments)>-1;var n=r.ToObject(this),s=r.ToLength(n.length);if(0===s)return!1;for(var u=t>=0?t:Math.max(0,s+t);u<s;){if(r.SameValueZero(e,n[u]))return!0;u+=1}return!1}}).call(t,function(){return this}())},function(e,t,n){"use strict";var r=n(44);e.exports=function(){return Array.prototype.includes||r}},function(e,t,n){"use strict";var r=n(84),i=n(78),a="function"==typeof Symbol&&"symbol"==typeof Symbol(),o=Object.prototype.toString,s=function(e){return"function"==typeof e&&"[object Function]"===o.call(e)},u=function(){var e={};try{Object.defineProperty(e,"x",{enumerable:!1,value:e});for(var t in e)return!1;return e.x===e}catch(e){return!1}},l=Object.defineProperty&&u(),d=function(e,t,n,r){(!(t in e)||s(r)&&r())&&(l?Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n,writable:!0}):e[t]=n)},c=function(e,t){var n=arguments.length>2?arguments[2]:{},o=r(t);a&&(o=o.concat(Object.getOwnPropertySymbols(t))),i(o,function(r){d(e,r,t[r],n[r])})};c.supportsDescriptors=!!l,e.exports=c},function(e,t,n){"use strict";var r=Object.prototype.toString,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator,a=i?Symbol.prototype.toString:r,o=n(49),s=n(48),u=Number.MAX_SAFE_INTEGER||Math.pow(2,53)-1,l=n(74),d=n(51),c=n(50),f=n(75),h=n(77),p=parseInt,v=n(53),m=v.call(Function.call,String.prototype.slice),g=v.call(Function.call,RegExp.prototype.test,/^0b[01]+$/i),y=v.call(Function.call,RegExp.prototype.test,/^0o[0-7]+$/i),b=["","​","￾"].join(""),E=new RegExp("["+b+"]","g"),_=v.call(Function.call,RegExp.prototype.test,E),T=/^[-+]0x[0-9a-f]+$/i,S=v.call(Function.call,RegExp.prototype.test,T),A=["\t\n\v\f\r   ᠎    ","         　\u2028","\u2029\ufeff"].join(""),L=new RegExp("(^["+A+"]+)|(["+A+"]+$)","g"),R=v.call(Function.call,String.prototype.replace),O=function(e){return R(e,L,"")},k=n(73),w=n(82),D=l(l({},k),{Call:function(e,t){var n=arguments.length>2?arguments[2]:[];if(!this.IsCallable(e))throw new TypeError(e+" is not a function");return e.apply(t,n)},ToPrimitive:h,ToNumber:function(e){var t=f(e)?e:h(e,"number");if("symbol"==typeof t)throw new TypeError("Cannot convert a Symbol value to a number");if("string"==typeof t){if(g(t))return this.ToNumber(p(m(t,2),2));if(y(t))return this.ToNumber(p(m(t,2),8));if(_(t)||S(t))return NaN;var n=O(t);if(n!==t)return this.ToNumber(n)}return Number(t)},ToInt16:function(e){var t=this.ToUint16(e);return t>=32768?t-65536:t},ToInt8:function(e){var t=this.ToUint8(e);return t>=128?t-256:t},ToUint8:function(e){var t=this.ToNumber(e);if(o(t)||0===t||!s(t))return 0;var n=d(t)*Math.floor(Math.abs(t));return c(n,256)},ToUint8Clamp:function(e){var t=this.ToNumber(e);if(o(t)||t<=0)return 0;if(t>=255)return 255;var n=Math.floor(e);return n+.5<t?n+1:t<n+.5?n:n%2!==0?n+1:n},ToString:function(e){if("symbol"==typeof e)throw new TypeError("Cannot convert a Symbol value to a string");return String(e)},ToObject:function(e){return this.RequireObjectCoercible(e),Object(e)},ToPropertyKey:function(e){var t=this.ToPrimitive(e,String);return"symbol"==typeof t?a.call(t):this.ToString(t)},ToLength:function(e){var t=this.ToInteger(e);return t<=0?0:t>u?u:t},CanonicalNumericIndexString:function(e){if("[object String]"!==r.call(e))throw new TypeError("must be a string");if("-0"===e)return-0;var t=this.ToNumber(e);return this.SameValue(this.ToString(t),e)?t:void 0},RequireObjectCoercible:k.CheckObjectCoercible,IsArray:Array.isArray||function(e){return"[object Array]"===r.call(e)},IsConstructor:function(e){return"function"==typeof e&&!!e.prototype},IsExtensible:function(e){return!Object.preventExtensions||!f(e)&&Object.isExtensible(e)},IsInteger:function(e){if("number"!=typeof e||o(e)||!s(e))return!1;var t=Math.abs(e);return Math.floor(t)===t},IsPropertyKey:function(e){return"string"==typeof e||"symbol"==typeof e},IsRegExp:function(e){if(!e||"object"!=typeof e)return!1;if(i){var t=e[Symbol.match];if("undefined"!=typeof t)return k.ToBoolean(t)}return w(e)},SameValueZero:function(e,t){return e===t||o(e)&&o(t)},GetV:function(e,t){if(!this.IsPropertyKey(t))throw new TypeError("Assertion failed: IsPropertyKey(P) is not true");var n=this.ToObject(e);return n[t]},GetMethod:function(e,t){if(!this.IsPropertyKey(t))throw new TypeError("Assertion failed: IsPropertyKey(P) is not true");var n=this.GetV(e,t);if(null!=n){if(!this.IsCallable(n))throw new TypeError(t+"is not a function");return n}},Get:function(e,t){if("Object"!==this.Type(e))throw new TypeError("Assertion failed: Type(O) is not Object");if(!this.IsPropertyKey(t))throw new TypeError("Assertion failed: IsPropertyKey(P) is not true");return e[t]},Type:function(e){return"symbol"==typeof e?"Symbol":k.Type(e)},SpeciesConstructor:function(e,t){if("Object"!==this.Type(e))throw new TypeError("Assertion failed: Type(O) is not Object");var n=e.constructor;if("undefined"==typeof n)return t;if("Object"!==this.Type(n))throw new TypeError("O.constructor is not an Object");var r=i&&Symbol.species?n[Symbol.species]:void 0;if(null==r)return t;if(this.IsConstructor(r))return r;throw new TypeError("no constructor found")}});delete D.CheckObjectCoercible,e.exports=D},function(e,t){var n=Number.isNaN||function(e){return e!==e};e.exports=Number.isFinite||function(e){return"number"==typeof e&&!n(e)&&e!==1/0&&e!==-(1/0)}},function(e,t){e.exports=Number.isNaN||function(e){return e!==e}},function(e,t){e.exports=function(e,t){var n=e%t;return Math.floor(n>=0?n:n+t)}},function(e,t){e.exports=function(e){return e>=0?1:-1}},function(e,t){e.exports=function(e){return null===e||"function"!=typeof e&&"object"!=typeof e}},function(e,t,n){var r=n(79);e.exports=Function.prototype.bind||r},37,2,5,22,[99,98],42,function(e,t){(function(t){function n(e,t,n){function r(t){var n=v,r=m;return v=m=void 0,A=t,y=e.apply(r,n)}function a(e){return A=e,b=setTimeout(d,t),L?r(e):y}function o(e){var n=e-E,r=e-A,i=t-n;return R?T(i,g-r):i}function l(e){var n=e-E,r=e-A;return void 0===E||n>=t||n<0||R&&r>=g}function d(){var e=S();return l(e)?c(e):void(b=setTimeout(d,o(e)))}function c(e){return b=void 0,O&&v?r(e):(v=m=void 0,y)}function f(){void 0!==b&&clearTimeout(b),A=0,v=E=m=b=void 0}function h(){return void 0===b?y:c(S())}function p(){var e=S(),n=l(e);if(v=arguments,m=this,
E=e,n){if(void 0===b)return a(E);if(R)return b=setTimeout(d,t),r(E)}return void 0===b&&(b=setTimeout(d,t)),y}var v,m,g,y,b,E,A=0,L=!1,R=!1,O=!0;if("function"!=typeof e)throw new TypeError(u);return t=s(t)||0,i(n)&&(L=!!n.leading,R="maxWait"in n,g=R?_(s(n.maxWait)||0,t):g,O="trailing"in n?!!n.trailing:O),p.cancel=f,p.flush=h,p}function r(e,t,r){var a=!0,o=!0;if("function"!=typeof e)throw new TypeError(u);return i(r)&&(a="leading"in r?!!r.leading:a,o="trailing"in r?!!r.trailing:o),n(e,t,{leading:a,maxWait:t,trailing:o})}function i(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function a(e){return!!e&&"object"==typeof e}function o(e){return"symbol"==typeof e||a(e)&&E.call(e)==d}function s(e){if("number"==typeof e)return e;if(o(e))return l;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(c,"");var n=h.test(e);return n||p.test(e)?v(e.slice(2),n?2:8):f.test(e)?l:+e}var u="Expected a function",l=NaN,d="[object Symbol]",c=/^\s+|\s+$/g,f=/^[-+]0x[0-9a-f]+$/i,h=/^0b[01]+$/i,p=/^0o[0-7]+$/i,v=parseInt,m="object"==typeof t&&t&&t.Object===Object&&t,g="object"==typeof self&&self&&self.Object===Object&&self,y=m||g||Function("return this")(),b=Object.prototype,E=b.toString,_=Math.max,T=Math.min,S=function(){return y.Date.now()};e.exports=r}).call(t,function(){return this}())},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=void 0,r=void 0;Object.defineProperty(e,"currentTimeOffset",{get:function(){return"number"==typeof n?r+((new Date).getTime()-n)/1e3:0},set:function(e){n=(new Date).getTime(),r=e}}),e.currentLiveTime=function(){var n=t.currentTime(),r=t.duration();return new Date(1e3*((new Date).getTime()/1e3-r-e.liveOffset+n+e.streamDelay))},e.convertTimeToLiveTime=function(n){var r=t.currentTime(),i=e.currentLiveTime();return new Date(1e3*(i.getTime()/1e3-(r-n)))},e.convertLiveTimeToTime=function(n){var r=t.currentTime(),i=e.currentLiveTime();return(n.getTime()-i.getTime())/1e3+r};var i=function(){n=null,e.liveOffset=t.DEFAULT_LIVE_OFFSET||0,e.streamDelay=t.LIVE_DELAY_BETWEEN_TIMESTAMP_AND_STREAM||0};return i(),{reset:i}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){function n(e){for(var t=0;t<f.length;t++){var n=f[t];if(n.canPlay(e))return n}return null}var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.debug,a=void 0===i?o.default:i,s=r.initializeMediaElement,c=void 0===s?l.initMediaElement:s;d=a("ludo:adapterloader");var f=t.map(function(e){return e});f.forEach(function(t){return t.create(e)});var h=e.get(u.default.ADAPTER);if(h){var p=new RegExp(h,"i");f=f.sort(function(e,t){return p.test(e.adapterName)?-1:p.test(t.adapterName)?1:0})}return d("Using adapters (in order): "+f.map(function(e){return e.adapterName}).join(", ")),c(e),{getAdapterForMedia:n}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n(5),o=r(a),s=n(3),u=r(s),l=n(70),d=void 0},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return Object.keys(e.prototype).filter(function(t){return"function"==typeof e.prototype[t]})}function a(){function e(e){g=e,y={}}function t(){E()}function n(){g=null,b=new u.Promise(function(e){E=e}),i(s.default).concat(i(o.LudoPlayerAdapter)).forEach(function(e){T[e]=[]})}function r(){return Boolean(g)}function a(e,t){m[e]=t}function l(e){if("boolean"==typeof y[e])return y[e];if(!r())return!1;if(!g[e])return d(e,!1);for(var t=g;t&&""!==t.adapterName;)t=Object.getPrototypeOf(t);return t?d(e,g[e]!==t[e]):d(e,!0)}function d(e,t){return y[e]=t,t}function c(e){return"function"==typeof o.LudoPlayerAdapter.prototype[e]?o.LudoPlayerAdapter.prototype[e]():void 0}function f(e){var t;if(!l(e)||!r())return m.hasOwnProperty(e)?"function"==typeof m[e]?m[e]():m[e]:c(e);T[e].push(_());for(var n=arguments.length,i=Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];return(t=g)[e].apply(t,i)}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY,t=e instanceof Date?e.getTime():_()-1e3*e,n=function(e){return e>=t};return Object.keys(T).reduce(function(e,t){var r=T[t].filter(n).length;return r&&(e[t]=r),e},{})}var p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},v=p.defaultValues,m=void 0===v?{}:v,g=void 0,y={},b=void 0,E=void 0,_=function(){return(new Date).getTime()},T={},S={get adapterName(){return g?g.adapterName:null}};return i(s.default).forEach(function(e){S[e]=function(){var t;return g&&(t=g)[e].apply(t,arguments)}}),i(o.LudoPlayerAdapter).forEach(function(e){var t="undefined"==typeof c(e);S[e]=t?function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return b.then(function(){return f.apply(void 0,[e].concat(n))})}:function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return f.apply(void 0,[e].concat(n))}}),n(),(0,u.objectAssign)(S,{setAdapter:e,triggerAsyncActions:t,resetAdapter:n,supportsMethod:l,isResolved:r,setDefaultValue:a,adapterMetrics:h})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var o=n(7),s=r(o),u=n(2)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){function n(e){R("resetAdapter"),(X.isResolved()||e)&&(X.resetAdapter(),$=new T.Promise(function(e){q.on(v.default.ADAPTER,function(t){z=t,e()})}))}function r(){return X.adapterName}function i(){return q.emit(v.default.BEFOREPLAY),X.isResolved()?(J.once(v.default.LOADED,function(){X.requireInitialPlayWhenLoaded()&&X.play()}),X.play()):$.then(function(){X.play()})}function o(){var e=function(){return X.isPaused()?i():X.pause()};return X.isResolved()?e():$.then(function(){return e()})}function u(){if(!X.isResolved())return new Date;switch(B()){case _.default.DVR:case _.default.LIVE:return X.currentLiveTime();case _.default.VOD:default:return new Date}}function d(e){switch(B()){case _.default.LIVE:case _.default.DVR:return X.convertTimeToLiveTime(e);case _.default.VOD:throw new Error(L);default:return new Date}}function f(e){switch(B()){case _.default.LIVE:case _.default.DVR:return X.convertLiveTimeToTime(e);case _.default.VOD:throw new Error(A);default:return 0}}function p(){return X.duration()||0}function m(e){var t=e;return e instanceof Date&&(t=f(e)),"number"!=typeof t?T.Promise.reject():(t=Math.min(Math.max(0,t),p()||Number.MAX_VALUE),X.seekTo(t))}function y(){return $.then(function(){q.emit(v.default.MUTED),X.mute()})}function E(){return $.then(function(){q.emit(v.default.UNMUTED),X.unmute()})}function k(e){return X.setVolume(Math.min(Math.max(0,e),1))}function w(e,t){return(e||{}).adapterName!==(t||{}).adapterName}function D(e,t){if(!e){t&&t.unmount();var n=new Error("No matching adapter available.");return n.reason=h.default.REASONS.MEDIA_SUPPORT_ERROR,T.Promise.reject(n)}return t&&w(e,t)?t.unmount():T.Promise.resolve()}function P(e){O("Preparing media...",e),n();var t=Z.getAdapterForMedia(e);return t&&w(t,z)&&t.mount(J.get(g.default.VIDEO_ELEMENT)),D(t,z).then(function(){return Q=e,z=t,t.prepareMedia(e)}).then(function(){return N(t)})}function I(e){return O("Loading media...",e),x(g.default.MUTE)?y():E(),q.emit(v.default.LOADING),$.then(function(){return X.loadMedia(e).catch(function(e){return J.emit(e)})})}function x(e,t){var n=Y[e];return"undefined"==typeof n?t:n}function C(e,t){var n=Y[e];return Y[e]=t,n!==t&&q.emit(v.default.OPTIONCHANGED,e,t,n),this}function M(){return X.element()||null}function N(e){O("Using adapter '"+e.adapterName+"'"),z=e,X.setAdapter(e),q.once(v.default.LOADED,X.triggerAsyncActions),q.emit(v.default.ADAPTER,e)}function F(){return a({},X.metrics(),{adapter:r()})}function B(){if(!X.isResolved()||!Q)return _.default.UNKNOWN;if(!Q.isLive)return _.default.VOD;if(!Y.SUPPORTS_DVR)return _.default.LIVE;var e=Q,t=e.bufferDuration;return(0,T.numberIsNaN)(t)||t>0?_.default.DVR:_.default.LIVE}var U=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},j=U.LudoPlayerAdapterLoader,G=void 0===j?c.default:j,H=U.LudoPlayerAdapterProxy,V=void 0===H?b.default:H,K=U.debug,W=void 0===K?s.default:K;if(!e&&!t)throw new Error("invalid input");R=W("ludo:facade"),O=W("ludo:core");var Y=a({},S,e),z=null,q=new l.default,X=V({defaultValues:{playbackRate:function(){return x(g.default.PLAYBACKRATE)},isMuted:function(){return x(g.default.MUTE)}}}),$=void 0,Q=void 0,Z=void 0,J=void 0;return n(!0),J=(0,T.objectAssign)(q,X,{adapterName:r,play:i,playpause:o,currentLiveTime:u,convertTimeToLiveTime:d,convertLiveTimeToTime:f,duration:p,seekTo:m,resolve:N,loadMedia:I,prepareMedia:P,element:M,mute:y,unmute:E,setVolume:k,metrics:F,mediaType:B,get:x,set:C}),Z=G(J,t),J}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=i;var o=n(5),s=r(o),u=n(71),l=r(u),d=n(62),c=r(d),f=n(4),h=r(f),p=n(1),v=r(p),m=n(3),g=r(m),y=n(63),b=r(y),E=n(9),_=r(E),T=n(2),S={SUPPORTS_DVR:!0},A="Cannot convert live time to vod time",L="Cannot convert vod time to live time",R=void 0,O=void 0},function(e,t){"use strict";function n(){function e(e){e.style.zIndex=i++}function t(e){e.style.zIndex=1e9}function n(e){e.style.zIndex=r--}var r=0,i=1;return{bringToFront:e,bringToModalFront:t,sendToBack:n}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),a=n(1),o=r(a);t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.IS_AIRPLAY_SUPPORTED,r=void 0===n?i.IS_AIRPLAY_SUPPORTED:n,a=e.get("videoElement");return r&&e.once(o.default.LOADED,function(){a.addEventListener("webkitcurrentplaybacktargetiswirelesschanged",function(){e.emit(a.webkitCurrentPlaybackTargetIsWireless?o.default.AIRPLAYON:o.default.AIRPLAYOFF)})}),function(){r&&a.webkitShowPlaybackTargetPicker()}}},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t,n){return e.map(function(e){return function(n){return e.apply(void 0,r(t.concat([n])))}}).reduce(function(e,t){return e.then(t)},a.Promise.resolve(n))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n(2)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(5),a=r(i),o=n(1),s=r(o),u=n(9),l=r(u),d=n(2),c=void 0;t.default=function(e){function t(){g&&clearInterval(g)}function n(){return!y&&(!(0,d.numberIsNaN)(E)&&(_?b===E:Math.abs(b-E)>.9))}function r(){b=e.currentTime(),n()&&(c("bufferstart"),e.emit(s.default.BUFFERSTART),y=!0,T=(new Date).getTime()),E=b}function i(){E=e.currentTime(),t(),g=setInterval(r,1e3)}function o(){y&&(e.emit(s.default.BUFFEREND),y=!1,c("buffered for "+((new Date).getTime()-T)/1e3+" sec"))}function u(){t(),o()}function f(){o()}function h(){_=e.mediaType()===l.default.VOD}var p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},v=p.debug,m=void 0===v?a.default:v;c=m("ludo:buffered");var g=void 0,y=void 0,b=void 0,E=void 0,_=void 0,T=void 0;e.on(s.default.LOADED,h),e.on(s.default.PLAYING,i),e.on(s.default.PAUSE,u),e.on(s.default.ENDED,u),e.on(s.default.ITEM_CHANGED,u),e.on(s.default.TIMEUPDATE,f)}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(5),a=r(i),o=n(30),s=n(1),u=r(s),l=n(3),d=r(l),c=n(2),f={enabled:["fullscreenEnabled","webkitFullscreenEnabled","mozFullScreenEnabled","msFullscreenEnabled"],currentElements:["fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement"],elementOpenMethods:["requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen"],closeMethods:["exitFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen"],events:["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],videoOpenMethods:["webkitEnterFullscreen"]};t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.document,r=void 0===n?o.document:n,i=t.window,s=void 0===i?o.window:i,l=(0,a.default)("ludo:fullscreen"),h=!1,p=function(){return e.get(d.default.STAGE_ELEMENT)},v=function(){return e.get(d.default.VIDEO_ELEMENT)},m=function(e,t){var n=(0,c.arrayFind)(t,function(t){return e[t]});return n?(l("Accessing: "+e.nodeName+"."+n),"function"==typeof e[n]?function(){return e[n]()}:e[n]):null},g=function(){return!(!m(r,f.enabled)&&!m(v(),f.videoOpenMethods))},y=function(){var t=h;h=!!m(r,f.currentElements),l("Fullscreen is:",h?"On":"Off"),t!==h&&(e.set(d.default.FULLSCREEN,h),e.emit(h?u.default.FULLSCREENON:u.default.FULLSCREENOFF))};e.once(u.default.PREPARED,function(){f.events.forEach(function(e){return s.addEventListener(e,y)})});var b=function(){var e=m(p(),f.elementOpenMethods)||m(v(),f.videoOpenMethods);e&&e()},E=function(){var e=m(r,f.closeMethods);e&&e()},_=function(e){var t="boolean"==typeof e?e:!h;(t?b:E)()};return{toggle:_,isSupported:g}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.initMediaElement=void 0;var i=n(12),a=r(i),o=n(3),s=r(o),u=n(2);t.initMediaElement=function(e){var t=e.get(s.default.VIDEO_ELEMENT),n=e.get(s.default.STAGE_ELEMENT);return t||(t=n.querySelector("video,audio"),t||(t=a.default.createElement("video"),n.childNodes.length?n.insertBefore(t,n.firstChild):n.appendChild(t)),(0,u.classList)(t).add("ludo-player","ludo-stage__overlay"),t.getAttribute("id")||t.setAttribute("id","ludo-video-"+(new Date).getTime()),e.set(s.default.VIDEO_ELEMENT,t)),t}},22,function(e,t,n){"use strict";var r=n(46),i=n(45);e.exports=function(){var e=i();return r(Array.prototype,{includes:e},{includes:function(){return Array.prototype.includes!==e}}),e}},function(e,t,n){"use strict";var r=n(49),i=n(48),a=n(51),o=n(50),s=n(29),u=n(76),l={ToPrimitive:u,ToBoolean:function(e){return Boolean(e)},ToNumber:function(e){return Number(e)},ToInteger:function(e){var t=this.ToNumber(e);return r(t)?0:0!==t&&i(t)?a(t)*Math.floor(Math.abs(t)):t},ToInt32:function(e){return this.ToNumber(e)>>0},ToUint32:function(e){return this.ToNumber(e)>>>0},ToUint16:function(e){var t=this.ToNumber(e);if(r(t)||0===t||!i(t))return 0;var n=a(t)*Math.floor(Math.abs(t));return o(n,65536)},ToString:function(e){return String(e)},ToObject:function(e){return this.CheckObjectCoercible(e),Object(e)},CheckObjectCoercible:function(e,t){if(null==e)throw new TypeError(t||"Cannot call method on "+e);return e},IsCallable:s,SameValue:function(e,t){return e===t?0!==e||1/e===1/t:r(e)&&r(t)},Type:function(e){return null===e?"Null":"undefined"==typeof e?"Undefined":"function"==typeof e||"object"==typeof e?"Object":"number"==typeof e?"Number":"boolean"==typeof e?"Boolean":"string"==typeof e?"String":void 0}};e.exports=l},function(e,t){var n=Object.prototype.hasOwnProperty;e.exports=Object.assign||function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);return e}},52,function(e,t,n){"use strict";var r=Object.prototype.toString,i=n(52),a=n(29),o={"[[DefaultValue]]":function(e,t){var n=t||("[object Date]"===r.call(e)?String:Number);if(n===String||n===Number){var o,s,u=n===String?["toString","valueOf"]:["valueOf","toString"];for(s=0;s<u.length;++s)if(a(e[u[s]])&&(o=e[u[s]](),i(o)))return o;throw new TypeError("No default value")}throw new TypeError("invalid [[DefaultValue]] hint supplied")}};e.exports=function(e,t){return i(e)?e:o["[[DefaultValue]]"](e,t)}},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator,i=n(52),a=n(29),o=n(81),s=n(83),u=function(e,t){if("undefined"==typeof e||null===e)throw new TypeError("Cannot call method on "+e);if("string"!=typeof t||"number"!==t&&"string"!==t)throw new TypeError('hint must be "string" or "number"');var n,r,o,s="string"===t?["toString","valueOf"]:["valueOf","toString"];for(o=0;o<s.length;++o)if(n=e[s[o]],a(n)&&(r=n.call(e),i(r)))return r;throw new TypeError("No default value")},l=function(e,t){var n=e[t];if(null!==n&&"undefined"!=typeof n){if(!a(n))throw new TypeError(n+" returned for property "+t+" of object "+e+" is not a function");return n}};e.exports=function(e,t){if(i(e))return e;var n="default";arguments.length>1&&(t===String?n="string":t===Number&&(n="number"));var a;if(r&&(Symbol.toPrimitive?a=l(e,Symbol.toPrimitive):s(e)&&(a=Symbol.prototype.valueOf)),"undefined"!=typeof a){var d=a.call(e,n);if(i(d))return d;throw new TypeError("unable to convert exotic object to primitive")}return"default"===n&&(o(e)||s(e))&&(n="string"),u(e,"default"===n?"number":n)}},function(e,t){var n=Object.prototype.hasOwnProperty,r=Object.prototype.toString;e.exports=function(e,t,i){if("[object Function]"!==r.call(t))throw new TypeError("iterator must be a function");var a=e.length;if(a===+a)for(var o=0;o<a;o++)t.call(i,e[o],o,e);else for(var s in e)n.call(e,s)&&t.call(i,e[s],s,e)}},function(e,t){var n="Function.prototype.bind called on incompatible ",r=Array.prototype.slice,i=Object.prototype.toString,a="[object Function]";e.exports=function(e){var t=this;if("function"!=typeof t||i.call(t)!==a)throw new TypeError(n+t);for(var o,s=r.call(arguments,1),u=function(){if(this instanceof o){var n=t.apply(this,s.concat(r.call(arguments)));return Object(n)===n?n:this}return t.apply(e,s.concat(r.call(arguments)))},l=Math.max(0,t.length-s.length),d=[],c=0;c<l;c++)d.push("$"+c);if(o=Function("binder","return function ("+d.join(",")+"){ return binder.apply(this,arguments); }")(u),t.prototype){var f=function(){};f.prototype=t.prototype,o.prototype=new f,f.prototype=null}return o}},function(e,t,n){var r=n(53);e.exports=r.call(Function.call,Object.prototype.hasOwnProperty)},function(e,t){"use strict";var n=Date.prototype.getDay,r=function(e){try{return n.call(e),!0}catch(e){return!1}},i=Object.prototype.toString,a="[object Date]",o="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;e.exports=function(e){return"object"==typeof e&&null!==e&&(o?r(e):i.call(e)===a)}},function(e,t,n){"use strict";var r=n(80),i=RegExp.prototype.exec,a=Object.getOwnPropertyDescriptor,o=function(e){try{var t=e.lastIndex;return e.lastIndex=0,i.call(e),!0}catch(e){return!1}finally{e.lastIndex=t}},s=Object.prototype.toString,u="[object RegExp]",l="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;e.exports=function(e){if(!e||"object"!=typeof e)return!1;if(!l)return s.call(e)===u;var t=a(e,"lastIndex"),n=t&&r(t,"value");return!!n&&o(e)}},function(e,t){"use strict";var n=Object.prototype.toString,r="function"==typeof Symbol&&"symbol"==typeof Symbol();if(r){var i=Symbol.prototype.toString,a=/^Symbol\(.*\)$/,o=function(e){return"symbol"==typeof e.valueOf()&&a.test(i.call(e))};e.exports=function(e){if("symbol"==typeof e)return!0;if("[object Symbol]"!==n.call(e))return!1;try{return o(e)}catch(e){return!1}}}else e.exports=function(e){return!1}},function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty,i=Object.prototype.toString,a=Array.prototype.slice,o=n(85),s=Object.prototype.propertyIsEnumerable,u=!s.call({toString:null},"toString"),l=s.call(function(){},"prototype"),d=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],c=function(e){var t=e.constructor;return t&&t.prototype===e},f={$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},h=function(){if("undefined"==typeof window)return!1;for(var e in window)try{if(!f["$"+e]&&r.call(window,e)&&null!==window[e]&&"object"==typeof window[e])try{c(window[e])}catch(e){return!0}}catch(e){return!0}return!1}(),p=function(e){if("undefined"==typeof window||!h)return c(e);try{return c(e)}catch(e){return!1}},v=function(e){var t=null!==e&&"object"==typeof e,n="[object Function]"===i.call(e),a=o(e),s=t&&"[object String]"===i.call(e),c=[];if(!t&&!n&&!a)throw new TypeError("Object.keys called on a non-object");var f=l&&n;if(s&&e.length>0&&!r.call(e,0))for(var h=0;h<e.length;++h)c.push(String(h));if(a&&e.length>0)for(var v=0;v<e.length;++v)c.push(String(v));else for(var m in e)f&&"prototype"===m||!r.call(e,m)||c.push(String(m));if(u)for(var g=p(e),y=0;y<d.length;++y)g&&"constructor"===d[y]||!r.call(e,d[y])||c.push(d[y]);return c};v.shim=function(){if(Object.keys){var e=function(){return 2===(Object.keys(arguments)||"").length}(1,2);if(!e){var t=Object.keys;Object.keys=function(e){return t(o(e)?a.call(e):e)}}}else Object.keys=v;return Object.keys||v},e.exports=v},function(e,t){"use strict";var n=Object.prototype.toString;e.exports=function(e){var t=n.call(e),r="[object Arguments]"===t;return r||(r="[object Array]"!==t&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===n.call(e.callee)),r}},function(e,t,n){(function(t,n){"use strict";function r(){for(var e=0;e<A.length;e++)A[e][0](A[e][1]);A=[],m=!1}function i(e,t){A.push([e,t]),m||(m=!0,S(r,0))}function a(e,t){function n(e){u(t,e)}function r(e){d(t,e)}try{e(n,r)}catch(e){r(e)}}function o(e){var t=e.owner,n=t._state,r=t._data,i=e[n],a=e.then;if("function"==typeof i){n=b;try{r=i(r)}catch(e){d(a,e)}}s(a,r)||(n===b&&u(a,r),n===E&&d(a,r))}function s(e,t){var n;try{if(e===t)throw new TypeError("A promises callback cannot return that same promise.");if(t&&("function"==typeof t||"object"==typeof t)){var r=t.then;if("function"==typeof r)return r.call(t,function(r){n||(n=!0,t===r?l(e,r):u(e,r))},function(t){n||(n=!0,d(e,t))}),!0}}catch(t){return n||d(e,t),!0}return!1}function u(e,t){e!==t&&s(e,t)||l(e,t)}function l(e,t){e._state===g&&(e._state=y,e._data=t,i(f,e))}function d(e,t){e._state===g&&(e._state=y,e._data=t,i(h,e))}function c(e){e._then=e._then.forEach(o)}function f(e){e._state=b,c(e)}function h(e){e._state=E,c(e),!e._handled&&T&&t.process.emit("unhandledRejection",e._data,e)}function p(e){t.process.emit("rejectionHandled",e)}function v(e){if("function"!=typeof e)throw new TypeError("Promise resolver "+e+" is not a function");if(this instanceof v==!1)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._then=[],a(e,this)}var m,g="pending",y="settled",b="fulfilled",E="rejected",_=function(){},T="undefined"!=typeof t&&"undefined"!=typeof t.process&&"function"==typeof t.process.emit,S="undefined"==typeof n?setTimeout:n,A=[];v.prototype={constructor:v,_state:g,_then:null,_data:void 0,_handled:!1,then:function(e,t){var n={owner:this,then:new this.constructor(_),fulfilled:e,rejected:t};return!t&&!e||this._handled||(this._handled=!0,this._state===E&&T&&i(p,this)),this._state===b||this._state===E?i(o,n):this._then.push(n),n.then},catch:function(e){return this.then(null,e)}},v.all=function(e){if(!Array.isArray(e))throw new TypeError("You must pass an array to Promise.all().");return new v(function(t,n){function r(e){return o++,function(n){a[e]=n,--o||t(a)}}for(var i,a=[],o=0,s=0;s<e.length;s++)i=e[s],i&&"function"==typeof i.then?i.then(r(s),n):a[s]=i;o||t(a)})},v.race=function(e){if(!Array.isArray(e))throw new TypeError("You must pass an array to Promise.race().");return new v(function(t,n){for(var r,i=0;i<e.length;i++)r=e[i],r&&"function"==typeof r.then?r.then(t,n):t(r)})},v.resolve=function(e){return e&&"object"==typeof e&&e.constructor===v?e:new v(function(t){t(e)})},v.reject=function(e){return new v(function(t,n){n(e)})},e.exports=v}).call(t,function(){return this}(),n(96).setImmediate)},37,function(e,t,n){!function(t,r){e.exports=r(n(41),n(37),n(43),n(42),n(38),n(39),n(40),n(33),n(36),n(35),n(32),n(34))}(this,function(e,t,r,i,a,o,s,u,l,d,c,f){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="/dist/",t(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(2),a=r(i),o=n(3),s=r(o),u=n(12),l=r(u),d=n(24),c=r(d),f=n(29),h=r(f),p=n(31),v=r(p);e.exports={NRKAnalyticsLogger:l.default,NRKSubtitles:a.default,NRKMediaItem:s.default,NRKLiveEpg:c.default,nrkApiClient:h.default,nrkMediaItemLoader:v.default}},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t){if(n(this,e),!t)throw new Error("url not defined");this._ttml=t}return e.prototype.toString=function(){return this.vtt},r(e,[{key:"ttml",get:function(){return this._ttml}},{key:"vtt",get:function(){return this._ttml.replace(".ttml",".vtt")}},{key:"hlsPlaylist",get:function(){return this._ttml.replace(/[^\/]*$/,"master.m3u8")}}]),e}();t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),a=r(i),o=n(10),s=r(o);t.default=function(e){return e&&e.playability?e.playable&&e.playable.parts?e.playable.parts.map(function(t,n){return new s.default(e,n)}):[new s.default(e)]:[new a.default(e)]}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(5),d=r(l),c=n(2),f=r(c),h=n(6),p=n(7),v=r(p),m=n(8),g=r(m),y=n(9),b=function(e){function t(n){i(this,t);var r=a(this,e.call(this));return r.data=n,r}return o(t,e),u(t,[{key:"sources",get:function(){var e=[];return this.hlsAsset_&&e.push({type:"application/vnd.apple.mpegurl",src:this.hlsAsset_}),this.hdsAsset_&&e.push({type:"application/adobe-f4m",src:this.hdsAsset_}),this.mp4Asset_&&e.push({type:"video/mp4",src:this.mp4Asset_}),e}},{key:"hlsAsset_",get:function(){var e=0===this.mediaUrl_.indexOf("https://tv.nrk.no/androidapp?url="),t=this.mediaUrl_;e&&(t=d.default.decodeURIComponent(t.substring("https://tv.nrk.no/androidapp?url=".length)));var n=0===this.mediaUrl_.indexOf("nrktv");n&&(t=t.replace("nrktv","http"));var r="Akamai"===(0,g.default)(this,"data.mediaAnalytics.cdnName"),i=void 0;return r?(i=t.replace("/z/","/i/").replace("manifest.f4m","master.m3u8"),this.isLive&&(i=i.replace(/http:/i,"https:"))):i=t.replace("/hds/","/hls/").replace("manifest.f4m","playlist.m3u8"),"https:"===d.default.location.protocol&&(i=i.replace(/http:/i,"https:")),i}},{key:"hdsAsset_",get:function(){var e="Akamai"===(0,g.default)(this,"data.mediaAnalytics.cdnName"),t=void 0;return e?(t=this.mediaUrl_.replace("/i/","/z/").replace("master.m3u8","manifest.f4m"),this.isLive&&(t=t.replace("https:","http:"))):t=this.mediaUrl_.replace("/hls/","/hds/").replace("playlist.m3u8","manifest.f4m"),t}},{key:"mp4Asset_",get:function(){var e=void 0;return/\.mp4$/.test(this.mediaUrl_)&&(e=this.mediaUrl_),e}},{key:"mediaUrl_",get:function(){var e=(0,g.default)(this,"data.mediaUrl");return e?e.replace(",141,316,563,1266,2250,",",1266,141,316,563,2250,"):""}},{key:"poster",get:function(){var e=(0,g.default)(this,"data.images.webImages[2].imageUrl");return e?e.replace(/http:/i,d.default.location.protocol):""}},{key:"isVideo",get:function(){return"Video"===(0,g.default)(this,"data.mediaType")}},{key:"isAudio",get:function(){return"Audio"===(0,g.default)(this,"data.mediaType")}},{key:"isLive",get:function(){return(0,g.default)(this,"data.isLive")}},{key:"isChannel",get:function(){return/^nrk/.test(this.id)}},{key:"id",get:function(){return(0,g.default)(this,"data.id")}},{key:"subtitles",get:function(){if(!this._cachedSubs){var e=(0,g.default)(this,"data.subtitlesUrlPath");if(e){var t=new f.default(e.replace(/http:/i,d.default.location.protocol));this._cachedSubs=[{src:t.vtt,srclang:"nb",label:"Norsk",default:!!(0,g.default)(this,"data.subtitlesDefaultOn")}]}}return this._cachedSubs||[]}},{key:"indexPoints",get:function(){return(0,g.default)(this,"data.shortIndexPoints")}},{key:"isPlayable",get:function(){return!this.isBlocked&&this.sources.length>0}},{key:"isBlocked",get:function(){return!(0,g.default)(this,"data.isAvailable")}},{key:"blockedMessage",get:function(){var e=(0,g.default)(this,"data.messageType"),t=v.default[e],n=void 0;return"function"==typeof t?n=t(this):"string"==typeof t&&(n=t),n||""}},{key:"title",get:function(){return(0,g.default)(this,"data.title")}},{key:"description",get:function(){return(0,g.default)(this,"data.description")}},{key:"duration",get:function(){var e=(0,g.default)(this,"data.duration");return e?(0,y.toSeconds)((0,y.parse)(e)):0}},{key:"bufferDuration",get:function(){var e=(0,g.default)(this,"data.mediaAssets[0].bufferDuration");return e?(0,y.toSeconds)((0,y.parse)(e)):this.isLive?0:this.duration}},{key:"scoresStats",get:function(){return(0,g.default)(this,"data.scoresStatistics")}},{key:"gaStats",get:function(){return(0,g.default)(this,"data.scoresStatistics")}},{key:"akamaiStats",get:function(){var e=(0,g.default)(this,"data.mediaAnalytics");return e?s({},e,{beacon:(0,g.default)(this,"data.akamaiBeacon")}):null}},{key:"thumbnails",get:function(){return this.isLive?null:{src:"https://nrkpssniktittesttwe.blob.core.windows.net/previewimages/"+this.id+"_preview.jpg",trigger:"http://vmaodaapp01:8083/programme/"+this.id,cols:20,frameDuration:10,width:320,height:180}}},{key:"legalAge",get:function(){var e=(0,g.default)(this,"data.legalAge")||null,t=e,n=null;return e&&(parseInt(e,10)?(t=e+"+",n="Anbefalt de over "+e+" år"):"A"===e&&(n="Tillatt for alle")),{code:e,badge:t,text:n}}}]),t}(h.LudoMediaItem);t.default=b},function(e,t){e.exports=n(41)},function(e,t){e.exports=n(37)},function(e,t){"use strict";function n(e){var t=[e.getHours(),e.getMinutes(),e.getDate(),e.getMonth()+1].map(function(e){return e>9?""+e:"0"+e});return"kl. "+t[0]+":"+t[1]+", den "+t[2]+"."+t[3]+"."+e.getFullYear()}function r(e){return e.isLive?"Direktesendingen er over.":"Programmet har gått ut."}function i(e){if(!e.isLive)return"Programmet er ikke tilgjengelig enda.";var t=e.availableFrom;return t?"Direktesendingen starter "+n(t):"Direktesendingen har ikke startet enda."}Object.defineProperty(t,"__esModule",{value:!0}),t.default={ProgramRightsHasExpired:r,ClipRightsHasExpired:r,ProgramRightsAreNotReady:i,ProgramRightsHasNotStarted:i}},function(e,t){e.exports=n(43)},function(e,t){e.exports=n(42)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){if(!e)return null;var t=new Date(e);return t.getTime()?t:null}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(5),d=r(l),c=n(4),f=r(c),h=n(7),p=r(h),v=n(8),m=r(v),g=n(9),y=n(11),b={HLS:"HLS",HDS:"HDS"},E={LIVE:"live",ON_DEMAND:"onDemand"},_={VIDEO:"video",AUDIO:"audio"},T=function(e){function t(n,r){i(this,t);var o=a(this,e.call(this));return o.data=n,o.part=r||0,o}return o(t,e),t.prototype.resolveAsset=function(e){var t="playable.parts["+this.part+"].assets",n=(0,y.arrayFind)((0,m.default)(this.data,t)||[],function(t){return t.format===e});return n?n.url.replace(",141,316,563,1266,2250,",",1266,141,316,563,2250,"):""},t.prototype.resolveAndroidAppURL=function(){var e="https://tv.nrk.no/androidapp?url=",t="playable.parts["+this.part+"].assets",n=(0,y.arrayFind)((0,m.default)(this.data,t)||[],function(t){return t.url.indexOf(0===e)});return n?d.default.decodeURIComponent(n.url.substring(e.length)):null},t.prototype.ensureType=function(e,t){var n=e;if(!n||t!==b.HLS&&t!==b.HDS)return null;var r=t===b.HLS;if(r&&/\/manifest\.f4m$/.test(n))n=n.replace("/z/","/i/").replace("manifest.f4m","master.m3u8");else if(!r&&/\/master\.m3u8$/.test(e))return e.replace("/i/","/z/").replace("master.m3u8","manifest.f4m");return r&&/\/master\.m3u8$/.test(n)||!r&&/\/manifest\.f4m$/.test(e)?n:null},u(t,[{key:"hlsAsset_",get:function(){var e=this.resolveAsset(b.HLS);return e||(e=this.ensureType(this.resolveAndroidAppURL(),b.HLS)||""),e=e.replace(/^nrktv/,"http"),("https:"===d.default.location.protocol||this.isLive)&&(e=e.replace(/http:/i,"https:")),e}},{key:"hdsAsset_",get:function(){var e=this.resolveAsset(b.HDS);return e||(e=this.ensureType(this.resolveAndroidAppURL(),b.HDS)||""),e}},{key:"poster",get:function(){return(0,m.default)(this.data,"preplay.poster.images[2].url")||""}},{key:"isVideo",get:function(){return(0,m.default)(this.data,"playable.sourceMedium")===_.VIDEO}},{key:"isAudio",get:function(){return(0,m.default)(this.data,"playable.sourceMedium")===_.AUDIO}},{key:"isLive",get:function(){return(0,m.default)(this.data,"streamingMode")===E.LIVE}},{key:"isChannel",get:function(){return"channel"===(0,m.default)(this.data,"availability.live.type","")}},{key:"subtitles",get:function(){var e=this;return((0,m.default)(this.data,"playable.parts["+this.part+"].subtitles")||[]).map(function(t){var n=t.webVtt;if(!n||!/\.vtt$/.test(t.webVtt))if(t.timedText)n=t.timedText.replace(".ttml",".vtt");else{var r=new RegExp("^(.*\\/)("+e.data.id+"\\w*)(\\/\\w+\\/)master\\.m3u8$").exec(n||"");if(!r)return null;n=[r[1],r[2],r[3],r[2],".vtt"].join("")}return{src:n,srclang:t.language,label:t.label,default:"undefined"==typeof t.defaultOn||!!t.defaultOn}}).filter(function(e){return e})}},{key:"indexPoints",get:function(){return(0,m.default)(this.data,"playable.parts["+this.part+"].indexPoints")}},{key:"isBlocked",get:function(){return"blocked"===(0,m.default)(this.data,"nonPlayable.reason")}},{key:"blockedMessage",get:function(){var e=(0,m.default)(this.data,"nonPlayable.endUserMessage");if(!e){var t=(0,m.default)(this.data,"nonPlayable.messageType"),n=p.default[t];"function"==typeof n?e=n(this):"string"==typeof n&&(e=n)}return e||""}},{key:"title",get:function(){return(0,m.default)(this.data,"title")}},{key:"description",get:function(){return(0,m.default)(this.data,"description")}},{key:"duration",get:function(){var e=(0,m.default)(this,"data.duration");return e?(0,g.toSeconds)((0,g.parse)(e)):0}},{key:"bufferDuration",get:function(){var e=(0,m.default)(this,"data.playable.parts["+this.part+"].liveBuffer.bufferDuration");return e?(0,g.toSeconds)((0,g.parse)(e)):this.isLive?0:this.duration}},{key:"akamaiStats",get:function(){return(0,m.default)(this.data,"statistics.akamai")}},{key:"gaStats",get:function(){return(0,m.default)(this.data,"statistics.ga")}},{key:"scoresStats",get:function(){return(0,m.default)(this.data,"statistics.scores")}},{key:"thumbnails",get:function(){return this.isLive||this.part>0?null:{src:"https://nrkpssniktittesttwe.blob.core.windows.net/previewimages/"+this.id+"_preview.jpg",trigger:"http://vmaodaapp01:8083/programme/"+this.id,cols:20,frameDuration:10,width:320,height:180}}},{key:"legalAge",get:function(){var e=(0,m.default)(this.data,"legalAge.body.rating");return{code:e&&e.code?e.code:null,badge:e&&e.displayAge?e.displayAge:null,text:e&&e.displayValue?e.displayValue:null}}},{key:"availableFrom",get:function(){var e=(0,m.default)(this.data,"availability.live.transmissionInterval.from");return s(e)}},{key:"availableTo",get:function(){var e=(0,m.default)(this.data,"availability.live.transmissionInterval.to");return s(e)}}]),t}(f.default);t.default=T},function(e,t){e.exports=n(38)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(){var e=Boolean(c.default.ga);c.default.ga=e?c.default.ga:function(){(c.default.ga.q=c.default.ga.q||[]).push(arguments)},e||(c.default.ga.l=Number(new Date))}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.debug,r=void 0===n?l.default:n,o=t.nrkMediaLogger,u=void 0===o?_.default:o;if(T=r("ludo:analytics"),!e||"object"!==s(e.tracker))throw new Error("Invalid argument - require tracker information");return a(),function(n){var a=(0,y.createTracker)(e.tracker,n,t);n.on(b.LudoEvents.ERROR,function(e,t){var r,o,s=n.current()||{},u=s.isPlayable;if(u){var l=e&&e.stack?"("+e.stack+")":"";a.send("exception",(r={},i(r,y.DIMENSION.errorType,t.type),i(r,y.DIMENSION.errorReason,t.reason),i(r,"exDescription",(e&&e.toString())+" "+l),i(r,"exFatal",t.fatal),r)),a.send("event",(o={eventCategory:"error-playback",eventAction:"error-playback-"+(t.fatal?"fatal":"issue")},i(o,y.DIMENSION.errorType,t.type),i(o,y.DIMENSION.errorReason,t.reason),i(o,"exDescription",(e&&e.toString())+" "+l),o))}});var o=new g.default,s=function(e){return a.send("event",e)};o.on("interaction",function(e){s({eventCategory:"media-controller",eventAction:"media-controller-"+e})}),(0,h.default)(n,o),o.on("timing",function(e){T("Timed '"+e.event+"' to "+e.time+" ms"),a.send("timing",{timingCategory:"media-playback",timingVar:e.event,timingValue:e.time})}),(0,v.default)(n,o),u(n,{googleAnalytics:a,debug:r})}}Object.defineProperty(t,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=o;var u=n(13),l=r(u),d=n(5),c=r(d),f=n(14),h=r(f),p=n(15),v=r(p),m=n(16),g=r(m),y=n(17),b=n(6),E=n(18),_=r(E),T=void 0},function(e,t){e.exports=n(39)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),a=n(13),o=r(a),s=void 0;t.default=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.debug,a=void 0===r?o.default:r;s=a("ludo:ga:interactions");var u=!1,l=0,d=0,c=0,f=function(e){u&&(s("Send media-controller event",e),t.emit("interaction",e))};e.on(i.LudoEvents.READY,function(){u=!0}),e.on(i.LudoEvents.PLAY,function(){l++,e.get("autoplay")&&1===l||f("play")}),e.on(i.LudoEvents.PLAYING,function(){return d++}),e.on(i.LudoEvents.SEEKED,function(){d<2||c&&(new Date).getTime()-c<1e3||(c=(new Date).getTime(),f("seek"))}),e.on(i.LudoEvents.PAUSE,function(){var t=e.duration(),n=e.currentTime(),r=t-n;r<2||f("pause")}),e.on(i.LudoEvents.MUTED,function(){return f("mute")}),e.on(i.LudoEvents.UNMUTED,function(){return f("unmute")}),e.on(i.LudoEvents.SUBTITLESON,function(){return f("captionson")}),e.on(i.LudoEvents.SUBTITLESOFF,function(){return f("captionsoff")}),e.on(i.LudoEvents.FULLSCREENON,function(){return f("fullscreenenter")}),e.on(i.LudoEvents.FULLSCREENOFF,function(){return f("fullscreenexit")}),e.on(i.LudoEvents.AIRPLAYON,function(){return f("airplayon")}),e.on(i.LudoEvents.AIRPLAYOFF,function(){return f("airplayoff")})}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){return(new Date).getTime()},r=n(),i=function(){return n()-r};t.default=function(e,t){var r=function(e,n){t.emit("timing",{event:e,time:n})};["prepare","play"].forEach(function(t){e.once(t,function(){r(t,i())})}),[["prepare","prepared"],["play","loadeddata"],["loadeddata","playing"]].forEach(function(t){var i=t[0],a=t[1],o=void 0;e.once(i,function(){o=n()}),e.once(a,function(){o&&(r(i+"-"+a,n()-o),o=null)})})}},function(e,t){e.exports=n(40)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){var t;if(!e)return{};var n=/^\d+$/.test(e.id)?"g4":"prf";return t={},i(t,v.id,n+":"+e.id),i(t,v.mediaType,e.isVideo?"video":"audio"),i(t,v.mediaCategory,e.isLive?"live":"ondemand"),t}function o(e){var t;return e?(t={},i(t,v.adapterType,e.adapter),i(t,v.mimeType,e.mimeType),t):{}}function s(e){var t,n=e.current(),r=a(n),s=o(e.metrics()),u=n&&n.title;return(0,p.objectAssign)({},r,s,(t={},i(t,v.autoplay,e.get("autoplay")?"Yes":"No"),i(t,"appVersion",e.get("version")),i(t,"appName","ludo"),i(t,"eventLabel",u),t))}function u(e){var t,n=e.userId;return n?(t={},i(t,v.userIdHit,n),i(t,v.userIdSession,n),t):{}}Object.defineProperty(t,"__esModule",{value:!0}),t.createTracker=t.METRIC=t.DIMENSION=void 0;var l=n(5),d=r(l),c=n(13),f=r(c),h=n(6),p=n(11),v=t.DIMENSION={id:"dimension1",title:"dimension2",year:"dimension3",month:"dimension4",day:"dimension5",referrerDomain:"dimension6",referrer:"dimension7",userIdHit:"dimension8",userIdSession:"dimension9",sourceID:"dimension10",category:"dimension23",autoplay:"dimension24",mediaType:"dimension25",mediaCategory:"dimension26",mimeType:"dimension27",adapterType:"dimension28",errorType:"dimension31",errorReason:"dimension30"},m=(t.METRIC={quantileTime:"metric22",totalTime:"metric23",starts:"metric21"},function(){var e=0;return function(){return"ludo_"+e++}}()),g=void 0;t.createTracker=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.debug,i=void 0===r?f.default:r;g=i("ludo:ga:tracker");var a=void 0,o=m();d.default.ga("create",(0,p.objectAssign)(e,{name:o})),g("Creating tracker '"+o+"' with options",e);var l=u(e);return Object.keys(l).forEach(function(e){d.default.ga(o+".set",e,l[e])}),t.on(h.LudoEvents.LOADED,function(){a=null}),{send:function(e,n){a||(a=s(t)),d.default.ga(o+".send",e,(0,p.objectAssign)({},a,n))}}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){function t(e){return function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return o.emit.apply(o,[e].concat(n))}}function n(){s||(Object.keys(u).forEach(function(t){var n=u[t];e.on(t,n)}),s=!0)}function r(){s&&(Object.keys(u).forEach(function(t){var n=u[t];e.off(t,n)}),s=!1)}var a,o=new h.default,s=!1,u=(a={},i(a,p.LudoEvents.PREPARATORSCOMPLETE,t(T.default.INTENT_TO_PLAY)),i(a,p.LudoEvents.LOADED,t(T.default.LOADED)),i(a,p.LudoEvents.PLAYING,t(T.default.PLAYING)),i(a,p.LudoEvents.LOADING,t(T.default.LOADING)),i(a,p.LudoEvents.PAUSE,t(T.default.PAUSE)),i(a,p.LudoEvents.SEEKED,t(T.default.SEEKED)),i(a,p.LudoEvents.SEEKING,t(T.default.SEEKING)),i(a,p.LudoEvents.BITRATESWITCH,t(T.default.BITRATESWITCH)),i(a,p.LudoEvents.BUFFERSTART,t(T.default.BUFFERSTART)),i(a,p.LudoEvents.BUFFEREND,t(T.default.BUFFEREND)),i(a,p.LudoEvents.ERROR,function(e,t){t.fatal&&o.emit(T.default.ERROR)}),i(a,p.LudoEvents.ENDED,function(){t(T.default.ENDED).apply(void 0,arguments),e.once(p.LudoEvents.PLAY,function(){o.emit(T.default.INTENT_TO_PLAY)})}),i(a,p.LudoEvents.ITEM_CHANGED,function(){o.emit(T.default.UNLOAD),e.once(p.LudoEvents.PREPARE,function(){o.emit(T.default.INTENT_TO_PLAY)})}),i(a,"liveprogram-changed",function(e){o.emit(T.default.PROGRAM_CHANGED,e?e.programId:null)}),a);return{emitter:o,attachForwardEvents:n,detachForwardEvents:r}}function o(e){function t(){return I?e.currentLiveTime().getTime()/1e3:e.currentTime()}function n(){return I?e.convertTimeToLiveTime(e.duration()).getTime()/1e3:e.duration()}function r(){var t=e.adapterName();if(t){if("LudoCastPlayerAdapter"===t)return S("Detach forwarded events from mediaTracker"),w(),void F.stop();S("Attach events to mediaTracker"),k()}}var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=i.googleAnalytics,u=i.debug,d=void 0===u?l.default:u,f=i.SpringStreams,h=void 0===f?y.default:f,v=i.AkaHTML5MediaAnalytics,g=void 0===v?E.default:v,b=i.mediaTracker,_=void 0===b?m.default:b,S=d("ludo:mediaLogger"),L={};L[A.default.SCORES]=h,L[A.default.AKAMAI]=g,L[A.default.GA]=function(e){return o.send("event",e)};var R=a(e),O=R.emitter,k=R.attachForwardEvents,w=R.detachForwardEvents,D={};Object.keys(A.default).forEach(function(e){D[A.default[e]]=d("ludo:mTr:"+e.toLowerCase())});var P={},I=void 0;Object.keys(A.default).forEach(function(e){P[A.default[e]]={}});var x=function(){if(P[A.default.AKAMAI]&&P[A.default.AKAMAI].data){var t=e.adapterName()||"LudoUnresolvedAdapter";P[A.default.AKAMAI].data.playerId=t}},C=function(e){if(P[A.default.AKAMAI]&&P[A.default.AKAMAI].data){var t=e&&e.sources||[],n=s(t,1),r=n[0];r=void 0===r?{}:r;var i=r.src;P[A.default.AKAMAI].data.src=i}};e.on(p.LudoEvents.PREPARE,function(){var t=e.current();P[A.default.SCORES]=t.scoresStats,P[A.default.AKAMAI]=t.akamaiStats,P[A.default.GA]=t.gaStats,x(),C(t),I=t.isLive,O.emit(T.default.DATA_CHANGED)}),e.on(p.LudoEvents.ADAPTER,function(){x(),O.emit(T.default.DATA_CHANGED)});var M=function(t){return{playerName:"NRK Ludo player",playerVersion:e.get("version"),getLogger:function(){return D[t]},getVendor:function(){return L[t]},getData:function(){return P[t]}}},N={getPosition:t,getDuration:n,getConfig:M},F=_(c.default,O,N);e.on(p.LudoEvents.ADAPTER,r),r()}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.default=o;var u=n(13),l=r(u),d=n(5),c=r(d),f=n(16),h=r(f),p=n(6),v=n(19),m=r(v),g=n(20),y=r(g),b=n(21),E=r(b),_=n(22),T=r(_),S=n(23),A=r(S)},function(e,t){e.exports=n(33)},function(e,t){e.exports=n(36)},function(e,t){e.exports=n(35)},function(e,t){e.exports=n(32)},function(e,t){e.exports=n(34)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.debug,r=void 0===n?d.default:n,i=t.tracker,s=void 0===i?u.default:i;return c=r("ludo:liveepg"),function(t){function n(){i&&i.stop()}function r(){n();var r=t.current();r.isChannel&&(i||(i=s(t,a({},e,{log:c}))),i.start())}var i=void 0;t.on(o.LudoEvents.ITEM_CHANGED,n),t.on(o.LudoEvents.LOADED,r)}}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=i;var o=n(6),s=n(25),u=r(s),l=n(13),d=r(l),c=void 0},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e){var t=I.getRemainingTime(e);t>0&&(L("Resolve when program ends in",t/1e3,"s"),B&&clearTimeout(B),B=setTimeout(u,t+p))}function n(e){return Math.floor(Math.random()*e)}function r(e){var t=I.getRemainingBufferTime(e);t>0&&(L("Reload when buffer ends in",t/1e3,"s"),F&&clearTimeout(F),F=setTimeout(E,Math.max(t-h-n(120),0)))}function i(){U&&clearTimeout(U),U=setTimeout(E,f-n(1e3))}function o(){null!==M&&(e.emit("liveprogram-changed",null),M=null)}function u(n){var i=e.currentLiveTime(),a=i&&i.getTime();if(I.isOutdated(a))return void E();var o=I.findByTime(a,n),s=M?M.programId:null,u=o?o.programId:null,l=s!==u;if(l){L("liveprogram-changed",o);var d=null;if(o){var c=o.programId,f=o.actualStart,h=o.actualEnd,p=o.duration,v=o.plannedStart;d={programId:c,actualStart:f,actualEnd:h,duration:p,plannedStart:v}}e.emit("liveprogram-changed",d)}t(a),r(a),M=o}function d(){u(!0)}function v(){N||(e.on(a.LudoEvents.ENDED,u),e.on(a.LudoEvents.SEEKED,d),N=!0)}function m(){F&&clearTimeout(F),U&&clearTimeout(U)}function g(){B&&clearTimeout(B),m()}function y(){e.off(a.LudoEvents.ENDED,u),e.off(a.LudoEvents.SEEKED,d),N=!1}function b(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];I.set(t),e.set("epg",t),e.emit("epg-updated",t)}function E(){var t=e.current()||{},n=t.id,r=(new Date).getTime();if(G===n&&j&&r-j<15e3)return void i();if(G=n,!n)throw new Error("Could not find current channel");L("Load "+n+" epg"),m(),j=r,x(n).then(function(e){b(w(e)),u(),i()}).catch(function(){i()})}function _(){C=!0,v(),E()}function T(){C=!1,y(),g(),b([]),o(),G=null}var S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},A=S.log,L=void 0===A?function(){}:A,R=S.programList,O=void 0===R?s.default:R,k=S.parse,w=void 0===k?l.default:k,D=S.loader,P=void 0===D?c.default:D,I=O(),x=P(S),C=!1,M=void 0,N=!1,F=void 0,B=void 0,U=void 0,j=void 0,G=void 0;return{start:_,stop:T,isTracking:function(){return C}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n(6),o=n(26),s=r(o),u=n(27),l=r(u),d=n(28),c=r(d),f=9e5,h=1e3,p=100},function(e,t,n){"use strict";function r(){function e(e){l=e}function t(e,t){for(var n=void 0,r=l.length-1;r>=0;r--)if(n=l[r],e>=n.actualStart-(t?a:0)&&e<n.actualEnd)return n;return null}function n(){return l&&l[l.length-1]}function r(e){return l&&(0,i.arrayFind)(l,function(t){return t.actualStart>e})}function o(e){var t=n();return!!t&&e>t.actualEnd}function s(e){var r=n();if(!r)return-1;var i=t(e);return i?r.actualEnd-e:-1}function u(e){var n=t(e);if(n)return n.actualEnd-e;var i=r(e);return i?i.actualStart-e:-1}var l=[];return{set:e,findByTime:t,isOutdated:o,getRemainingBufferTime:s,getRemainingTime:u}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=n(11),a=3e4},function(e,t,n){"use strict";function r(e){s=s||/^\/Date\((\d+)(?:[-+](\d+))?\)\/$/;var t=s.exec(e);return t&&t[1]?parseInt(t[1],10):null}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map(function(e){var t=e.duration?(0,o.toSeconds)((0,o.parse)(e.duration)):null,n=r(e.plannedStart),i=r(e.actualStart),s=i&&t?i+1e3*t:null;return a({},e,{duration:t,plannedStart:n,actualStart:i,actualEnd:s,data:e})})}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=i;var o=n(9),s=void 0},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(11);t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.apiClient,n={};return function(e){var i=n[e]=n[e]||{};return i.isLoading?i.promise:(i.promise=new r.Promise(function(n,r){i.isLoading=!0,t.getLiveEpg(e).then(function(e){i.isLoading=!1,n(e)}).catch(function(){i.isLoading=!1,r(new Error("Loading epg data failed"))})}),i.promise)}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(5),a=r(i),o=n(30),s=n(11);t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.retries,n=void 0===t?3:t,r=e.retryDelay,i=void 0===r?1e3:r,u=e.domain,l=void 0===u?"psapi.nrk.no":u,d=e.headers,c=void 0===d?{}:d,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},h=f.window,p=void 0===h?a.default:h,v=f.createFetch,m=void 0===v?o.createFetch:v,g=f.fetchFn,y=void 0===g?s.fetch:g,b=f.Headers,E=void 0===b?s.Headers:b,_=m({retries:n,retryDelay:i,fetchFn:y}),T=new E(c),S={method:"GET",headers:T,mode:"cors",cache:"default"},A=function(e){if(!e||200!==e.status)throw new Error("Failed to load data...");return e.json()},L=function(e){return p.location.protocol+"//"+l+"/"+e};return{getLiveEpg:function(e){var t=L("channels/"+e+"/epglivebuffer");return _(t,S).then(A)},getMediaItem:function(e){var t=L("mediaelement/"+e);return _(t,S).then(A)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createFetch=void 0;var r=n(11),i=t.createFetch=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.retries,n=void 0===t?3:t,i=e.retryDelay,a=void 0===i?1e3:i,o=e.fetchFn;return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.retries,s=void 0===i?n:i,u=t.retryDelay,l=void 0===u?a:u;return new r.Promise(function(n,r){var i=function i(a){o(e,t).then(function(e){n(e)}).catch(function(e){a>0?setTimeout(function(){i(a-1)},l):r(e)})};i(s)})}};t.default=i()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.NRKMediaItemFactory,r=void 0===n?o.default:n;return function(t,n){return s.Promise.all(n.map(function(t){var n=t.id,i=t.startTime;return e.getMediaItem(n).then(function(e){var t=r(e);return t[0].startTime=i,t})})).then(function(e){return e.reduce(function(e,t){return t.forEach(function(t){e.push(t)}),e},[])})}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n(3),o=r(a),s=n(11)}])})},2,function(e,t,n){!function(t,r){e.exports=r(n(54),n(55),n(56),n(60),n(57),n(20),n(20),n(59),n(58))}(this,function(e,t,r,i,a,o,s,u,l){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="/dist/",t(0)}([function(e,t,n){e.exports=n(38)},function(e,t){e.exports=n(54)},function(e,t){e.exports=n(55)},function(e,t,n){"use strict";function r(e){if(e.value)return e.value;for(var t=0;t<e.length;++t){var n=e[t];if(n.checked)return n.value}return null}Object.defineProperty(t,"__esModule",{value:!0}),t.setClassNames=t.createElementFromTemplate=t.offsetTop=t.offsetLeft=void 0,t.getCheckedNodeValue=r;var i=n(19),a=n(2),o=function(e){return function(t){for(var n=0,r=t;r;)"number"==typeof r[e]&&(n+=r[e]),r=r.offsetParent;return n}};t.offsetLeft=o("offsetLeft"),t.offsetTop=o("offsetTop"),t.createElementFromTemplate=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.document,n=t.createElement("div");n.innerHTML=e;var r=n.firstChild;return r&&r.parentNode.removeChild(r),r},t.setClassNames=function(e,t){var n=(0,a.classList)(e);Object.keys(t).forEach(function(e){n[t[e]?"add":"remove"](e)})}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={LANG:"lang",TRANSLATION:"translation",ALLOWHIDECONTROLS:"allowhidecontrols",BLOCKHIDECONTROLS:"blockhidecontrols",CONTROLBARVISIBLE:"controlbarvisible",CONTROLBARHIDDEN:"controlbarhidden",CONTROLLEROFF:"controlleroff",CONTROLLERON:"controlleron",DISABLECONTROLS:"disablecontrols",ENABLECONTROLS:"enablecontrols",SHOWCONTROLS:"showcontrols",IDLE:"idle",TOGGLEHELPOVERLAY:"togglehelpoverlay",TOGGLEMETRICS:"togglemetrics",SEEKTIMEUPDATE:"seektimeupdate",SEEKTIMEENDED:"seektimeended",RESIZE:"resize",BREAKPOINT:"breakpoint",OPTIONCHANGED:"optionchanged"}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={MOVE:"move",MOVEEND:"moveend",MOVESTART:"movestart",DRAG:"drag",DRAGSTART:"dragstart",DRAGEND:"dragend",SEEKTO:"seekto",PROGRAM_ENTER:"program-enter",PROGRAM_LEAVE:"program-leave",ZONE_ENTER:"zone-enter",ZONE_LEAVE:"zone-leave",LABEL_CHANGED:"label-changed",THUMBNAIL_LOADED:"thumbnail-loaded",THUMBNAIL_LOADING:"thumbnail-loading",THUMBNAIL_REMOVE:"thumbnail-remove",THUMBNAIL_HIDE_IMAGE:"thumbnail-hide-image",THUMBNAIL_POSITION_CHANGED:"thumbnail-position-changed",THUMBNAIL_VISIBILITY_CHANGED:"thumbnail-visibility-changed",THUMBNAIL_LABEL_CHANGED:"thumbnail-label-changed",PLAYING_SECOND_UPDATED:"playing_second_updated",ENDTIME_SECOND_UPDATED:"endtime_second_updated",SLIDING_TIME_POSITIONED:"sliding-time-position",PLAYED_TIME_UPDATED:"played-time-updated",POINTS_UPDATED:"points-updated",EPG_UPDATED:"epg-updated",TOUCHSTART:"touchstart"}},function(e,t){"use strict";function n(){function e(){a||(r(),a=!0)}function t(){a&&(i(),a=!1)}function n(n){var r="boolean"==typeof n?n:!a;r?e():t()}var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},a=!1;return{on:e,off:t,toggle:n}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){function r(n){i.forEach(function(r){e[n](r,t[r])})}var i=Object.keys(t);return n(function(){return r("on")},function(){return r("off")})}},function(e,t){e.exports=n(56)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.translator=t.resolveTranslation=t.addTranslation=void 0;var i=n(7),a=r(i),o=n(4),s=r(o),u=n(9),l=r(u),d={},c=void 0,f=function(e){var t=d[e];return t||/^en/.test(e)||c("Cound not find translations for "+e),{get:function(e){var n=t&&t[e]||e;return n},lang:e}};t.addTranslation=function(e){d[e.lang]=e.translations||{}},t.resolveTranslation=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.debug,r=void 0===n?a.default:n;c=r("ludo:lang"),e.on(s.default.LANG,function(t){c("Set language '"+t+"'");var n=f(t);e.set(l.default.LANG,t),e.set(l.default.TRANSLATION,n),e.emit(s.default.TRANSLATION,n)})},t.translator=function(e,t){var n=function(n){var r=n||e.get(l.default.TRANSLATION);r&&t(r)};return e.on(s.default.TRANSLATION,n),n(),n}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={LANG:"lang",TRANSLATION:"translation",BREAKPOINT:"breakpoint",FULLSCREEN_ENABLED:"fullscreen-enabled",SUBTITLES_DISPLAYED:"subtitles-displayed",PINNED_CONTROL_OVERLAY:"pinned-control-overlay"}},function(e,t){e.exports=n(60)},function(e,t){e.exports=n(57)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(23),a=r(i),o=n(15),s=r(o);t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.iconName,r=void 0===n?"":n,i=e.modifiers,o=void 0===i?[]:i,u=e.attributes,l=void 0===u?{}:u,d=t.ludoIcon,c=void 0===d?a.default:d,f=t.createElement,h=void 0===f?s.default:f,p=c({iconName:r,identifier:"ludo-bar__icon"}),v=h({tag:"button",identifier:"ludo-bar__button",modifiers:o,attributes:l});return v.appendChild(p.element),{element:v,setIconName:p.setIconName}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1);t.default=function(e){function t(){e.seekTo(e.duration()),e.isPaused()&&e.play()}function n(){return e.mediaType()!==r.LudoMediaTypes.LIVE?void e.playpause():e.isPaused()?void t():void e.pause()}return{playLive:t,playpause:n}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.iconElement=void 0;var i=n(7),a=r(i),o=n(18),s=r(o),u=(0,a.default)("ludo:svg"),l="http://www.w3.org/2000/svg",d=function(e){if(!DOMParser)return u("DOMParser don't exist."),!1;var t=void 0;try{t=(new DOMParser).parseFromString(e,"text/xml")}catch(e){return u(e),!1}var n=t.getElementsByTagName("parsererror");return n.length?(u(n),!1):document.adoptNode(t.documentElement.cloneNode(!0))};t.iconElement=function(e){var t=document.createElementNS(l,"svg"),n=document.createElementNS(l,"use");return n.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+e),t.appendChild(n),t},t.default=function(e){var t=e||s.default,n=document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1");if(!n)return void u("SVG not supported.");if("ludoSvgIconsLoaded"in document)return void u("Icons already loaded.");document.ludoSvgIconsLoaded=!1;var r=function(){if(!document.ludoSvgIconsLoaded){var e=d(t);if(!e)return void u("Icons not loaded. Could not parse SVG source.");e.setAttribute("style","position:absolute; width: 0; height: 0"),document.body.insertBefore(e,document.body.firstChild),document.ludoSvgIconsLoaded=!0,document.body.className+=" ludo-svg-icons-loaded"}};document.body?r():document.addEventListener("DOMContentLoaded",r,!1)}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(34),o=r(a),s=n(3);t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.tag,n=e.template,r=void 0===n?"":n,a=e.identifier,u=void 0===a?"":a,l=e.modifiers,d=void 0===l?[]:l,c=e.attributes,f=void 0===c?{}:c,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},p=h.createElementFromTemplate,v=void 0===p?s.createElementFromTemplate:p,m=h.document,g=void 0===m?o.default:m,y=t&&t.length?g.createElement(t):v(r),b=i({},"button"===t?{type:"button"}:{},f);Object.keys(b).forEach(function(e){y.setAttribute(e,b[e])});var E={};return u&&(E[u]=!0),d.forEach(function(e){E[u+"--"+e]=!0}),(0,s.setClassNames)(y,E),y}},function(e,t){e.exports=n(20)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.format=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(20),a=n(2),o=function(e){var t=Math.floor(Math.abs(e));return t<10?"0"+t:String(t)},s=function(e){return 3!==e.length||e.some(function(e){return(0,a.numberIsNaN)(e)})?[]:e},u=function(e){var t=["hours","minutes","seconds"].map(function(t){return e.hasOwnProperty(t)&&e[t]});return s(t)},l=function(e){if(1!==e.length)return s(e);var t=e[0],n="undefined"==typeof t?"undefined":r(t);if(t instanceof Date)return[t.getHours(),t.getMinutes(),t.getSeconds()];if(Array.isArray(t))return s(t);if("string"===n)return u((0,i.parse)(t));if("object"===n)return u(t);if(!(0,a.numberIsNaN)(t)){var o=Math.abs(t),l=t<0?-1:1,d=l*Math.floor(o/3600),c=l*Math.floor(o/60%60),f=l*Math.floor(o%60);return s([d,c,f])}return[]};t.format=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0]instanceof Date,i=l(t),a=r?i:i.reduce(function(e,t,n){return(n>0||e.length||0!==t)&&e.push(t),e},[]),s=a.map(o),u=a.some(function(e){return e<0})?"-":"",d=s.join(":");return u+d}},function(e,t){e.exports='<svg style="position:absolute" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><linearGradient x1="8.042%" y1="0%" x2="65.682%" y2="23.865%" id="spinner-tail-stroke"><stop stop-color="#fff" stop-opacity="0" offset="0%"></stop><stop stop-color="#fff" stop-opacity=".631" offset="63.146%"></stop><stop stop-color="#fff" offset="100%"></stop></linearGradient></defs><symbol viewBox="0 0 16 16" id="ludo-airplay--off"><title>airplay--off</title><g id="Artboards"><g id="airplay--off"><path id="dialog" transform="matrix(1 0 0 -1 0 21)" d="M3.5 8h9L8 13z"></path><path d="M2 3h12v7h-3l1 1h2.072c.51 0 .928-.392.928-.896V2.896C15 2.39 14.578 2 14.073 2H1.927C1.421 2 1 2.392 1 2.896v7.208c0 .507.422.896.928.896H4l1-1H2V3z" id="dialog"></path></g></g></symbol><symbol viewBox="0 0 16 16" id="ludo-airplay--on"><title>airplay--on</title><g id="Artboards"><g id="airplay--on"><path id="Rectangle" d="M3 4h10v5h-2.75L8 6.5 5.75 9H3z"></path><path d="M2 3h12v7h-3l1 1h2.072c.51 0 .928-.392.928-.896V2.896C15 2.39 14.578 2 14.073 2H1.927C1.421 2 1 2.392 1 2.896v7.208c0 .507.422.896.928.896H4l1-1H2V3z" id="dialog"></path><path id="dialog" transform="matrix(1 0 0 -1 0 21)" d="M3.5 8h9L8 13z"></path></g></g></symbol><symbol viewBox="0 0 32 32" id="ludo-close"><path d="M29.146 2.146l-27 27 .707.707 27-27-.707-.707zm.708.708l-.707-.707-27 27 .707.707 27-27z"></path><path d="M2.146 2.854l27 27 .707-.707-27-27-.707.707zm.708-.708l-.707.707 27 27 .707-.707-27-27z"></path></symbol><symbol viewBox="0 0 32 32" id="ludo-fullscreen-control"><path d="M15.4 24.2l-6-.5 5.2-5.2c.3-.3.3-.8 0-1.1s-.8-.3-1.1 0l-5.2 5.2-.5-6c0-.6-1.4-.8-1.8 0V26h9.4c1-.3.6-1.8 0-1.8zM16.6 6c-1.1.3-.6 1.8 0 1.8l6 .5-4.7 4.7c-.3.3-.3.8 0 1.1.2.2.4.2.6.2s.4-.1.6-.2l4.7-4.7.5 6.1c0 .6 1.4.8 1.8 0V6h-9.5z"></path></symbol><symbol viewBox="0 0 32 32" id="ludo-fullscreen-control--full"><path d="M26.4 13.2l-6-.5L25.1 8c.3-.3.3-.8 0-1.1s-.8-.3-1.1 0l-4.7 4.7-.5-6.1c0-.6-1.4-.8-1.8 0V15h9.4c1-.3.6-1.8 0-1.8zM5.6 18.8l5.9.5-5.1 5.1c-.3.3-.3.8 0 1.1.2.2.4.2.6.2s.4-.1.6-.2l5.2-5.2.5 6.1c0 .6 1.4.8 1.8 0V17H5.6c-1 .3-.6 1.8 0 1.8z"></path></symbol><symbol viewBox="0 0 32 32" id="ludo-help"><path d="M4.006 11.36h1.56l-.504 3.072c.64-.608 1.324-.912 2.052-.912.52 0 .918.142 1.194.426s.414.686.414 1.206c0 .168-.02.372-.06.612L7.954 20h-1.56l.648-3.84c.032-.224.048-.384.048-.48 0-.536-.276-.804-.828-.804-.456 0-.92.236-1.392.708L4.126 20h-1.56l1.44-8.64zm8.196 2.304L11.05 20.6c-.104.608-.314 1.068-.63 1.38s-.774.468-1.374.468c-.368 0-.712-.056-1.032-.168l.3-1.116c.192.048.372.072.54.072.2 0 .348-.05.444-.15s.168-.29.216-.57l1.14-6.852h1.548zm-1.428-1.5c0-.288.104-.514.312-.678s.464-.246.768-.246c.248 0 .444.06.588.18s.216.288.216.504c0 .288-.1.514-.3.678s-.456.246-.768.246c-.24 0-.436-.062-.588-.186s-.228-.29-.228-.498zm6.96 6.168l.42 1.008a4.617 4.617 0 0 1-2.676.816c-.792 0-1.408-.232-1.848-.696s-.66-1.112-.66-1.944c0-1.192.338-2.156 1.014-2.892s1.546-1.104 2.61-1.104c.696 0 1.236.176 1.62.528s.576.812.576 1.38c0 .92-.436 1.536-1.308 1.848-.472.168-1.332.292-2.58.372a5.126 5.126 0 0 0-.312.024c0 .328.106.604.318.828s.538.336.978.336c.56 0 1.176-.168 1.848-.504zm-3.108-1.788c.48-.024.858-.052 1.134-.084s.544-.084.804-.156.446-.178.558-.318.168-.318.168-.534c0-.216-.07-.392-.21-.528s-.338-.204-.594-.204c-.504 0-.918.18-1.242.54s-.53.788-.618 1.284zM20.902 20h-1.56l1.44-8.64h1.56L20.902 20zm3.888-4.344l-.42 2.472c.112.168.278.324.498.468s.478.216.774.216c.528 0 .948-.218 1.26-.654s.468-1.066.468-1.89c0-.944-.344-1.416-1.032-1.416-.528 0-1.044.268-1.548.804zM23.662 22.4h-1.56l1.452-8.736h1.296l.024.828c.672-.648 1.396-.972 2.172-.972.632 0 1.126.214 1.482.642s.534 1.046.534 1.854c0 1.224-.282 2.218-.846 2.982s-1.362 1.146-2.394 1.146c-.736 0-1.288-.26-1.656-.78l-.504 3.036z"></path></symbol><symbol viewBox="0 0 32 32" id="ludo-playpause--paused"><path d="M10 26V6c0-1 1.2-1.5 2.1-.8l13.7 9.7c.9.6.9 1.7 0 2.3l-13.7 9.7c-.9.6-2.1.1-2.1-.9z"></path></symbol><symbol viewBox="0 0 32 32" id="ludo-playpause--playing"><path d="M21 4h2c.6 0 1 .4 1 1v22c0 .6-.4 1-1 1h-2c-.6 0-1-.4-1-1V5c0-.6.4-1 1-1zM9 4h2c.6 0 1 .4 1 1v22c0 .6-.4 1-1 1H9c-.6 0-1-.4-1-1V5c0-.6.4-1 1-1z"></path></symbol><symbol viewBox="0 0 32 32" id="ludo-playpause--stop"><path d="M5 28c-.6 0-1-.4-1-1V5c0-.6.4-1 1-1h21c.6 0 1 .4 1 1v22c0 .6-.4 1-1 1z"></path></symbol><symbol viewBox="0 0 38 38" id="ludo-spinner-tail"><g transform="translate(1 1)" fill="none" fill-rule="evenodd"><path d="M36 18c0-9.94-8.06-18-18-18" id="spinner-tail-path" stroke="url(#spinner-tail-stroke)" stroke-width="2"></path><circle fill="#fff" cx="36" cy="18" r="1"></circle></g></symbol><symbol viewBox="0 0 32 32" id="ludo-subtitle-control"><path d="M7 16.6h3V15H7zM11 16.6h4V15h-4zM16 16.6h2V15h-2zM19 16.6h4V15h-4zM7 19.6h2V18H7zM10 19.6h3V18h-3zM14 19.6h5V18h-5z"></path><path d="M28.8 5H3.2C2.5 5 2 5.5 2 6.2v17.6c0 .7.5 1.2 1.2 1.2H21l5 4v-4h2.8c.7 0 1.2-.5 1.2-1.2V6.2c0-.7-.5-1.2-1.2-1.2zm-.4 18.4h-4v2.3l-2.8-2.3h-18V6.6h24.8v16.8z"></path></symbol><symbol viewBox="0 0 32 32" id="ludo-subtitle-control--notavailable"><path d="M28.8 5H3.2C2.5 5 2 5.5 2 6.2v17.6c0 .7.5 1.2 1.2 1.2H21l5 4v-4h2.8c.7 0 1.2-.5 1.2-1.2V6.2c0-.7-.5-1.2-1.2-1.2zm-.4 18.4h-4v2.3l-2.8-2.3h-18V6.6h24.8v16.8z"></path></symbol><symbol viewBox="0 0 32 32" id="ludo-subtitle-control--on"><path d="M28.8 5H3.2C2.5 5 2 5.5 2 6.2v17.6c0 .7.5 1.2 1.2 1.2H21l5 4v-4h2.8c.7 0 1.2-.5 1.2-1.2V6.2c0-.7-.5-1.2-1.2-1.2zM16 15h2v1.6h-2V15zm-5 0h4v1.6h-4V15zm-4 0h3v1.6H7V15zm2 4.6H7V18h2v1.6zm4 0h-3V18h3v1.6zm6 0h-5V18h5v1.6zm4-3h-4V15h4v1.6z"></path></symbol><symbol viewBox="0 0 32 32" id="ludo-volume-control--3"><path d="M3 12s-1 0-1 4 1 4 1 4h7l6 8h1V4h-1l-6 8H3zM19 7.4c4.75 0 8.6 3.85 8.6 8.6s-3.85 8.6-8.6 8.6V26c5.523 0 10-4.477 10-10S24.523 6 19 6v1.4z"></path><path d="M19 10.9a5.1 5.1 0 1 1 0 10.2v1.4a6.5 6.5 0 1 0 0-13v1.4z"></path><path d="M19 14.15a1.85 1.85 0 1 1 0 3.7v1.4a3.25 3.25 0 1 0 0-6.5v1.4z"></path></symbol><symbol viewBox="0 0 32 32" id="ludo-volume-control--muted"><path d="M16 4l-6 8H3s-1 0-1 4 1 4 1 4h7l6 8h1V4h-1zm-.6 20.5l-4.6-6.1h-7c-.1-.4-.2-1.1-.2-2.4s.1-2 .2-2.4h7l4.6-6.1v17zM27.1 16l3.4-3.4c.2-.2.2-.4.2-.6s-.1-.4-.2-.6c-.3-.3-.8-.3-1.1 0L26 14.9l-3.4-3.4c-.3-.3-.8-.3-1.1 0-.2.2-.2.4-.2.6s.1.4.2.6l3.4 3.4-3.4 3.4c-.2.2-.2.4-.2.6s.1.4.2.6.4.2.6.2.4-.1.6-.2l3.4-3.4 3.4 3.4c.2.2.4.2.6.2s.4-.1.6-.2.2-.4.2-.6-.1-.4-.2-.6L27.1 16z"></path></symbol></svg>';
},function(e,t){e.exports=n(20)},function(e,t){e.exports=n(59)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(7),a=r(i),o=(0,a.default)("ludo:css");t.default=function(){return"ludoStyleSheetLoaded"in document?void o("Stylesheet already loaded."):(n(102),void(document.ludoStyleSheetLoaded=!0))}},function(e,t,n){"use strict";function r(e){return e.split(":").map(parseFloat).reduce(function(e,t,n){return e+t*[3600,60,1][n]},0)}function i(e){var t=e.replace(/(\r|\n)$/g," $&").replace(/<b>/g,'<span class="'+d.bold+'">').replace(/<i>/g,'<span class="'+d.italic+'">').replace(/<u>/g,'<span class="'+d.underline+'">').replace(/<c\.(.*?)>/g,'<span class="'+d.color+'-$1">').replace(/<\/b>|<\/i>|<\/u>|<\/c>/g,"</span>");return'<div class="'+d.line+'">            <span class="'+d.inner+'">'+t+"</span>          </div>"}function a(e){var t={};return e.forEach(function(e){var n=e.split(/:/);t[n[0]]=n[1]}),t}function o(e){var t=e.trim().split("\n").slice(2),n=[{start:-1,end:-1,text:""}],o={id:"",text:""},s=void 0;return t.forEach(function(e){if(/^\d+$/.test(e))o.id=e;else if(0===e.trim().length&&s)n.push(o),o={start:0,end:0,text:""},s=!1;else if(/-->/.test(e)){var t=e.split(/\s/);o.start=r(t[0]),o.end=r(t[2]),o.config=t.length>3?a(t.slice(3)):{},s=!0}else s&&(o.text+=i(e))}),n.push(o),n}function s(e){return o(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.setClassNamePrefix=void 0,t.default=s;var u=n(2),l={bold:"bold",italic:"italic",underline:"underline",color:"color",line:"line",inner:"line-inner"},d=(0,u.objectAssign)({},l);t.setClassNamePrefix=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";d=Object.keys(l).reduce(function(t,n){return t[n]=""+e+l[n],t},{})}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(15),a=r(i),o="http://www.w3.org/1999/xlink",s=function(e){return'<svg><use xmlns:xlink="'+o+'" xlink:href="#ludo-'+e+'"></use></svg>'};t.default=function(){function e(e){var t=p.querySelector("use"),n=t.getAttributeNodeNS(o,"href");n.value="#ludo-"+e}var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.iconName,i=void 0===r?"":r,u=t.modifiers,l=void 0===u?[]:u,d=t.identifier,c=n.createElement,f=void 0===c?a.default:c,h=s(i),p=f({template:h,identifier:d,modifiers:l});return{element:p,setIconName:e}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(12),a=r(i),o=n(3),s=n(1),u="airplay",l=u+"--on",d=u+"--off";t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.barButton,r=void 0===n?a.default:n,i=t.setClassNames,c=void 0===i?o.setClassNames:i,f=r({modifiers:[u],iconName:d}),h=f.element;e.insertControl(h),h.setAttribute("aria-label","airplay");var p=function(e){f.setIconName(e?l:d),c(h,{"ludo-bar__button--airplay-on":e,"ludo-bar__button--airplay-off":!e})};return function(e){e.on(s.LudoEvents.AIRPLAYON,function(){p(!0)}),e.on(s.LudoEvents.AIRPLAYOFF,function(){p(!1)}),h.addEventListener("click",function(t){t.stopPropagation(),e.airplay()})}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){var t=u.duration(),n=u.currentTime(),r=u.isPaused(),i=u.isMuted(),l=u.get(d.LudoOptions.FULLSCREEN),c=u.get(d.LudoOptions.SUBTITLES),f=e||{},h=f.videoHeight,p=f.videoWidth,v=f.corruptedFrames,m=f.droppedFrames,g=f.switchCount,y=f.currentPlayingBitrate,b=f.currentWorkingBandwidth,E=f.decodedFrames,_=f.maxBitrateAvailable,T=f.currentLevel,S=f.bitrateUsage,A=g||{},L=A.down,R=A.total,O=A.up,k=T||{},w=k.audioCodec,D=k.videoCodec,P=k.loadError,I=k.bitrate,x={};S&&S.length&&S.forEach(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=s(e,2),n=t[0],r=t[1];x["bitrate"+n]=r});var C=o({duration:t,currentTime:n,isPaused:r,isMuted:i,isFullscreen:l,isSubtitlesOn:c,videoHeight:h,videoWidth:p,corruptedFrames:v,droppedFrames:m,currentPlayingBitrate:y,currentWorkingBandwidth:b,decodedFrames:E,maxBitrateAvailable:_,switchDown:L,switchTotal:R,switchUp:O,audioCodec:w,videoCodec:D,loadError:P,bitrate:I},x);return Object.keys(C).reduce(function(e,t){var n=C[t];return["undefined","object"].indexOf("undefined"==typeof n?"undefined":a(n))===-1&&(e[t]=""+n),e},{})}function t(e){return Object.keys(e).map(function(t){return t+":"+e[t]}).join(" ")}var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.message,i=void 0===r?"":r,u=n.player,c=n.ui,f=l.default&&l.default.navigator||{},h=f.userAgent,p=void 0===h?"Useragent-string":h,v=c.get("version")||"Player-version",m=u.metrics(),g=m||{},y=g.src,b=void 0===y?"Player-streamurl":y,E=g.adapter,_=void 0===E?"Player-technology":E,T=u.current()||{},S=T.id,A=void 0===S?"Player-itemid":S,L=void 0;try{L=t(e(m))}catch(e){L=""}var R="https://docs.google.com/forms/d/1jCjn6SSPkkboFo7i8uNVJeW9SUEWFQQR8zR7aUHGQbw/viewform",O={799299246:v,2121315565:_,226475133:p,1309325348:b,290614939:A,1493423845:i,1575104548:L},k=Object.keys(O).map(function(e){return"entry."+e+"="+encodeURIComponent(O[e])}).join("&");return R+"?"+k}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=n(16),l=r(u),d=n(1);t.default=function(e){function t(){var e=i({message:r,player:a,ui:o});n.setAttribute("href",e)}var n=e.element,r=e.message,a=e.player,o=e.ui;return a.on(d.LudoEvents.LOADED,t),t(),{update:t}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(47),a=r(i),o=n(11),s=r(o),u=n(1),l=n(9),d=r(l),c=n(4),f=r(c);t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new s.default,r=(t.builder||a.default)(e,n);return function(t){n.on("togglefullscreen",function(){t.fullscreen()}),t.on(u.LudoEvents.FULLSCREENON,function(){r.setState(!0)}),t.on(u.LudoEvents.FULLSCREENOFF,function(){r.setState(!1)}),e.on(f.default.OPTIONCHANGED,function(e,t){e===d.default.FULLSCREEN_ENABLED&&("boolean"!=typeof t||t?r.show():r.hide())}),t.on(u.LudoEvents.PREPARED,function(){e.set(d.default.FULLSCREEN_ENABLED,t.supportsFullscreen())})}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(28),o=r(a),s=n(54),u=r(s),l=n(55),d=r(l),c=n(53),f=n(52),h=r(f),p=n(11),v=r(p),m=n(7),g=r(m),y=n(4),b=r(y),E=void 0;t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.debug,r=void 0===n?g.default:n,a=t.buildElement,s=void 0===a?c.buildElement:a,l=t.flattenObject,f=void 0===l?d.default:l,p=t.copyToClipboard,m=void 0===p?u.default:p,y=t.consoleEmitter,_=void 0===y?new v.default:y,T=t.attachTriggers,S=void 0===T?h.default:T;return E=r("ludo:metrics"),S(e),function(t){var n=void 0,r=void 0,a=function(){var e=t.metrics();n.update(f(e)),E(e),r=e};_.on("copy",function(){if(r){var e=i({},r),t=["currentLevel","details","fragments"],n=e;t.forEach(function(e,r){n&&(r===t.length-1&&(n[e]=(n[e]||[]).slice(0,5)),n=n[e])});var a=JSON.stringify(e,null,"\t");m(a)}}),_.on("refresh",function(){a()}),e.on(b.default.TOGGLEMETRICS,function(){E("toggle metrics"),n?n.toggle():(n=s(e,_,o.default),n.toggle(!0)),a()})}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),a=n(59),o=n(11),s=r(o);t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=(0,i.objectAssign)({},{buildElement:a.buildElement,eventEmitter:new s.default},n),o=r.buildElement,u=r.eventEmitter,l=o(e,u);t.actions&&t.actions.length&&t.actions.forEach(function(e){return l.addAction(e)});var d=function(e){var t=void 0;t="boolean"==typeof e?e:!l.isVisible(),t?l.show():l.hide()};return u.on("closed",function(){e.enableControls(),l.unbindKeyEvents(),e.element.focus()}),u.on("opened",function(){e.disableControls(),l.bindKeyEvents()}),{show:l.show,hide:l.hide,toggle:d,isVisible:l.isVisible,content:l.content}}},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),a=n(8),o=n(1);t.default=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=n.setIconName,u=void 0===s?function(){}:s,l=n.className,d=void 0===l?"":l,c=!0,f=(0,a.translator)(e,function(e){t.setAttribute("aria-label",e.get(c?"Pause":"Play"))});return function(e){function n(n){var a;c=n,f();var s=e.mediaType()===o.LudoMediaTypes.LIVE,l="paused";n&&(l=s?"stop":"playing"),u("playpause--"+l),(0,i.setClassNames)(t,(a={},r(a,d+"--play",!n),r(a,d+"--pause",n),a))}n(!1),e.on(o.LudoEvents.PLAYING,function(){return n(!0)}),e.on(o.LudoEvents.PAUSE,function(){return n(!1)}),e.on(o.LudoEvents.ENDED,function(){return n(!1)})}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(12),a=r(i),o=n(29),s=r(o),u=n(13),l=r(u);t.default=function(e){var t=(0,a.default)({modifiers:["playpause","play"],attributes:{"aria-label":"Play"},iconName:"playpause--paused"}),n=t.element;e.insertControl(n,":first",".js-button-bar:first-child");var r=(0,s.default)(e,n,{setIconName:t.setIconName,className:"ludo-bar__button"});return function(e){var t=(0,l.default)(e),i=t.playpause;r(e),n.addEventListener("click",i)}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(96),o=r(a),s=n(67),u=r(s),l=n(71),d=r(l),c=n(72),f=r(c),h=n(69),p=r(h),v=n(70),m=r(v),g=n(65),y=r(g),b=n(66),E=r(b),_=n(68),T=r(_),S=n(3),A=n(11),L=r(A),R=n(63),O=r(R),k=n(64),w=r(k),D=n(75),P=r(D),I=n(77),x=r(I),C=n(78),M=r(C),N=n(73),F=r(N),B=n(79),U=r(B),j=n(80),G=r(j),H=n(81),V=r(H),K=n(76),W=r(K),Y=n(5),z=r(Y),q=n(1),X=n(2);t.default=function(e){var t=(0,S.createElementFromTemplate)(o.default);e.insert(t,{parent:".ludo-controlbar",position:":first"});var n={playheadElement:".ludo-playhead",playedElement:".ludo-scrubber__played",progressBarElement:".ludo-progressbar",notchElement:".ludo-scrubber__notch",thumbnailElement:".ludo-thumbnail",thumbnailLabel:".ludo-thumbnail__label",leftTimeElement:".ludo-scrubber__time--start",rightTimeElement:".ludo-scrubber__time--end",currentTimeElement:".ludo-scrubber__time--current",pointerTimeElement:".ludo-scrubber__time--pointer",clickZone:".ludo-scrubber__clickzone"},r=Object.keys(n).reduce(function(e,r){return e[r]=t.querySelector(n[r]),e},{}),a=r.progressBarElement,s=new L.default,l=e.getController(),c=(0,W.default)({ui:e,progressBarElement:a});return s.on(z.default.DRAGSTART,function(){(0,X.classList)(r.clickZone).add("ludo-scrubber__clickzone--drag")}),s.on(z.default.DRAGEND,function(){(0,X.classList)(r.clickZone).remove("ludo-scrubber__clickzone--drag")}),function(n){var o=i({},r,{player:n,scrubberElement:t,ui:e,scrubberEvents:s,controller:l,scrubberValues:c,zoneModel:(0,V.default)()});[u.default,f.default,p.default,m.default,y.default,E.default,T.default,O.default,w.default,x.default,M.default,P.default,d.default,F.default,U.default,G.default].forEach(function(e){return e(o)}),n.on(q.LudoEvents.LOADED,function(){var e=n.mediaType()===q.LudoMediaTypes.LIVE,r=n.mediaType()===q.LudoMediaTypes.DVR;t.style.display=e?"none":"",(0,S.setClassNames)(a,{"ludo-progressbar--dvr":r}),(0,S.setClassNames)(t,{"ludo-scrubber--dvr":r})})}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(8),a=n(1),o=n(12),s=r(o),u=n(3),l="subtitle-control";t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.barButton,r=void 0===n?s.default:n,o=void 0,d=void 0,c=r({modifiers:["subtitles"],iconName:l}),f=c.element;e.insertControl(f);var h=(0,i.translator)(e,function(e){var t=d?"on":"off";o||(t="disabled"),f.setAttribute("aria-label",e.get("Subtitles "+t))});return function(e){function t(){var t=e.current()||{};o=t.hasSubtitles,d=!!e.get(a.LudoOptions.SUBTITLES),h(),c.setIconName(d?l+"--on":l),f.style.display=o?"":"none",(0,u.setClassNames)(f,{"ludo-bar__button--subtitles-on":d,"ludo-bar__button--subtitles-off":!d})}[a.LudoEvents.SUBTITLESON,a.LudoEvents.SUBTITLESOFF,a.LudoEvents.SUBTITLESDISABLED,a.LudoEvents.LOADED,a.LudoEvents.OPTIONCHANGED].forEach(function(n){return e.on(n,t)}),t(),f.addEventListener("click",function(){var t=e.current();if(t.hasSubtitles){var n=!e.get(a.LudoOptions.SUBTITLES);e.subtitles(n)}})}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(99),a=r(i),o=n(3),s=n(8),u=n(1);t.default=function(e){var t=(0,o.createElementFromTemplate)(a.default);e.insertControl(t);var n=!0,r=(0,s.translator)(e,function(e){t.setAttribute("aria-label",e.get(n?"Unmute":"Mute"))});return function(e){function i(){n=e.isMuted(),r(),(0,o.setClassNames)(t,{"ludo-bar__button--volume-muted":n,"ludo-bar__button--volume-on":!n})}e.on(u.LudoEvents.VOLUMECHANGE,i),e.on(u.LudoEvents.MUTED,i),e.on(u.LudoEvents.UNMUTED,i),i(),t.addEventListener("click",function(){var t=e.isMuted();e[t?"unmute":"mute"]()})}}},function(e,t){e.exports=n(58)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e){var t=r();return t.visible=e>t.start&&e<t.end,t}function n(e){var n=r(),i=0;e>n.start&&(i=s);for(var o=i;o<a.length-1&&a[o+1].start<e;)o++;o!==s&&(s=o),t(e)}function r(){return a[s]}function i(){a=[]}var a=(0,o.default)(e),s=0;return{setTime:n,current:r,destroy:i}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n(22),o=r(a)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3);t.default=function(e){function t(){var t=window.getComputedStyle(e),n=t.display,r=t.visibility;return"none"!==n&&"hidden"!==r}function n(){if(o)return o;var n=(0,r.offsetLeft)(e),i=(0,r.offsetTop)(e),a=e.offsetHeight,s=e.offsetWidth,u=n+s,l=i+a,d={width:s,height:a,left:n,right:u,top:i,bottom:l};return(a||!a&&t())&&(o=d),d}function i(e,t){var r=n(),i=r.left,a=r.right,o=r.top,s=r.bottom;return e>=i&&e<=a&&t>=o&&t<=s}function a(){o=null}var o=null;return{isPointInside:i,getBoxModel:n,reset:a}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeMouseClickEventListener=t.addMouseClickEventListener=void 0;var r=n(1),i=n(2),a=[];t.addMouseClickEventListener=function(e,t){if(!r.SUPPORTS_TOUCH)return void e.addEventListener("click",t);var n=!1,i=function(){n=!0,setTimeout(function(){n=!1},600)},o=function(){for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];n||t.apply(e,i)};e.addEventListener("click",o),e.addEventListener("touchend",i),a.push({element:e,callback:t,touchEndEvent:i,clickEvent:o})},t.removeMouseClickEventListener=function(e,t){if(!r.SUPPORTS_TOUCH)return void e.removeEventListener("click",t);var n=(0,i.arrayFindIndex)(a,function(n){return n.element===e&&n.callback===t});if(n!==-1){var o=a[n];e.removeEventListener("touchend",o.touchEndEvent),e.removeEventListener("click",o.clickEvent),a.splice(n,1)}}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}var a=n(86),o=i(a),s=n(84),u=i(s),l=n(43),d=i(l),c=n(46),f=i(c),h=n(26),p=i(h),v=n(27),m=i(v),g=n(30),y=i(g),b=n(62),E=i(b),_=n(31),T=i(_),S=n(32),A=i(S),L=n(83),R=i(L),O=n(33),k=i(O),w=n(58),D=i(w),P=n(56),I=i(P),x=n(39),C=i(x),M=n(4),N=i(M),F=n(9),B=i(F),U=n(24),j=i(U),G=n(3),H=r(G),V=n(14),K=i(V),W=n(21),Y=i(W);e.exports={LudoUI:o.default,subtitles:u.default,controller:d.default,defaultControllers:f.default,fullscreenButton:p.default,metricsConsole:m.default,playpauseButton:y.default,poster:E.default,scrubber:T.default,subtitlesButton:A.default,spinner:R.default,volumeButton:k.default,notificationCenter:D.default,navKeys:I.default,LudoLangNbNo:C.default,dom:H,LudoUIEvents:N.default,LudoUIOptions:B.default,airplayButton:j.default,loadSvgIcons:K.default,loadStyleSheet:Y.default}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={Help:"Hjelp",Fullscreen:"Fullskjerm","Exit fullscreen":"Avslutt fullskjerm",Close:"Lukk",Play:"Spill av",Pause:"Pause","Subtitles on":"Undertekster på","Subtitles off":"Undertekster av","Subtitles disabled":"Undertekster utilgjengelig",Mute:"Lyd av",Unmute:"Lyd på",Poster:"Plakat",Live:"Direkte"};t.default={lang:"nb-NO",translations:n}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),a=r(i),o=n(2);t.default=function(e){function t(t){s!==t&&(s=t,!t&&i||(r&&clearTimeout(r),t?r=setTimeout(function(){n.style.display="block",(0,o.classList)(n).remove("ludo-controlbar--hidden"),n.style.marginBottom=null,r=setTimeout(function(){(0,o.classList)(n).add("ludo-controlbar--on"),e.emit(a.default.CONTROLBARVISIBLE)},10)},10):((0,o.classList)(n).remove("ludo-controlbar--on"),r=setTimeout(function(){(0,o.classList)(n).add("ludo-controlbar--hidden"),n.style.marginBottom="-"+n.offsetHeight+"px",r=setTimeout(function(){n.style.display="none",e.emit(a.default.CONTROLBARHIDDEN)},200)},300))))}var n=e.element.querySelector(".ludo-controlbar"),r=void 0,i=void 0,s=void 0;return{toggle:t,isVisible:function(){return(0,o.classList)(n).contains("ludo-controlbar--on")},blockHide:function(){i=!0},allowHide:function(){i=!1},element:n}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){t&&"block"===e.style.display||!t&&"none"===e.style.display||(e.style.display=t?"block":"none")}Object.defineProperty(t,"__esModule",{value:!0});var a=n(40),o=r(a),s=n(4),u=r(s);t.default=function(e){function t(){d&&(clearTimeout(d),d=null)}function n(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;t(),c||f||(d=setTimeout(function(){l.toggle(!1),e.emit(u.default.CONTROLLEROFF)},n))}function r(){var n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];document.body.style.cursor="auto",t(),l.toggle(!0),e.emit(u.default.CONTROLLERON,n)}function a(){l.isVisible()?n():r()}var s=e.getController();i(s,!1);var l=(0,o.default)(e),d=null,c=!1,f=!1;return e.on(u.default.BLOCKHIDECONTROLS,function(){f=!0}),e.on(u.default.ALLOWHIDECONTROLS,function(){f=!1}),{toggleOff:n,toggleOn:r,toggle:a,enable:function(){i(s,!0)},disable:function(){i(s,!1)},pinned:function(){c=!0,r()},unpinned:function(){c=!1},element:s,controlBar:l}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){for(var n=e;n;){if(n===t)return!0;n=n.parentNode}return!1}Object.defineProperty(t,"__esModule",{value:!0});var a=n(10),o=r(a),s=n(37),u=n(13),l=r(u);t.default=function(e,t,n,r,a){function u(){y.cancel(),m=!0,g&&clearTimeout(g),g=setTimeout(function(){m=!1},200)}var d=e.element,c=t.element,f=n.element,h=(0,l.default)(a),p=h.playpause,v="",m=!1,g=void 0,y=(0,o.default)(function(e){var n=e.screenX+"x"+e.screenY;n!==v&&t.toggleOn(),v=n},100,{trailing:!1});d.addEventListener("touchstart",u),d.addEventListener("touchmove",u),d.addEventListener("mousemove",function(e){m||y(e)}),d.addEventListener("mouseleave",function(){y.cancel(),t.toggleOff()}),(0,s.addMouseClickEventListener)(c,function(e){for(var t=e.target;t&&t!==c&&t!==f;)t=t.parentNode;t===c&&p()}),d.addEventListener("focus",function(){t.toggleOn()},!0),d.addEventListener("blur",function(e){var n=e.relatedTarget;return i(n,d)?void r():void t.toggleOff()},!0),d.addEventListener("keydown",function(e){27===e.which&&document.activeElement&&document.activeElement.blur()},!0),f.addEventListener("mouseleave",function(){n.allowHide()}),f.addEventListener("mouseenter",function(){n.blockHide()})}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(44),a=r(i),o=n(41),s=r(o),u=n(45),l=r(u),d=n(42),c=r(d),f=n(4),h=r(f),p=n(9),v=r(p),m=n(1),g=3e3;t.default=function(e){var t=(0,s.default)(e),n=t.controlBar,r=t.element;return function(i){function o(){document.body.style.cursor="none",t.toggleOff()}function s(){e.element.focus(),n.allowHide(),t.toggleOff(1e3)}var u=!1;e.on(h.default.CONTROLLEROFF,function(){u=!1}),e.on(h.default.CONTROLLERON,function(n){u||n&&(e.once(h.default.IDLE,function(){t.toggleOff()}),u=!0)}),i.once(m.LudoEvents.LOADED,function(){var r=(0,a.default)(function(){return e.emit(h.default.IDLE)},g);m.SUPPORTS_TOUCH&&(0,l.default)(e,t),m.IS_IOS||(0,c.default)(e,t,n,r,i)}),i.on(m.LudoEvents.ENDED,function(){return t.toggleOn()}),i.on(m.LudoEvents.LOADING,function(){i.sendToBack(r)}),i.on(m.LudoEvents.FULLSCREENON,function(){e.on(h.default.IDLE,o),s()}),i.on(m.LudoEvents.FULLSCREENOFF,function(){e.off(h.default.IDLE,o),s()}),i.on(m.LudoEvents.OPTIONCHANGED,function(e,n){e===m.LudoOptions.CONTROLS&&(n?t.enable():t.disable())}),i.on(m.LudoEvents.LOADED,function(){return i.bringToFront(r),i.get(m.LudoOptions.CONTROLS)?(t.enable(),t.toggleOff(),void t.toggleOff(2e3)):void t.disable()}),e.on(h.default.DISABLECONTROLS,function(){t.toggleOff(),t.disable()}),e.on(h.default.ENABLECONTROLS,function(){t.enable()}),e.on(h.default.SHOWCONTROLS,function(){t.toggleOn()}),e.on(h.default.OPTIONCHANGED,function(e,n){e===v.default.PINNED_CONTROL_OVERLAY&&(n?t.pinned():t.unpinned())}),e.get(v.default.PINNED_CONTROL_OVERLAY)?t.pinned():t.unpinned()}}},function(e,t){"use strict";function n(e,t){function n(){clearTimeout(r),r=setTimeout(e,t)}var r=null;return document.addEventListener("mousemove",n),document.addEventListener("scroll",n),document.addEventListener("keypress",n),document.addEventListener("keyup",n),document.addEventListener("focus",n),document.addEventListener("touchstart",n),document.addEventListener("touchmove",n),document.addEventListener("click",n),n(),n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(10),a=r(i),o=n(2);t.default=function(e,t){var n=e.element,r=!1,i=(0,a.default)(t.toggleOn,100,{trailing:!1});n.addEventListener("touchmove",function(){r=!1,i()}),n.addEventListener("touchstart",function(){r=!0}),n.addEventListener("touchend",function(e){if(i.cancel(),r){var n=e.changedTouches[0],a=document.elementFromPoint(n.clientX,n.clientY);a&&(0,o.classList)(a).contains("ludo-layout")&&t.toggle()}})}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(30),a=r(i),o=n(31),s=r(o),u=n(33),l=r(u),d=n(48),c=r(d),f=n(26),h=r(f),p=n(27),v=r(p),m=n(50),g=r(m),y=n(32),b=r(y),E=n(60),_=r(E),T=n(51),S=r(T),A=n(24),L=r(A),R=n(1);t.default=function(e){var t=(0,s.default)(e),n=(0,a.default)(e),r=(0,c.default)(e),i=(0,l.default)(e),o=(0,b.default)(e),u=(0,h.default)(e),d=(0,v.default)(e),f=(0,g.default)(e),p=(0,_.default)(e),m=(0,S.default)(e),y=R.IS_AIRPLAY_SUPPORTED?(0,L.default)(e):null;return function(e){t(e),n(e),i(e),r(e),o(e),u(e),d(e),f(e),p(e),m(e),"function"==typeof y&&y(e)}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(8),a=n(12),o=r(a),s=n(3),u="fullscreen-control";t.default=function(e,t){function n(){l.style.display="none"}function r(){l.style.display=""}var a=(0,o.default)({modifiers:["fullscreen"],iconName:u}),l=a.element;e.insertControl(l);var d=!1,c=(0,i.translator)(e,function(e){var t=""+(d?"Exit fullscreen":"Fullscreen");l.setAttribute("aria-label",e.get(t))});l.addEventListener("click",function(){t.emit("togglefullscreen")});var f=function(e){d=e,c(),a.setIconName(e?u+"--full":u),(0,s.setClassNames)(l,{"ludo-bar__button--fullscreen-on":e,"ludo-bar__button--fullscreen-off":!e})};return{setState:f,hide:n,show:r}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(8),a=n(4),o=r(a),s=n(12),u=r(s);t.default=function(e){var t=(0,u.default)({modifiers:["help"],iconName:"help"}),n=t.element;return e.insertControl(n),(0,i.translator)(e,function(e){n.setAttribute("aria-label",e.get("Help"))}),function(){n.addEventListener("click",function(){e.emit(o.default.TOGGLEHELPOVERLAY)})}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.buildElement=void 0;var i=n(91),a=r(i),o=n(3),s=n(19);t.buildElement=function(e,t,n){var r=(0,o.createElementFromTemplate)(a.default),i=n(e,{},{emitter:t});i.content(r);var u=s.document.createElement("span");return u.className="ludo-help__version",u.textContent="v"+e.get("version"),r.appendChild(u),{toggle:i.toggle,isVisible:i.isVisible,content:function(){return r}}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(28),a=r(i),o=n(25),s=r(o),u=n(49),l=n(4),d=r(l),c=n(11),f=r(c),h=n(7),p=r(h);t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.debug,r=void 0===n?p.default:n,i=t.buildElement,o=void 0===i?u.buildElement:i,l=t.feedbackLink,c=void 0===l?s.default:l,h=t.emitter,v=void 0===h?new f.default:h,m=r("ludo:help"),g=o(e,v,a.default),y=g.content().querySelector(".ludo-help__feedback-link");return function(t){var n=c({element:y,player:t,ui:e});e.on(d.default.TOGGLEHELPOVERLAY,function(){m("toggle help"),g.isVisible()||t.pause(),g.toggle(),n.update()})}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var a=n(8),o=n(1),s=n(2),u=n(15),l=r(u),d=n(3),c=n(6),f=r(c),h=n(13),p=r(h),v=[o.LudoMediaTypes.LIVE,o.LudoMediaTypes.DVR],m=50;t.default=function(e){var t=(0,l.default)({tag:"button",identifier:"ludo-livebutton"});return t.style.display="none",e.insert(t,{parent:".ludo-layout__topbar",position:":first"}),(0,a.translator)(e,function(e){var n=e.get("Live");t.setAttribute("aria-label",n),t.textContent=n}),function(e){function n(){return e.currentTime()>e.duration()-m}function r(){var r=n()&&!e.isPaused();(0,d.setClassNames)(t,{"ludo-livebutton--playing-live":r})}var a,u=(0,p.default)(e),l=u.playLive,c=(0,f.default)(e,(a={},i(a,o.LudoEvents.SEEKED,r),i(a,o.LudoEvents.BUFFEREND,r),i(a,o.LudoEvents.PLAYING,r),i(a,o.LudoEvents.PAUSE,r),a));e.on(o.LudoEvents.LOADED,function(){var n=e.mediaType(),i=(0,s.arrayIncludes)(v,n);t.style.display=i?"":"none",(0,d.setClassNames)(t,v.reduce(function(e,t){return e["ludo-livebutton--"+t.toLowerCase()]=n===t,e},{})),c.toggle(i),r()}),t.addEventListener("click",l)}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),a=n(2),o=n(4),s=r(o),u=function(e){var t=e||window.event,n={which:3,button:2};return Object.keys(n).some(function(e){return e in t&&t[e]===n[e]})},l=function(e){return e.target&&(0,a.classList)(e.target).contains("ludo-layout")},d=function(e){var t=e.element;t.addEventListener("mousedown",function(t){l(t)&&t.ctrlKey&&u(t)&&(t.stopPropagation(),t.preventDefault(),e.emit(s.default.TOGGLEMETRICS))})},c=function(e){var t=e.element,n=0,r=0,i=function(i){if(l(i)&&i.changedTouches){var a=i.changedTouches[0],o=a.clientY-t.offsetTop,u=a.clientX-t.offsetLeft,d=Math.min(t.offsetHeight/3,100),c=o<d&&u>t.offsetWidth-d;if(c){var f=(new Date).getTime(),h=f-r;return r=f,h>500?void(n=0):void(n>=1?(n=0,e.emit(s.default.TOGGLEMETRICS)):n++)}}};t.addEventListener("touchstart",i,!1)};t.default=function(e){i.SUPPORTS_TOUCH?c(e):d(e)}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.buildElement=t.getList=void 0;var i=n(92),a=r(i),o=n(34),s=r(o),u=n(3),l=t.getList=function(e){var t=s.default.createElement("dl");return e.forEach(function(e){var n=s.default.createElement("dt");n.appendChild(s.default.createTextNode(e.key));var r=s.default.createElement("dd");r.appendChild(s.default.createTextNode(e.val)),t.appendChild(n),t.appendChild(r)}),t};t.buildElement=function(e,t,n){var r=(0,u.createElementFromTemplate)(a.default),i=s.default.createElement("button"),o=s.default.createElement("button"),d=[o,i];d.forEach(function(e){return e.setAttribute("type","button")}),i.innerHTML="Copy",o.innerHTML="Refresh";var c=n(e,{actions:d},{emitter:t});c.content(r);var f=function(e){r.innerHTML="",r.appendChild(l(e))};return i.addEventListener("click",function(e){e.stopPropagation(),t.emit("copy")}),o.addEventListener("click",function(e){e.stopPropagation(),t.emit("refresh")}),{update:f,toggle:c.toggle,isVisible:c.isVisible}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),a=n(7),o=r(a),s=(0,o.default)("ludo:metrics"),u=function(e){var t=document.createElement("textarea");(0,i.objectAssign)(t.style,{position:"fixed",top:0,left:0,width:"2em",height:"2em",padding:0,border:"none",outline:"none",boxShadow:"none",background:"transparent"}),t.value=e,document.body.appendChild(t),t.select();try{var n=document.execCommand("copy"),r=n?"successful":"unsuccessful";s("Copying text command was "+r)}catch(e){s(e)}document.body.removeChild(t)};t.default=u},function(e,t){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=["currentLevel.details.fragments"],a=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s=o.join(".");if(i.some(function(e){return e===s}))return a;if(Array.isArray(t)){var u=[],l=!1;return t.forEach(function(t){"object"===("undefined"==typeof t?"undefined":r(t))?(l=!0,e(t,a,[].concat(n(o),["[]"]))):u.push(t)}),!u.length&&l||a.push({key:""+o.join("."),val:u.length?u.join(", "):"[]"}),a}return"object"===("undefined"==typeof t?"undefined":r(t))?(Object.keys(t||{}).forEach(function(r){var i=t[r];e(i,a,[].concat(n(o),[r]))}),a):(a.push({
key:o.join("."),val:t}),a)};t.default=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(57),a=r(i),o=n(1),s=n(9),u=r(s),l=n(13),d=r(l);t.default=function(e){return function(t){function n(e){c({percent:e})}function r(e){c({seconds:e})}function i(e){t.setVolume(t.volume()+e)}function s(a){var s=a.which,d=a.metaKey||a.ctrlKey||a.altKey||a.shiftKey,c=t.element(),f=!1;switch(s){case 37:r(d?-60:-5),a.preventDefault(),f=!0;break;case 39:r(d?60:5),a.preventDefault(),f=!0}if(!d){switch(s){case 13:case 32:a.target===l&&(h(),a.preventDefault(),f=!0);break;case 75:h(),f=!0;break;case 74:r(-10),f=!0;break;case 76:r(10),f=!0;break;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:n((s-48)/10),f=!0;break;case 36:n(0),a.preventDefault(),f=!0;break;case 35:n(1),a.preventDefault(),f=!0;break;case 38:i(.1),a.preventDefault(),f=!0;break;case 40:i(-.1),a.preventDefault(),f=!0;break;case 70:e.get(u.default.FULLSCREEN_ENABLED)&&(t.fullscreen(),f=!0);break;case 77:t.isMuted()?t.unmute():t.mute(),f=!0;break;case 67:t.subtitles(!t.get(o.LudoOptions.SUBTITLES)),f=!0;break;case 80:if(c&&c.webkitSupportsPresentationMode&&"function"==typeof c.webkitSetPresentationMode){var p=c.webkitPresentationMode;"inline"===p?(c.webkitSetPresentationMode("picture-in-picture"),e.set(u.default.FULLSCREEN_ENABLED,!1),e.set(u.default.PINNED_CONTROL_OVERLAY,!0),e.set(u.default.SUBTITLES_DISPLAYED,!1),t.emit(o.LudoEvents.PIPON)):(c.webkitSetPresentationMode("inline"),e.set(u.default.FULLSCREEN_ENABLED,!0),e.set(u.default.PINNED_CONTROL_OVERLAY,!1),e.set(u.default.SUBTITLES_DISPLAYED,!0),t.emit(o.LudoEvents.PIPOFF)),f=!0}}f&&e.showControls()}}var l=e.element,c=(0,a.default)(e,t),f=(0,d.default)(t),h=f.playpause;t.on(o.LudoEvents.PREPARED,function(){function e(){document.addEventListener("keydown",s)}function t(){document.removeEventListener("keydown",s)}l.addEventListener("focus",e,!0),l.addEventListener("blur",t,!0)})}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),a=n(4),o=r(a);t.default=function(e,t){var n=void 0,r=null,a=void 0;return t.on(i.LudoEvents.LOADED,function(){a=null}),function(i){var s=i.seconds,u=i.percent;n&&clearTimeout(n),null===r&&(r=t.currentTime()),a=a||t.duration(),"number"==typeof u?r=a*u:s&&(r+=s),r=Math.min(r,a),r=Math.max(r,0),e.emit(o.default.SEEKTIMEUPDATE,r),n=setTimeout(function(){t.seekTo(r),r=null,e.emit(o.default.SEEKTIMEENDED)},500)}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(93),o=r(a),s=n(3),u=n(1),l=n(2),d=n(25),c=r(d);t.default=function(e){var t=(0,s.createElementFromTemplate)(o.default);e.insert(t);var n=void 0;return function(r){function a(i){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=a.modal,s=void 0!==o&&o,u=a.feedback,d=void 0===u||u,f=document.createElement("div"),h=document.createElement("span");if((0,l.classList)(f).add("ludo-notifications__notification"),s&&(0,l.classList)(f).add("ludo-notifications__notification-modal"),h.textContent=i,f.appendChild(h),d){var p=document.createElement("a");p.setAttribute("target","_blank"),p.textContent="Gi oss tilbakemelding",(0,l.classList)(p).add("ludo-notifications__feedback"),(0,c.default)({element:p,message:i,player:r,ui:e}),f.appendChild(p)}t.appendChild(f),n=(new Date).getTime()}function o(){for(;t.firstChild;)t.removeChild(t.firstChild);r.sendToBack(t),n=null}function s(){var e=void 0;r.on(u.LudoEvents.TIMEUPDATE,function(t){!n||(new Date).getTime()<n+3e3||(e&&t>e&&o(),e=t)})}r.displayNotification=function(e){a(e),r.bringToFront(t)},r.displayModalNotification=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a(e,i({modal:!0},n)),r.bringToModalFront(t)},r.on(u.LudoEvents.ERROR_READABLE,function(e){var t=r.current(),n=t||{},i=n.isPlayable;r.displayModalNotification(e,{feedback:i})}),s()}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.buildElement=void 0;var i=n(94),a=r(i),o=n(3),s=n(8),u=n(2),l=1e4;t.buildElement=function(e,t){function n(){(0,u.classList)(f).add("fadein"),f.style.display="block",f.style.zIndex=l++,v.focus(),t.emit("opened")}function r(){(0,u.classList)(f).remove("fadein"),setTimeout(function(){f.style.display="none",t.emit("closed")},350)}function i(e){27===e.which&&r()}function d(){e.element.addEventListener("keydown",i)}function c(){e.element.removeEventListener("keydown",i)}var f=(0,o.createElementFromTemplate)(a.default);f.style.display="none";var h=f.querySelector(".ludo-overlay__content"),p=f.querySelector(".ludo-overlay__actions"),v=f.querySelector(".ludo-overlay__close");(0,s.translator)(e,function(e){v.setAttribute("aria-label",e.get("Close"))});var m=function(e){e&&("string"==typeof e&&(h.innerHTML=e),h.innerHTML="",h.appendChild(e))},g=function(e){p.appendChild(e)},y=function(){return"none"!==f.style.display};return h.addEventListener("click",function(e){e.stopPropagation()}),v.addEventListener("click",function(e){e.stopPropagation(),r()}),e.insert(f),{content:m,addAction:g,isVisible:y,show:n,hide:r,bindKeyEvents:d,unbindKeyEvents:c}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),a=n(15),o=r(a),s=n(23),u=r(s),l=n(10),d=r(l),c=n(29),f=r(c),h=n(13),p=r(h);t.default=function(e){var t=(0,o.default)({tag:"button",identifier:"ludo-playicon"}),n=(0,u.default)({iconName:"paused",identifier:"ludo-playicon__icon"});t.appendChild(n.element),t.style.display="none",e.insertControl(t,":first",".ludo-controlbar");var r=(0,f.default)(e,t,{setIconName:n.setIconName,className:"ludo-playicon"});return function(n){var a=(0,p.default)(n),o=a.playpause;n.once(i.LudoEvents.LOADED,function(){r(n),e.on("disablecontrols",function(){t.style.display="none"}),e.on("enablecontrols",function(){t.style.display=""});var i=(0,d.default)(o,600,{trailing:!1});t.addEventListener("click",i),t.addEventListener("touchend",i)}),n.on(i.LudoEvents.LOADED,function(){t.style.display=""})}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(95),a=r(i),o=n(3),s=n(8),u=n(1),l=n(2);t.default=function(e){var t=e.element.querySelector(".ludo-poster"),n=t||(0,o.createElementFromTemplate)(a.default),r=n.querySelector(".ludo-poster__image"),i=n.querySelector(".ludo-poster__play"),d=n.querySelector(".ludo-poster__play-progress"),c=n.querySelector(".ludo-poster__age"),f={},h=(0,s.translator)(e,function(e){r.setAttribute("alt",e.get("Poster"));var t=f.legalAgeText;c.setAttribute("title",t||"")}),p=["title","description","duration","age"].reduce(function(e,t){var r=n.querySelector(".ludo-poster__"+t);return r&&(e[t]=r),e},{});t||e.insert(n);var v=void 0,m=function(e){v=e,v.set(u.LudoOptions.POSTER_ELEMENT,n)},g=function(){v.sendToBack(n)},y=function(){v.bringToFront(n)},b=function(){i.style.display="block"},E=function(){i.style.display="none"},_=function(e){var t=d.getAttribute("stroke-dasharray"),n=(100-e)/100,r=parseInt(t*n,10);d.setAttribute("stroke-dashoffset",r)},T=function(e){r.setAttribute("src",e)},S=function(){return!!r.src},A=function(e){n.addEventListener("click",e)},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.keys(p).forEach(function(t){var n=p[t],r=e[t]||"";n.textContent=r,n.style.visibility=r.length?"visible":"hidden"}),(0,l.objectAssign)(f,e),h()};return{init:m,sendToBack:g,bringToFront:y,displayPlayButton:b,hidePlayButton:E,setPlayProgress:_,setImage:T,hasImage:S,onClick:A,displayDetails:L}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(61),a=r(i),o=n(17),s=n(1),u=n(2);t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(t.builder||a.default)(e);return function(e){n.init(e),n.bringToFront();var t=e.current();t&&t.isPlayable?n.displayPlayButton():n.hidePlayButton(),e.on(s.LudoEvents.LOADING,function(){n.hidePlayButton()}),e.on(s.LudoEvents.ERROR,function(){n.hidePlayButton()});var r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.isChannel)return void n.displayDetails({});var t=e.legalAge,r=e.description,i=e.isLive?"":(0,o.format)(e.duration),a=e.title,s=t.text,u=t.badge;n.displayDetails({title:a,description:r,duration:i,age:u,legalAgeText:s})};return new u.Promise(function(t){e.on(s.LudoEvents.PREPARED,function(){var i=e.current();if(i.startTime&&i.duration&&i.startTime>0&&i.startTime<=i.duration){var a=Math.round(i.startTime/i.duration*100);n.setPlayProgress(a)}return n.hasImage()||n.setImage(i.poster),r(i),i.isPlayable?e.get(s.LudoOptions.AUTOPLAY)?t():(n.onClick(function(){e.play(),t()}),void e.once(s.LudoEvents.BEFOREPLAY,t)):(n.hidePlayButton(),t())})})}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(36),a=r(i),o=n(1),s=n(4),u=r(s),l=n(5),d=r(l),c=n(16),f=r(c),h=100;t.default=function(e){var t=e.player,n=e.ui,r=e.scrubberEvents,i=e.playheadElement,s=e.clickZone,l=e.scrubberValues,c=n.element,p=(0,a.default)(s),v=!1,m=function(){p.reset()};t.once(o.LudoEvents.LOADED,function(){function e(e){var t=e.changedTouches&&e.changedTouches[0]||e,n=t.pageX,r=t.pageY,i=l.progressBarWidth,a=n-p.getBoxModel().left;return a=Math.max(0,a),a=Math.min(i,a),{left:a,width:i,pageX:n,pageY:r}}function t(t){if(b)return void(b=!1);if(!E&&v){var n=e(t),i=n.left,a=n.width,s=n.pageX,u=n.pageY,l=p.isPointInside(s,u);if(l!==y&&r.emit(l?d.default.MOVESTART:d.default.MOVEEND),y=l,o.SUPPORTS_TOUCH&&t.cancelable&&(E||l)&&t.preventDefault(),l){var c=i/a;r.emit(d.default.MOVE,c,{left:i,width:a})}}}function a(t){if(!E&&v&&(!t.target||t.target!==i)){var n=e(t),a=n.left,o=n.width,s=n.pageX,u=n.pageY;p.isPointInside(s,u)&&r.emit(d.default.SEEKTO,a/o)}}function s(){!E&&v&&(b=!0,r.emit(d.default.MOVEEND))}function g(t){if(!E&&v){var n=e(t),a=n.left,o=n.pageX,s=n.pageY;if(p.isPointInside(o,s)){var u=i.offsetLeft-h/2,l=i.offsetLeft+h/2,c=a>=u&&a<=l;c&&r.emit(d.default.TOUCHSTART,t)}}}var y=!1,b=!1,E=!1;m(),c.addEventListener("mousemove",t),c.addEventListener("click",a),o.SUPPORTS_TOUCH&&(c.addEventListener("touchmove",t),c.addEventListener("touchend",s),c.addEventListener("touchstart",g)),n.on(u.default.RESIZE,m),f.default.addEventListener("orientationchange",m),r.on(d.default.DRAGSTART,function(){E=!0,r.emit(d.default.MOVESTART)}),r.on(d.default.DRAGEND,function(){E=!1,r.emit(d.default.MOVEEND)}),r.on(d.default.DRAG,function(e,t){r.emit(d.default.MOVE,e,t)})}),n.on(u.default.CONTROLBARVISIBLE,function(){v=!0,m()}),n.on(u.default.CONTROLBARHIDDEN,function(){v=!1})}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var a=n(5),o=r(a),s=n(1),u=n(4),l=r(u),d=n(6),c=r(d);t.default=function(e){function t(){var e=void 0,r=void 0;if(_){var i=m.currentLiveTime();e=1001-i.getMilliseconds(),r=i.getSeconds()}else{var a=m.currentTime();e=Math.max(1e3*(Math.ceil(a)-a)+10,0===a?1e3:100),r=Math.floor(a)}n(),m.isPaused()||(b=setTimeout(t,e)),T!==r&&(y.emit(o.default.PLAYING_SECOND_UPDATED),T=r)}function n(){b&&clearTimeout(b)}function r(){if(_){var e=m.convertTimeToLiveTime(m.duration()),t=1001-e.getMilliseconds();a(),E=setTimeout(r,t),y.emit(o.default.ENDTIME_SECOND_UPDATED)}}function a(){E&&clearTimeout(E)}function u(){t(),r()}function d(){n(),r()}function f(){n(),a()}function h(){f(),S.on(),u()}function p(){f(),S.off()}var v,m=e.player,g=e.ui,y=e.scrubberEvents,b=void 0,E=void 0,_=void 0,T=void 0,S=(0,c.default)(m,(v={},i(v,s.LudoEvents.PLAYING,u),i(v,s.LudoEvents.SEEKING,u),i(v,s.LudoEvents.SEEKED,u),i(v,s.LudoEvents.PAUSE,d),i(v,s.LudoEvents.ENDED,d),v));m.on(s.LudoEvents.LOADED,function(){_=m.current().isLive}),g.on(l.default.CONTROLBARVISIBLE,h),g.on(l.default.CONTROLBARHIDDEN,p)}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(){var e=document.createElement("div");return(0,u.classList)(e).add("ludo-scrubber__buffered"),e}function o(e){return Math.min(Math.max(e,0),100).toFixed(2)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),u=n(2),l=n(5),d=r(l),c=n(4),f=r(c),h=n(6),p=r(h);t.default=function(e){var t=e.player,n=e.ui,r=e.progressBarElement,u=e.scrubberEvents;t.once(s.LudoEvents.LOADED,function(){function e(){var e=t.duration(),n=t.buffered(),i=n.length;if(l.length>i){for(var s=i;s<l.length;s++)l[s].parentElement.removeChild(l[s]);l=l.slice(0,i)}else if(l.length<i)do{var u=a();r.appendChild(u),l.push(u)}while(l.length<i);for(var d=0;d<l.length;d++){var c=n.start(d),f=n.end(d);l[d].style.left=o(c/e*100)+"%",l[d].style.width=o((f-c)/e*100)+"%"}}var s,l=[],c=(0,p.default)(u,(s={},i(s,d.default.PLAYING_SECOND_UPDATED,e),i(s,d.default.ENDTIME_SECOND_UPDATED,e),s));n.on(f.default.CONTROLBARVISIBLE,function(){c.on(),e()}),n.on(f.default.CONTROLBARHIDDEN,c.off)})}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=n(2),s=n(6),u=r(s),l=n(5),d=r(l),c=n(10),f=r(c);t.default=function(e){function t(e){var t=document.createElement("div");(0,o.classList)(t).add("ludo-progress-bar__program"),t.setAttribute("title",e.title);var n=document.createElement("div");return(0,o.classList)(n).add("ludo-progress-bar__program","ludo-progress-bar__program--progress"),"gap"===e.type&&((0,o.classList)(t).add("ludo-progress-bar__program--gap"),(0,o.classList)(n).add("ludo-progress-bar__program--progress-gap")),{programElement:t,playedElement:n}}function n(e){var t=e.programId,n=e.actualStart;return t+"-"+n}function r(){var e=(y||[]).reduce(function(e,t){return e[n(t)]=t,e},{});Object.keys(e).forEach(function(n){var r=e[n],i=g[n],a=!i;a&&(i=t(r),g[n]=i);var s=i,u=s.programElement,l=s.playedElement;a&&(_.appendChild(u),_.appendChild(l)),u.style.left=r.leftPc+"%",u.style.width=r.adjustedWidthPc+"%",r.adjustedPlayedWidthPc&&(l.style.left=r.leftPc+"%",l.style.width=r.adjustedPlayedWidthPc+"%"),l.style.display=r.adjustedPlayedWidthPc?"":"none";var d=E===n;(0,o.classList)(u).toggle("ludo-progress-bar__program--zoneover",d),(0,o.classList)(l).toggle("ludo-progress-bar__program--zoneover",d)}),Object.keys(g).forEach(function(t){if(!e.hasOwnProperty(t)){var n=g[t],r=n.programElement,i=n.playedElement;_.removeChild(r),_.removeChild(i),delete g[t]}})}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.updated,r=void 0!==n&&n;y=e,r&&T.cancel(),T(),b&&clearInterval(b),e.length&&(b=setInterval(T,1e3))}function l(e){E=n(e),r()}function c(){E=null,r()}var h,p=e.player,v=e.scrubberEvents,m=e.progressBarElement,g={},y=[],b=void 0,E=null,_=document.createElement("div");(0,o.classList)(_).add("ludo-progress-bar__epg"),m.appendChild(_);var T=(0,f.default)(r,5e3),S=(0,u.default)(v,(h={},i(h,d.default.EPG_UPDATED,s),i(h,d.default.PROGRAM_ENTER,l),i(h,d.default.PROGRAM_LEAVE,c),h));p.on(a.LudoEvents.LOADED,function(){s([]),S.toggle(p.mediaType()===a.LudoMediaTypes.DVR)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(20),i=n(1),a=n(2);t.default=function(e){function t(e){var t=document.createElement("div");(0,a.classList)(t).add("ludo-progress-bar__index-point");var n=(0,r.toSeconds)((0,r.parse)(e.startPoint));return t.style.left=n/o.duration()*100+"%",t.setAttribute("title",e.title),t.addEventListener("click",function(e){e.stopPropagation(),o.seekTo(n)}),t}function n(){var e=s.querySelectorAll(".ludo-progress-bar__index-point");Array.prototype.forEach.call(e,function(e){s.removeChild(e)})}var o=e.player,s=e.progressBarElement;o.on(i.LudoEvents.LOADED,function(){n();var e=o.current();if(e&&e.indexPoints){var r=e&&e.indexPoints;r.forEach(function(e){var n=t(e);s.appendChild(n)})}}),o.on(i.LudoEvents.ITEM_CHANGED,n)}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var a=n(5),o=r(a),s=n(6),u=r(s),l=n(1),d=n(3);t.default=function(e){function t(){var e=y&&g;if(!v||b&&e)return void(h.style.display="none");(0,d.setClassNames)(h,{"ludo-scrubber__notch--snap":e});var t=[g,m].filter(function(e){return"number"==typeof e});t.length&&(h.style.left=t[0]+"px"),h.style.display="block"}function n(e,n){var r=n.left;v=!0,m=r,t()}function r(){v=!1,t()}function a(e){g=e.positionPx+1,t()}function s(){g=null,t()}var c,f=e.player,h=e.notchElement,p=e.scrubberEvents,v=!1,m=null,g=null,y=!1,b=!1,E=(0,u.default)(p,(c={},i(c,o.default.ZONE_ENTER,a),i(c,o.default.ZONE_LEAVE,s),i(c,o.default.MOVE,n),i(c,o.default.MOVEEND,r),i(c,o.default.THUMBNAIL_VISIBILITY_CHANGED,function(e){var n=e.isVisible;y=n,t()}),i(c,o.default.DRAGSTART,function(){t()}),i(c,o.default.DRAGEND,function(){t()}),c));E.on(),f.on(l.LudoEvents.LOADED,function(){b=f.mediaType()===l.LudoMediaTypes.DVR})}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(17),a=n(1),o=n(5),s=r(o);t.default=function(e){function t(e,t){d.textContent=e,c.textContent=t,l.emit(s.default.PLAYED_TIME_UPDATED)}function n(){f=u.current().isLive,t("","")}function r(){if(!f){var e=u.duration()-u.currentTime();t("","-"+(0,i.format)(e))}}function o(){f&&t((0,i.format)(u.convertTimeToLiveTime(0)),(0,i.format)(u.convertTimeToLiveTime(u.duration())))}var u=e.player,l=e.scrubberEvents,d=e.leftTimeElement,c=e.rightTimeElement,f=void 0;u.on(a.LudoEvents.LOADED,n),l.on(s.default.PLAYING_SECOND_UPDATED,r),l.on(s.default.ENDTIME_SECOND_UPDATED,o)}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var a=n(3),o=n(1),s=n(2),u=n(4),l=r(u),d=n(6),c=r(d),f=n(5),h=r(f);t.default=function(e){function t(){var e=(0,s.arrayFind)([S,T,_],function(e){return"number"==typeof e})||0,t=Math.min((100*e).toFixed(2),100);p.style.left=t+"%",null===T&&null===S&&(v.style.width=t+"%")}function n(e){_=e/d.duration(),t()}function r(e){function n(e){var t=e.touches?e.changedTouches[0].pageX:e.pageX,n=e.touches?e.changedTouches[0].pageY:e.pageY,i=!1,o=(0,a.offsetTop)(y),s=o+y.offsetHeight,l=(0,a.offsetLeft)(y),d=l+y.offsetWidth;(n<o||n>s||t<l||t>d)&&(i=!0),i?u(e):k&&!i&&c(e),r(e)}function r(n){if(!k){e.cancelable&&n.preventDefault(),O=!0;var r=n.touches?n.changedTouches[0].pageX:n.pageX,i=b.offsetWidth,o=r-(0,a.offsetLeft)(g);o=Math.max(o,0),o=Math.min(o,i);var s=E.findPoint(o),u=void 0;u=s?s.positionPx/i:(o-1)/i,T=u,m.emit(h.default.DRAG,u,{left:o,width:i}),t()}}function i(e){e.stopPropagation(),e.preventDefault(),f.emit(l.default.ALLOWHIDECONTROLS),document.removeEventListener("mouseup",i),document.removeEventListener("mousemove",r),document.removeEventListener("touchend",i),document.removeEventListener("touchmove",n),y.removeEventListener("mouseout",u),y.removeEventListener("mouseenter",c),A.style["pointer-events"]="",document.documentElement.style.cursor=p.style.cursor="",(0,s.classList)(p).remove("ludo-playhead--drag"),m.emit(h.default.DRAGEND),O&&(O=!1,"number"==typeof T&&(d.once(o.LudoEvents.SEEKED,function(){T=null,t()}),m.emit(h.default.SEEKTO,T)))}function u(e){e.cancelable&&e.preventDefault(),k=!0,T=null,m.emit(h.default.MOVEEND),t()}function c(e){e.cancelable&&e.preventDefault(),k=!1,t()}e.cancelable&&e.preventDefault(),O=!1,k=!1,A.style["pointer-events"]="none",document.documentElement.style.cursor=p.style.cursor="-webkit-grabbing",(0,s.classList)(p).add("ludo-playhead--drag"),m.emit(h.default.DRAGSTART),f.emit(l.default.BLOCKHIDECONTROLS),document.addEventListener("mouseup",i),document.addEventListener("mousemove",r),document.addEventListener("touchend",i),document.addEventListener("touchmove",n),y.addEventListener("mouseout",u),y.addEventListener("mouseenter",c),r(e),t()}var u,d=e.player,f=e.ui,p=e.playheadElement,v=e.playedElement,m=e.scrubberEvents,g=e.scrubberElement,y=e.clickZone,b=e.progressBarElement,E=e.zoneModel;"ontouchstart"in window&&(0,s.classList)(p).add("ludo-playhead--touch");var _=0,T=null,S=null,A=f.element,L=(0,c.default)(d,i({},o.LudoEvents.TIMEUPDATE,n)),R=(0,c.default)(f,(u={},i(u,l.default.SEEKTIMEUPDATE,function(e){S=e/d.duration(),(0,s.classList)(p).add("ludo-playhead--move"),t()}),i(u,l.default.SEEKTIMEENDED,function(){d.once(o.LudoEvents.SEEKED,function(){S=null,(0,s.classList)(p).remove("ludo-playhead--move"),t()})}),u)),O=!1,k=!1;d.on(o.LudoEvents.LOADED,function(){L.on(),R.on()}),d.on(o.LudoEvents.ITEM_CHANGED,function(){L.off(),R.off()}),d.once(o.LudoEvents.LOADED,function(){g.addEventListener("mousedown",r),g.addEventListener("touchstart",r),m.on(h.default.TOUCHSTART,r)}),d.on(o.LudoEvents.SEEKING,function(){n(d.currentTime()),t()})}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var a=n(17),o=n(1),s=n(2),u=n(4),l=r(u),d=n(5),c=r(d),f=n(6),h=r(f),p="ludo-scrubber__time--on";t.default=function(e){function t(e){function t(){var t=T.progressBarWidth;if(!f&&e.offsetWidth&&(f=e.offsetWidth/2),!f||!t)return null;var n=m/g.duration(),r=Math.round(n*t);return r=Math.min(r,t-f),r=Math.max(r,f),r-f}function n(){if(!v)return void(0,s.classList)(e).remove(p);e.textContent=y?y:(0,a.format)(S?g.convertTimeToLiveTime(m):m);var n=t(),r=null!==n;r&&n!==h&&(e.style.left=n+"px",c()),h=n,(0,s.classList)(e).toggle(p,r)}function r(e){v=e}function i(e){m=e}function o(e){y=e}function u(){f=0}var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=l.onPositioned,c=void 0===d?function(){}:d,f=0,h=void 0,v=!1,m=0,y="";return{render:n,visible:r,setTime:i,setText:o,resetWidth:u}}function n(){R.forEach(function(e){return e.render()})}function r(){A.setTime(g.currentTime()),A.visible(!0),A.render()}function u(e){L.setTime(e*g.duration()),L.visible(!0),L.render()}function d(){L.visible(!1),L.render()}function f(e){L.setText(e),L.resetWidth(),L.render()}function v(){S=g.current().isLive}var m,g=e.player,y=e.ui,b=e.currentTimeElement,E=e.pointerTimeElement,_=e.scrubberEvents,T=e.scrubberValues,S=!1,A=t(b,{onPositioned:function(){return _.emit(c.default.SLIDING_TIME_POSITIONED)}}),L=t(E),R=[A,L],O=(0,h.default)(_,(m={},i(m,c.default.ENDTIME_SECOND_UPDATED,r),i(m,c.default.PLAYING_SECOND_UPDATED,r),i(m,c.default.MOVE,u),i(m,c.default.MOVEEND,d),i(m,c.default.LABEL_CHANGED,f),m));g.on(o.LudoEvents.LOADED,v),y.on(l.default.CONTROLBARVISIBLE,function(){O.on(),n()}),y.on(l.default.CONTROLBARHIDDEN,O.off),y.on(l.default.RESIZE,n)}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),a=n(3),o=n(4),s=r(o),u=n(9),l=r(u),d=n(5),c=r(d),f={idle:"idle",loading:"loading",loaded:"loaded"};t.default=function(e){function t(){var e=h===f.loaded&&p&&!m,t=e||E;(0,a.setClassNames)(d,{"ludo-thumbnail__image--off":!e}),(0,a.setClassNames)(r,{"ludo-thumbnail--on":t}),t===b.isVisible&&e===b.hasImage||o.emit(c.default.THUMBNAIL_VISIBILITY_CHANGED,{isVisible:t,hasImage:e}),b={isVisible:t,hasImage:e}}var n=e.ui,r=e.thumbnailElement,o=e.scrubberEvents,u=e.thumbnailLabel,d=r.querySelector(".ludo-thumbnail__image"),h=f.idle,p=!1,v=n.get(l.default.BREAKPOINT),m=!1,g=void 0,y=void 0,b={},E=!1;n.on(s.default.BREAKPOINT,function(e){v=e}),o.on(c.default.MOVEEND,function(){p=!1}),o.on(c.default.THUMBNAIL_LOADING,function(){h=f.loading,t()}),o.on(c.default.THUMBNAIL_LOADED,function(e){var n=e.src,r=e.width,a=void 0===r?320:r,o=e.height,s=void 0===o?180:o,u=e.rows,l=void 0===u?1:u,c=e.cols,p=void 0===c?1:c;g=a,y=s;var v=1===l&&1===p;(0,i.objectAssign)(d.style,{width:v?p*a+"px":"auto",height:v?l*s+"px":"auto"}),d.setAttribute("src",n),h=f.loaded,t()}),o.on(c.default.THUMBNAIL_REMOVE,function(){d.style.backgroundImage="",h=f.idle,t()}),o.on(c.default.THUMBNAIL_HIDE_IMAGE,function(){m=!0,t()}),o.on(c.default.THUMBNAIL_POSITION_CHANGED,function(e){var n=e.row,i=void 0===n?0:n,a=e.column,o=void 0===a?0:a,s=e.left,u=void 0===s?0:s,l=e.scrubberWidth,c=void 0===l?0:l,b="medium"===v?.5:1,E=g/2*b,_=u;_=Math.min(_,c-E),_=Math.max(_,E),d.style.left=o*-g+"px",d.style.top=i*-y+"px",r.style.left=_-E+"px",p=!0,h===f.loaded&&(m=!1),t()}),o.on(c.default.THUMBNAIL_LABEL_CHANGED,function(e){E=!!e,u.textContent=e||"",(0,a.setClassNames)(u,{"ludo-thumbnail__label--on":E}),t()})}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(1),s=n(6),u=r(s),l=n(4),d=r(l),c=n(5),f=r(c),h=n(10),p=r(h),v=n(74);t.default=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.updated,n=void 0!==t&&t,r=m.progressBarWidth,i=l.currentTime();y=y||l.duration();var o=(0,v.appendEpgGaps)(g,y).map(function(e,t,n){var r=e.actualEnd,i=n[t+1];i&&(r=Math.min(r,i.actualStart));var o=l.convertLiveTimeToTime(new Date(e.actualStart)),s=l.convertLiveTimeToTime(new Date(r));return o=Math.max(o,0),s=Math.min(s,y),a({},e,{startPosition:o,endPosition:s})});o=(0,v.mapToLayoutModel)(o,{currentTime:i,duration:y,progressBarWidth:r}),h.emit(f.default.EPG_UPDATED,o,{updated:n});var s=o.reduce(function(e,t){var n=t.startPosition,r=t.leftPc,i=t.leftPx,a=t.title;return e[t.programId]={position:n,leftPc:r,leftPx:i,title:a},e},{});h.emit(f.default.POINTS_UPDATED,{type:"epg",points:s,updated:n})}function n(e){g=e,t({updated:!0})}function r(){E.on(),_.on(),T.on()}function s(){E.off(),_.off(),T.off()}var l=e.player,c=e.ui,h=e.scrubberEvents,m=e.scrubberValues,g=[],y=0,b=(0,p.default)(t,1e3,{trailing:!1}),E=(0,u.default)(l,i({"epg-updated":n},o.LudoEvents.SEEKED,function(){return t({updated:!0})})),_=(0,u.default)(h,i({},f.default.ENDTIME_SECOND_UPDATED,b)),T=(0,u.default)(c,i({},d.default.RESIZE,b));l.on(o.LudoEvents.LOADED,function(){y=l.duration(),l.mediaType()===o.LudoMediaTypes.DVR?(r(),n([])):s()})}},function(e,t){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e){return{programId:"gap",title:"",plannedStart:0,actualStart:(new Date).getTime()-1e3*e,actualEnd:(new Date).getTime(),duration:e,type:"gap"}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=6;t.appendEpgGaps=function(e,t){var a=[],o=void 0;if(e.length>1){o=e.slice();var s=o[0],u=o[o.length-1];o=[i({},r(t),{actualEnd:s.actualStart})].concat(n(e),[i({},r(t),{actualStart:u.actualEnd})])}else o=[r(t)];return o.sort(function(e,t){return e.actualStart-t.actualStart}).forEach(function(e,n){a.push(e);var i=o[n+1];if(i){var s=i.actualStart,u=e.actualEnd,l=(s-u)/1e3;if(!(l<=10)){var d=r(t);d.plannedStart=u,d.actualStart=u,d.actualEnd=s,d.duration=l,a.push(d)}}}),a},t.mapToLayoutModel=function(e,t){var n=t.currentTime,r=t.duration,o=t.progressBarWidth;return e.map(function(e){var t=e.startPosition,a=e.endPosition,s=n>=t?Math.min(a,n)-t:0,u=a-t,l=t/r*100,d=u/r*100,c=s/r*100,f=l*o/100,h=d*o/100,p=n>=t&&n<=a;return i({},e,{visibleDuration:u,leftPc:l,leftPx:f,widthPc:d,widthPx:h,isCurrentProgram:p,playedWidthPc:c})}).map(function(e,t,n){var r=e.leftPx,s=e.widthPx,u=e.widthPc,l=e.playedWidthPc,d=u,c=s,f=n[t+1];if(f){var h=f.leftPx,p=h-r+s,v="gap"===f.type?1:a;p>v&&(c=Math.max(s-v,1),d=100*c/o)}var m=Math.min(l,d);return i({},e,{adjustedWidthPx:c,adjustedWidthPc:d,adjustedPlayedWidthPc:m})}).filter(function(e){return e.visibleDuration>0})}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(5),a=r(i),o=n(1);t.default=function(e){function t(){var e=r.offsetWidth,t=i.offsetWidth,n=s.offsetWidth,a=s.offsetLeft,o=u.offsetWidth,l=a<e,c=a+n>o-t;d?(r.style.visibility=l?"hidden":"visible",i.style.visibility=c?"hidden":"visible"):s.style.visibility=c?"hidden":"visible"}var n=e.scrubberEvents,r=e.leftTimeElement,i=e.rightTimeElement,s=e.currentTimeElement,u=e.progressBarElement,l=e.player,d=void 0;l.on(o.LudoEvents.LOADED,function(){d=l.current().isLive}),l.on(o.LudoEvents.SEEKED,t),n.on(a.default.SLIDING_TIME_POSITIONED,t),n.on(a.default.PLAYED_TIME_UPDATED,t)}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.progressBarElement;return{get progressBarWidth(){return t.offsetWidth||0}}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=n(2),s=n(10),u=r(s),l=n(5),d=r(l),c=n(6),f=r(c);t.default=function(e){function t(e){var t=e&&e.image&&e.image.webImages||[],n=(t[0]||{}).imageUrl,r=e||{},i=r.title,a=r.type;return"gap"===a?(m.emit(d.default.THUMBNAIL_LABEL_CHANGED,null),m.emit(d.default.PROGRAM_LEAVE),void m.emit(d.default.THUMBNAIL_REMOVE)):(m.emit(d.default.THUMBNAIL_LABEL_CHANGED,i),n?(m.emit(d.default.PROGRAM_ENTER,e),void m.emit(d.default.THUMBNAIL_LOADED,{src:n})):(m.emit(d.default.PROGRAM_LEAVE),void m.emit(d.default.THUMBNAIL_REMOVE)))}function n(e){var n=e.left,r=e.width,i=(0,o.arrayFind)(g,function(e){return n>e.leftPx-5&&n<e.leftPx+e.adjustedWidthPx}),a=i||{},s=a.programId,u=a.leftPx;s!==y&&t(i),y=s,i&&m.emit(d.default.THUMBNAIL_POSITION_CHANGED,{row:0,column:0,left:u,scrubberWidth:r})}function r(){E.cancel(),t(),y=null}function s(e){g=e}function l(){y&&n(b)}function c(){_.on()}function h(){_.off(),r()}var p,v=e.player,m=e.scrubberEvents,g=[],y=void 0,b=void 0,E=(0,u.default)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.left,i=t.width;b={left:r,width:i},n(b)},100),_=(0,f.default)(m,(p={},i(p,d.default.MOVE,E),i(p,d.default.MOVEEND,r),i(p,d.default.EPG_UPDATED,s),i(p,d.default.ENDTIME_SECOND_UPDATED,l),p));v.on(a.LudoEvents.LOADED,function(){return v.get("thumbnails")&&v.mediaType()===a.LudoMediaTypes.DVR?void c():void h()})}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){var t=new Image;return new d.Promise(function(n,r){t.onload=n,t.onerror=r,t.src=e})}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);
}return e},s=n(7),u=r(s),l=n(1),d=n(2),c=n(10),f=r(c),h=n(5),p=r(h),v=n(6),m=r(v),g=(0,u.default)("ludo:thumb:vod");t.default=function(e){function t(){T.cancel(),b.emit(p.default.THUMBNAIL_HIDE_IMAGE)}function n(){b.emit(p.default.THUMBNAIL_LOADING),E=0,s()}function r(){b.emit(p.default.THUMBNAIL_REMOVE),S.off()}function s(){E++,_=y.current()&&y.current().thumbnails,_&&_.src&&a(_.src).then(u).catch(d)}function u(){g("Thumnails loaded",_);var e=_.frameDuration||10,t=Math.ceil(y.duration()/e),n=_.cols||20,r=Math.ceil(t/n);b.emit(p.default.THUMBNAIL_LOADED,o({},_,{rows:r})),S.on()}function d(){if(1===E&&c(_.src),E<10){var e=1e3*(10+E*E*10*Math.random());g("Try again in "+Math.round(e)+"ms"),setTimeout(s,e)}S.off()}function c(){var e=_.trigger;h(e)}function h(e){a(e).then(function(){return g("Triggered thumbnail generation on "+e)}).catch(function(){return g("Failed to trigger thumbnail generation on "+e)})}var v,y=e.player,b=e.scrubberEvents,E=0,_=null,T=(0,f.default)(function(e,t){var n=_.frameDuration||10,r=Math.round(y.duration()/n*e),i=_.cols||20,a=Math.floor(r/i),o=r%i,s=t.left,u=t.width;b.emit(p.default.THUMBNAIL_POSITION_CHANGED,{row:a,column:o,left:s,scrubberWidth:u})},100),S=(0,m.default)(b,(v={},i(v,p.default.MOVE,T),i(v,p.default.MOVEEND,t),v));y.on(l.LudoEvents.ITEM_CHANGED,function(){r()}),y.on(l.LudoEvents.LOADED,function(){return y.get("thumbnails")&&y.mediaType()===l.LudoMediaTypes.VOD?void n():void r()})}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(20),a=n(1),o=n(5),s=r(o);t.default=function(e){var t=e.player,n=e.scrubberEvents;t.on(a.LudoEvents.LOADED,function(){var e=t.current();if(e&&e.indexPoints){var r=e&&e.indexPoints,a=r.map(function(e){var t=e.startPoint,n=e.title,r=(0,i.toSeconds)((0,i.parse)(t));return{position:r,title:n}}).reduce(function(e,t,n){return e[n]=t,e},{});n.emit(s.default.POINTS_UPDATED,{type:"indexPoints",points:a})}}),t.on(a.LudoEvents.ITEM_CHANGED,function(){})}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.MAX_VALUE,r=e;return r=Math.min(r,n),r=Math.max(r,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.normalizePoints=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=n(6),u=r(s),l=n(1),d=n(2),c=n(5),f=r(c),h=n(4),p=r(h),v=n(16),m=r(v),g=10,y=t.normalizePoints=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.duration,r=void 0===n?0:n,i=t.progressBarWidth,s=void 0===i?0:i,u=[];Object.keys(e).forEach(function(t){var n=e[t]||{};Object.keys(n).forEach(function(e){var r=n[e];u.push(o({},r,{key:t+"_"+e,id:e,type:t}))})});var l=u.sort(function(e,t){return e.position>t.position}).map(function(e){var t=e.position,n=r?t/r*s:0,i=a(n-g/2,0,s),u=a(n+g/2,0,s);return o({},e,{positionPx:n,zoneLeft:i,zoneRight:u})});return l.forEach(function(e){var t=(0,d.arrayFind)(l,function(t){return e.zoneRight>t.zoneLeft&&e.zoneRight<t.zoneRight});if(t){var n=e.zoneRight-t.zoneLeft;e.zoneRight-=n/2,t.zoneLeft+=n/2}}),l};t.default=function(e){function t(){var e=_.progressBarWidth,t=g.duration();A=y(S,{duration:t,progressBarWidth:e}),T.setPoints(A)}function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.type,r=e.points,i=void 0===r?{}:r;S[n]=o({},i),t()}function r(e){var t=e||{},n=t.key,r=t.title,i=L!==n;i&&b.emit(e?f.default.ZONE_ENTER:f.default.ZONE_LEAVE,e),b.emit(f.default.LABEL_CHANGED,r),L=n}function a(e){return(0,d.arrayFind)(A,function(t){var n=t.zoneLeft,r=t.zoneRight;return e>=n&&e<=r})}function s(e,t){var n=t.left,i=a(n);r(i)}function c(){r()}function h(e){var t=_.progressBarWidth,n=a(e*t);g.seekTo(n?n.position:e*g.duration())}var v,g=e.player,b=e.scrubberEvents,E=e.ui,_=e.scrubberValues,T=e.zoneModel,S={},A=[],L=void 0,R=(0,u.default)(b,(v={},i(v,f.default.MOVE,s),i(v,f.default.MOVEEND,c),i(v,f.default.POINTS_UPDATED,n),i(v,f.default.PLAYING_SECOND_UPDATED,t),i(v,f.default.SEEKTO,h),v));g.on(l.LudoEvents.ITEM_CHANGED,function(){Object.keys(S).forEach(function(e){delete S[e]}),t()}),E.on(p.default.RESIZE,t),m.default.addEventListener("orientationchange",t),R.on()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);t.default=function(){function e(e){return(0,r.arrayFind)(t,function(t){var n=t.zoneLeft,r=t.zoneRight;return e>=n&&e<=r})}var t=[];return{setPoints:function(e){t=e},findPoint:e}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(97),a=r(i),o=n(3),s=n(2),u="ludo-spinner__icon--active";t.default=function(e,t){var n=(0,o.createElementFromTemplate)(a.default),r=n.querySelector(".ludo-spinner__icon");e.insert(n,{position:":after",positionTarget:t.get("videoElement")});var i=function(){(0,s.classList)(r).remove(u),t.sendToBack(n)},l=function(){var e=t.get("videoElement");n.style.zIndex=e.style.zIndex,(0,s.classList)(r).add(u)},d=function(){t.bringToFront(n)};return{hide:i,show:l,bringToFront:d}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(82),a=r(i),o=n(1),s=n(2);t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){function r(){var e=(0,s.arrayFind)(Object.keys(l).map(function(e){return l[e]}),function(e){return"boolean"==typeof e});e!==d&&(d=e,e?i.show():i.hide(),l.base&&i.bringToFront())}var i=(t.builder||a.default)(e,n),u=function(){return{fatal:null,buffering:null,seeking:null,base:!0}},l=u(),d=void 0;n.on(o.LudoEvents.LOADING,function(){l.base=!0,r()}),[o.LudoEvents.LOADED,o.LudoEvents.READY,o.LudoEvents.PREPARED].forEach(function(e){n.on(e,function(){l.base=!1,r()})}),n.on(o.LudoEvents.ERROR,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.fatal&&(l.fatal=!1,r())}),n.on(o.LudoEvents.BUFFERSTART,function(){l.buffering=!0,r()}),n.on(o.LudoEvents.BUFFEREND,function(){l.buffering=null,r()}),n.on(o.LudoEvents.ITEM_CHANGED,function(){(0,s.objectAssign)(l,u()),r()}),n.on(o.LudoEvents.SEEKING,function(){l.seeking=!0,r()}),n.on(o.LudoEvents.SEEKED,function(){l.seeking=null,r()}),r()}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.textTracks;if(t&&t.length)for(var n=0;n<t.length;++n){var r=t[n];"subtitles"===r.kind&&(r.mode="disabled")}}function a(e,t){var n=document.createElement("track");n.kind="subtitles",n.src=t.src,n.srclang=t.srclang,n.label=t.label,t.default&&(n.default="",n.mode="showing"),e.setAttribute("crossorigin","anonymous"),e.appendChild(n)}function o(e,t){var n=e.textTracks,r=!1;if(n&&n.length)for(var i=0;i<n.length;++i){var o=n[i];if("subtitles"===o.kind&&/(nb|no)/.test(o.language)){r=!0,o.mode="showing";break}}!r&&A&&a(e,t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(22),u=n(16),l=r(u),d=n(7),c=r(d),f=n(1),h=n(98),p=r(h),v=n(3),m=n(85),g=n(9),y=r(g),b=n(4),E=r(b),_=(0,c.default)("ludo:captions"),T=525,S=!0,A=!1;(0,s.setClassNamePrefix)("ludo-captions__"),t.default=function(e){function t(){var e=l.default.getComputedStyle(r),t=e.width;/%/.test(t)||(r.style.fontSize=parseInt(t,10)/T*100+"%")}function n(e){e||(r.style.visibility="hidden")}var r=(0,v.createElementFromTemplate)(p.default);return e.getController(),e.insert(r,{parent:".ludo-layout",position:":first"}),r.style.visibility="hidden",t(),l.default.addEventListener("resize",t),function(a){S=a.get(f.LudoOptions.SUBTITLES),a.once(f.LudoEvents.LOADED,t),a.on(f.LudoEvents.OPTIONCHANGED,function(e,r){if("subtitles"===e&&(t(),_("Subtitles "+(r?"enabled":"disabled")),S!==r))if(S=r,f.IS_IOS){var s=a.get(f.LudoOptions.VIDEO_ELEMENT),u=a.current();r?o(s,u.defaultSubtitle):i(s)}else n(r)}),a.on(f.LudoEvents.PREPARED,function(){var e=a.current();e&&(a.subtitles(e.hasDefaultSubtitle),n(e.hasDefaultSubtitle))}),a.on(f.LudoEvents.LOADED,function(){var e=a.get(f.LudoOptions.VIDEO_ELEMENT),t=a.current();t.hasSubtitles&&(f.IS_IOS?o(e,t.defaultSubtitle):(i(e),(0,m.mountSubtitlesOnElement)(r,a,t.defaultSubtitle)))}),a.on(f.LudoEvents.PIPON,function(){var e=a.get(f.LudoOptions.VIDEO_ELEMENT),t=a.current();S&&!f.IS_IOS&&(i(e),o(e,t.defaultSubtitle))}),a.on(f.LudoEvents.PIPOFF,function(){var e=a.get(f.LudoOptions.VIDEO_ELEMENT);S&&!f.IS_IOS&&i(e)}),a.on(f.LudoEvents.LOADEDDATA,function(){A=!0}),a.on(f.LudoEvents.ITEM_CHANGED,function(){A=!1,f.IS_IOS||(0,m.unmountSubtitlesOnElement)(r)}),e.on(E.default.OPTIONCHANGED,function(e,t){if(e===y.default.SUBTITLES_DISPLAYED){var n="boolean"!=typeof t||t;n?r.style.display="":r.style.display="none"}})}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.unmountSubtitlesOnElement=t.mountSubtitlesOnElement=void 0;var i=n(35),a=r(i),o=n(7),s=r(o),u=n(2),l=(0,s.default)("ludo:captions"),d=void 0,c=void 0,f=function(e){var t=new u.Headers,n={method:"GET",headers:t,mode:"cors",cache:"default"};return(0,u.fetch)(e,n).then(function(e){return e.text()}).catch(function(t){l("failed to load subtitles from "+e+", reason: "+t)})},h=function(e,t,n){d=n;var r=void 0,i=void 0;c=setInterval(function(){if(d){if(!t.get("subtitles"))return r=null,void(i=!1);var n=t.currentTime();d.setTime(n);var a=d.current();!i||a&&a.visible?a.visible&&a!==r&&(r=a,i=!0,l(a.start+" --> "+a.end+":"+a.text.replace(/<[^>]+>/g,"").replace(/\s+/g," ")),e.style.visibility="visible",e.innerHTML=a.text):(i=!1,e.style.visibility="hidden")}},50)};t.mountSubtitlesOnElement=function(e,t,n){f(n.src).then(function(n){var r=(0,a.default)(n);h(e,t,r)})},t.unmountSubtitlesOnElement=function(e){c&&(clearInterval(c),c=null),d&&(d.destroy(),d=null),e.style.visibility="hidden"}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(11),s=r(o),u=n(100),l=r(u),d=n(3),c=n(88),f=r(c),h=n(87),p=r(h),v=n(14),m=r(v),g=n(21),y=r(g),b=n(8),E=n(4),_=r(E),T=n(2);t.default=function(e){function t(e,t){var n=D[e];return"undefined"==typeof n?t:n}function n(e,t){var n=D[e];D[e]=t,n!==t&&w.emit(_.default.OPTIONCHANGED,e,t,n)}function r(){w.emit(_.default.ENABLECONTROLS)}function o(){w.emit(_.default.DISABLECONTROLS)}function u(){w.emit(_.default.SHOWCONTROLS)}var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},v=h.loadStyleSheet,g=void 0===v?y.default:v,E=h.loadSvgIcons,S=void 0===E?m.default:E,A=h.createElementFromTemplate,L=void 0===A?d.createElementFromTemplate:A,R=h.responsive,O=void 0===R?f.default:R;g(),S();var k=c.lang,w=new s.default,D=a({},c),P=void 0,I=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=function(){var t=n.parent;return"string"==typeof t?e.querySelector(n.parent):"object"===("undefined"==typeof t?"undefined":i(t))?n.parent:e}();if(!r)throw Error("Missing parent element.");var a=n.position,o=n.positionTarget;":after"===a&&o&&o.parentElement===r&&o.nextSibling?r.insertBefore(t,o.nextSibling):":before"===a&&o&&o.parentElement===r?r.insertBefore(t,o):":first"===a&&r.firstChild?r.insertBefore(t,r.firstChild):r.appendChild(t)},x=function(){return P||(P=L(l.default),I(P)),P},C=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".js-button-bar:last-child";return I(e,{parent:n,position:t})};return x(),(0,T.objectAssign)(w,{insert:I,insertControl:C,getController:x,enableControls:r,disableControls:o,showControls:u,element:e,get:t,set:n}),O(w),(0,p.default)(w),(0,b.resolveTranslation)(w,h),k?((0,b.addTranslation)(k),w.emit(_.default.LANG,k.lang)):w.emit(_.default.LANG,"en"),w}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=n(2);t.default=function(e){var t=e.element;(0,i.classList)(t).add("ludo--"+(r.SUPPORTS_TOUCH?"touch":"desktop"))}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(19),a=n(10),o=r(a),s=n(3),u=n(4),l=r(u),d=n(9),c=r(d),f=n(2),h={small:480,medium:768,large:1024,full:999999},p=Object.keys(h);t.default=function(e){function t(t){e.emit(l.default.RESIZE,t);var a=i.window.getComputedStyle(n);if(!/%/.test(a.width)){var o=parseInt(a.width,10),s=(0,f.arrayFind)(p,function(e){return o<=h[e]});o<10&&(s=p[p.length-1]),s!==r&&(r=s,e.set(c.default.BREAKPOINT,s),e.emit(l.default.BREAKPOINT,s,h[s]))}}var n=e.element,r=void 0;e.on(l.default.BREAKPOINT,function(e){(0,s.setClassNames)(n,p.reduce(function(t,n){return t["ludo--"+n]=n===e,t},{}))}),i.window.addEventListener("resize",(0,o.default)(t,100)),t()}},function(e,t,n){t=e.exports=n(90)(),t.push([e.id,'.ludo-stage{position:relative;height:0;overflow:hidden;padding-top:56.25%;background-color:#000;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:14px;line-height:1.42857143;color:#000;font-smooth:always;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.ludo-stage:focus{outline-color:#fff}.ludo-stage,.ludo-stage *{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;box-sizing:border-box}.ludo-stage__overlay{position:absolute!important;top:0;left:0;right:0;bottom:0;height:100%}.ludo-stage:-webkit-full-screen{position:static}video.ludo-player[src]{opacity:1}.ludo-player{width:100%;margin:auto 0}.ludo-player::-webkit-media-controls-current-time-display,.ludo-player::-webkit-media-controls-fullscreen-button,.ludo-player::-webkit-media-controls-mute-button,.ludo-player::-webkit-media-controls-panel,.ludo-player::-webkit-media-controls-play-button,.ludo-player::-webkit-media-controls-return-to-realtime-button,.ludo-player::-webkit-media-controls-rewind-button,.ludo-player::-webkit-media-controls-seek-back-button,.ludo-player::-webkit-media-controls-seek-forward-button,.ludo-player::-webkit-media-controls-start-playback-button,.ludo-player::-webkit-media-controls-time-remaining-display,.ludo-player::-webkit-media-controls-timeline,.ludo-player::-webkit-media-controls-timeline-container,.ludo-player::-webkit-media-controls-toggle-closed-captions-button,.ludo-player::-webkit-media-controls-volume-slider,.ludo-player::-webkit-media-controls-volume-slider-container{display:none!important;-webkit-appearance:none}.vjs-tech{min-width:100%;height:100%}.ludo-player__label{color:#fff}.ludo-controller button{background-image:none}.ludo svg use{pointer-events:none}.ludo-overlay{z-index:9999;position:absolute;width:100%;height:100%;left:0;top:0;margin:0;display:none;background-color:rgba(0,0,0,.9);opacity:0;-webkit-transition:opacity .3s cubic-bezier(.4,0,1,1);transition:opacity .3s cubic-bezier(.4,0,1,1)}.ludo-overlay.fadein{opacity:1}.ludo-overlay__container{position:absolute;left:0;right:0;top:0;bottom:0}.ludo-overlay__content{color:#fff;overflow-y:auto;max-height:100%;border:none;border-radius:0;padding:0 80px 0 20px;margin:0 auto}.ludo-overlay__content h2{margin-top:.83em;margin-bottom:.83em;font-weight:400;font-size:1.5em}.ludo-overlay__content p{margin-top:1em;margin-bottom:1em}.ludo-overlay__content a{color:#66d1f2;text-decoration:none}.ludo-overlay__content a:hover{text-decoration:underline}.ludo--small .ludo-overlay__content{padding:0 60px 0 20px;font-size:15px}.ludo--medium .ludo-overlay__content{font-size:17px}.ludo--full .ludo-overlay__content,.ludo--large .ludo-overlay__content{font-size:20px}.ludo-overlay__actions{position:absolute;right:20px;top:5px;max-width:80px}.ludo-overlay__actions button{font-size:12px}.ludo-overlay__close.ludo-bar__button{margin-bottom:0}.ludo-help{max-width:600px;margin:0 auto}.ludo-help__shortcuts{list-style:none}.ludo-help__key{display:inline-block;border:2px outset #fff;border-radius:4px;padding:.16em .4em;min-width:1.5em;line-height:1.2em;background-color:#ddd;font-family:sans-serif;color:#000;font-size:70%;white-space:nowrap;text-align:center;vertical-align:middle}.ludo-help__version{position:absolute;right:20px;bottom:5px;max-width:80px;text-align:right;font-size:.7em;opacity:.6}.ludo-bar{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;height:56px}.ludo--small .ludo-bar{height:38px}.ludo-bar__col{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap}.ludo-bar__col:last-child{-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end}.ludo-bar__button{display:block;background-color:transparent;margin:2px 2px 100px;padding:0;cursor:pointer;border-radius:50%;-webkit-transition:.2s;transition:.2s;position:relative;border:1px solid hsla(0,0%,100%,.001);outline:none}.ludo-bar__button:focus{border:1px solid rgba(102,209,242,.7)}.ludo-bar__button:focus .ludo-bar__icon{fill:#66d1f2;color:#66d1f2}.ludo--desktop .ludo-bar__button:hover{border:1px solid hsla(0,0%,100%,.7)}.ludo--small .ludo-bar__button--playpause{display:none}.ludo-bar__button--disabled,.ludo-bar__button:disabled{opacity:.5;cursor:default}.ludo-bar__button--airplay-off .ludo-bar__icon--airplay-on,.ludo-bar__button--airplay-on .ludo-bar__icon--airplay-off,.ludo-bar__button--volume-muted .ludo-bar__icon--volume-on,.ludo-bar__button--volume-on .ludo-bar__icon--volume-muted{display:none}.ludo-bar__icon{position:absolute;fill:#fff;color:#fff;-webkit-transition:.2s;transition:.2s}.ludo-bar__button{width:52px;height:52px}.ludo-bar__icon{width:32px;height:32px;left:9px;top:9px}.ludo--small .ludo-bar__button{width:34px;height:34px}.ludo--small .ludo-bar__icon{width:24px;height:24px;left:4px;top:4px}.ludo-spinner__icon{visibility:hidden;-webkit-animation-name:spinner;animation-name:spinner;-webkit-animation-duration:.75s;animation-duration:.75s;-webkit-animation-timing-function:linear;animation-timing-function:linear;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite;position:absolute;top:50%;left:50%;pointer-events:none;width:44px;height:44px;margin:-22px 0 0 -22px}.ludo-spinner__icon--active{visibility:visible}.ludo--medium .ludo-spinner__icon{width:56px;height:56px;margin:-28px 0 0 -28px}.ludo--large .ludo-spinner__icon{width:96px;height:96px;margin:-48px 0 0 -48px}.ludo--full .ludo-spinner__icon{width:112px;height:112px;margin:-56px 0 0 -56px}@-webkit-keyframes spinner{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes spinner{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.ludo-poster{cursor:pointer;background-color:#000}:-webkit-full-screen .ludo-poster{display:none}:-moz-full-screen .ludo-poster{display:none}:-ms-fullscreen .ludo-poster{display:none}:fullscreen .ludo-poster{display:none}.ludo-poster__image{display:block;width:100%;opacity:.6}.ludo-poster__image:not([src]){opacity:0}.ludo-poster__svg{width:16%;min-width:50px;max-width:112px;height:auto;position:absolute;top:50%;left:50%;-webkit-transform:translateX(-50%) translateY(-50%);-ms-transform:translateX(-50%) translateY(-50%);transform:translateX(-50%) translateY(-50%)}.ludo-poster__play-fill{stroke-width:1px;stroke-opacity:.4;stroke:#fff;fill-opacity:.4;fill:#000;color:#000}.ludo-poster__play-progress{stroke-width:4px;stroke:#fff}.ludo-poster__playicon{fill:#fff;color:#fff}.ludo-poster:hover .ludo-poster__playicon{fill:#66d1f2;color:#66d1f2}.ludo-poster__details{position:absolute;color:#f0f0f0;text-shadow:0 1px 0 rgba(0,0,0,.1);top:15px;bottom:15px;left:15px;right:15px}.ludo-poster__info{position:absolute;bottom:0;left:0;max-width:70%;line-height:1.2}.ludo-poster__description,.ludo-poster__title{margin:0}.ludo-poster__title{font-weight:400;font-size:32px}.ludo-poster__description{font-size:19px;color:#bebebe;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ludo-poster__duration{position:absolute;right:0;bottom:0;font-size:12px}.ludo-poster__age{position:absolute;top:0;left:0;cursor:default;border:2px solid #f0f0f0;border-radius:2px;display:block;visibility:hidden;opacity:.5;color:#f0f0f0;font-weight:700;text-align:center;line-height:1.75;padding:0 8px;min-width:2.5em}.ludo--small .ludo-poster__details{top:15px;bottom:15px;left:15px;right:15px}.ludo--small .ludo-poster__title{font-size:14px}.ludo--small .ludo-poster__description,.ludo--small .ludo-poster__duration{font-size:12px}.ludo--medium .ludo-poster__details{top:15px;bottom:15px;left:15px;right:15px}.ludo--medium .ludo-poster__title{font-size:16px}.ludo--medium .ludo-poster__description{font-size:12px}.ludo--large .ludo-poster__details{top:25px;bottom:25px;left:25px;right:25px}.ludo--large .ludo-poster__title{font-size:21px}.ludo--large .ludo-poster__description{font-size:12px}.ludo--full .ludo-poster__details{top:40px;bottom:40px;left:40px;right:40px}.ludo--full .ludo-poster__title{font-size:32px}.ludo--full .ludo-poster__description{font-size:19px}.ludo-poster__overlay{display:block;position:absolute;top:0;width:100%;height:100%;box-shadow:inset 0 0 0 1px hsla(0,0%,100%,.1);background:-webkit-linear-gradient(top,transparent,transparent 30%,rgba(0,0,0,.2) 60%,rgba(0,0,0,.7));background:linear-gradient(180deg,transparent 0,transparent 30%,rgba(0,0,0,.2) 60%,rgba(0,0,0,.7))}.ludo-stage:focus .ludo-poster__image{opacity:.85;-webkit-transition:.3s;transition:.3s}.ludo-stage:focus .ludo-poster__playicon{fill:#66d1f2;color:#66d1f2}.ludo-notifications{position:absolute!important;top:0;left:0;right:0;bottom:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}.ludo-notifications,.ludo-notifications__notification{-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column}.ludo-notifications__notification{background-color:rgba(0,0,0,.7);display:none;color:#fff;width:100%;height:auto;font-family:Helvetica;padding:20px;box-sizing:border-box;text-align:center}.ludo-notifications__notification-modal{height:100%}.ludo-notifications__notification:last-child{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}.ludo-notifications__feedback{margin-top:3em;color:#66d1f2;text-decoration:none}.ludo-notifications__feedback:hover{text-decoration:underline}.ludo-captions{text-align:left;color:#fff;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;width:100%;min-height:1em;margin-bottom:1.3em;z-index:1}.ludo-captions__italic{font-style:italic}.ludo-captions__bold{font-weight:700}.ludo-captions__underline{text-decoration:underline}.ludo-captions__line{margin:.5% 0 .5% 11.5%}.ludo-captions__line-inner{background-color:rgba(0,0,0,.5);padding:.3% .5%}.ludo-scrubber{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;position:relative;padding-bottom:5px;pointer-events:all}.ludo-scrubber__clickzone{top:-28px;position:absolute;height:46px;width:100%;cursor:pointer;outline:none}.ludo-scrubber__clickzone--drag{top:-40px;height:150px;left:-20px;width:calc(100% + 40px)}.ludo-progressbar{height:11px;width:100%}.ludo-scrubber__buffered,.ludo-scrubber__full,.ludo-scrubber__played{position:absolute;top:3px;height:4px}.ludo-scrubber__full{background-color:hsla(0,0%,100%,.3);box-shadow:0 1px 1px 0 rgba(0,0,0,.1);width:100%}.ludo-scrubber__played{background-color:#f6f6f6}.ludo-scrubber__buffered{background-color:hsla(0,0%,100%,.5)}.ludo-progressbar--dvr .ludo-scrubber__full,.ludo-progressbar--dvr .ludo-scrubber__played{display:none}.ludo-progressbar--dvr .ludo-scrubber__buffered{background-color:rgba(229,28,48,.3)}.ludo-playhead{margin-left:1px;position:absolute;-webkit-transform:translateX(-8px);-ms-transform:translateX(-8px);transform:translateX(-8px);width:15px;height:15px;top:-3px;z-index:100;border-radius:8px;border:6px solid #fff;background-color:#000;box-shadow:0 1px 1px 0 rgba(0,0,0,.3);pointer-events:none}.ludo-playhead:focus,.ludo-playhead:hover{cursor:-webkit-grab!important;cursor:grab!important;border-color:#66d1f2;outline:none}.ludo-playhead--touch{-webkit-transform:translateX(-10px);-ms-transform:translateX(-10px);transform:translateX(-10px);width:19px;height:19px;top:-5px;border-radius:10px;border:8px solid #fff;pointer-events:auto}.ludo-playhead--drag,.ludo-playhead--move{opacity:.7;display:block;cursor:-webkit-grab!important;cursor:grab!important;border-color:#66d1f2;outline:none}.ludo-progress-bar__index-point{position:absolute;top:-6px;height:8px;width:5px;z-index:99;pointer-events:none}.ludo-progress-bar__index-point:after{content:" ";display:block;position:absolute;top:2px;left:0;height:5px;width:1px;background-color:#fff}.ludo-scrubber__notch{position:absolute;margin-left:-1px;bottom:9px;height:13px;background-color:#fff;width:1px;display:none}.ludo-scrubber__notch--snap{height:40px}.ludo-thumbnail{overflow:hidden;width:320px;height:180px;opacity:0;position:absolute;bottom:49px;box-shadow:0 1px 4px 0 rgba(0,0,0,.5);-webkit-transition:left .1s,opacity .3s;transition:left .1s,opacity .3s;pointer-events:none}.ludo-thumbnail--on{opacity:1}.ludo-thumbnail__image{position:absolute}.ludo-thumbnail__image--off{height:0}.ludo-thumbnail__label{position:absolute;font-size:12px;background-color:#fff;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding:8px 10px 6px;bottom:0;width:100%;display:none}.ludo-thumbnail__label--on{display:block}.ludo--medium .ludo-thumbnail{margin-left:-80px;margin-bottom:-45px;-webkit-transform:scale(.5);-ms-transform:scale(.5);transform:scale(.5)}.ludo--medium .ludo-thumbnail__label{font-size:20px}.ludo--small .ludo-thumbnail{display:none}.ludo-scrubber__time{display:inline;position:absolute;top:-25px;padding:4px 0 3px;font-size:12px;line-height:1em;text-align:center;color:#fff;white-space:nowrap}.ludo-scrubber__time--current,.ludo-scrubber__time--end,.ludo-scrubber__time--start{text-shadow:0 1px 1px rgba(0,0,0,.4)}.ludo-scrubber__time--start{left:0}.ludo-scrubber__time--end{right:0}.ludo-scrubber__time--current,.ludo-scrubber__time--pointer{visibility:hidden}.ludo-scrubber__time--current.ludo-scrubber__time--on,.ludo-scrubber__time--pointer.ludo-scrubber__time--on{visibility:visible}.ludo-scrubber__time--pointer{padding-left:5px;padding-right:5px;background-color:#fff;color:#26292a;box-shadow:0 1px 2px 0 rgba(0,0,0,.3);border-radius:2px}.ludo-progress-bar__program{position:absolute;top:3px;height:4px;background-color:rgba(229,28,48,.4);padding-left:1px}.ludo-progress-bar__program--progress{background-color:#e51c30;box-shadow:0 0 1px 0 rgba(0,0,0,.6)}.ludo-progress-bar__program--zoneover:before{position:absolute;content:"";bottom:0;left:-1px;width:0;border-left:1px solid #fff;height:40px}.ludo-console{background-color:transparent;color:inherit;border:0;font-size:9px;font-family:Roboto Mono,Menlo,monospace}.ludo-console dl{margin:0}.ludo-console dt{width:25%;float:left;clear:left;white-space:pre-wrap}.ludo-console dd{max-width:70%;margin-left:1%;float:left;clear:right;white-space:pre-wrap}.ludo-layout{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;position:absolute;top:0;left:0;width:100%;height:100%;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end}.ludo--small .ludo-controlbar{padding:0 15px 5px}.ludo--small .ludo-layout__topbar{width:calc(100% - 30px);top:15px}.ludo--medium .ludo-controlbar{padding:0 25px 8px}.ludo--medium .ludo-layout__topbar{width:calc(100% - 50px);top:25px}.ludo--large .ludo-controlbar{padding:0 30px 10px}.ludo--large .ludo-layout__topbar{width:calc(100% - 60px);top:30px}.ludo--full .ludo-controlbar{padding:0 30px 10px}.ludo--full .ludo-layout__topbar{width:calc(100% - 60px);top:30px}.ludo-controlbar{opacity:0;-webkit-transition:opacity .3s cubic-bezier(.4,0,1,1);transition:opacity .3s cubic-bezier(.4,0,1,1)}.ludo-controlbar--on{opacity:1}.ludo-controlbar--hidden{-webkit-transition:margin-bottom .2s cubic-bezier(.4,0,1,1);transition:margin-bottom .2s cubic-bezier(.4,0,1,1)}.ludo-controlbar__row{position:relative;z-index:1}.ludo-layout__gradient{position:absolute;pointer-events:none;left:0;bottom:0;width:100%;height:100%;background:-webkit-linear-gradient(top,transparent 1%,rgba(0,0,0,.65) 50%,rgba(0,0,0,.75) 80%,rgba(0,0,0,.8));background:linear-gradient(180deg,transparent 1%,rgba(0,0,0,.65) 50%,rgba(0,0,0,.75) 80%,rgba(0,0,0,.8));min-height:100px;max-height:150px;opacity:1;-webkit-transition:opacity .1s;transition:opacity .1s}.ludo-layout__topbar{position:absolute;top:0;margin:0}.ludo-playicon{outline:none;cursor:pointer;border-radius:50%;border:1px solid hsla(0,0%,100%,0);background-color:rgba(0,0,0,.4);border:1px solid hsla(0,0%,100%,.7);position:absolute;top:40%;left:50%;width:70px;height:70px;padding:12px;margin:-35px 0 0 -35px;z-index:100000;display:none;-webkit-transition:.2s;transition:.2s}.ludo-playicon:focus{border:1px solid rgba(102,209,242,.7)}.ludo-playicon:focus .ludo-playicon__icon{fill:#66d1f2;color:#66d1f2}.ludo--small .ludo-playicon{display:block}.ludo-playicon__icon{width:100%;height:100%;fill:#fff;color:#fff;-webkit-transition:.2s;transition:.2s}.ludo-livebutton{display:inline-block;background-color:transparent;margin:0;padding:5px 8px;cursor:pointer;-webkit-transition:.2s;transition:.2s;position:relative;border:none;text-transform:uppercase;font-size:1em;font-weight:700;outline:none;background-color:#fff;color:#e51c30;box-shadow:0 0 20px #fff}.ludo-livebutton:focus,.ludo-livebutton:hover{box-shadow:0 0 5px #fff}.ludo-livebutton--playing-live{background-color:#e51c30;color:#fff;box-shadow:0 0 20px #e51c30}.ludo-livebutton--playing-live:focus,.ludo-livebutton--playing-live:hover{box-shadow:0 0 5px #e51c30}.ludo--small .ludo-livebutton{-webkit-transform:scale(.6);-ms-transform:scale(.6);transform:scale(.6)}.ludo--medium .ludo-livebutton{-webkit-transform:scale(.8);-ms-transform:scale(.8);transform:scale(.8)}',""])},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},i=0;i<this.length;i++){var a=this[i][0];"number"==typeof a&&(r[a]=!0)}for(i=0;i<t.length;i++){var o=t[i];"number"==typeof o[0]&&r[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="("+o[2]+") and ("+n+")"),e.push(o))}},e}},function(e,t){e.exports='<div class=ludo-help> <h3>Gi oss tilbakemelding!</h3> <p>Opplever du problemer eller er du fornøyd? Vi trenger dine <a href="https://docs.google.com/forms/d/1jCjn6SSPkkboFo7i8uNVJeW9SUEWFQQR8zR7aUHGQbw/viewform?entry.392462233&entry.414357330&entry.1732706523&entry.1611669171&entry.799299246=Player-version&entry.2121315565=Player-technology&entry.226475133=Useragent-string&entry.1309325348=Player-streamurl&entry.290614939=Player-itemid" class=ludo-help__feedback-link target=_blank>tilbakemeldinger</a>.</p> <h3>Hjelp</h3> <p>Dette er NRKs videoavspiller. Den strømmer NRKs innhold til din skjerm, på et format som din enhet håndterer. (HLS, HTML5 eller Flash). Den overordnete tjenesten (NRK TV) kan du lese mer om her: <a href=/hjelp>Hjelp til tjenesten</a> </p> <h4>Teksting på NRK TV</h4> <p>Mange av våre program har tekst du enkelt kan slå av og på ved å klikke tekst-symbolet nede til høyre i avspillerkontroller. Om programmet ikke har tekst-symbol i avspillerkontroller, kan dette bety to ulike ting: Enten mangler programmet dessverre tekst, eller så har programmet tekst som er en del av selve videobildet (innbrent). Dette kan ikke overstyres av avspilleren.</p> <h4>Hurtigtaster</h4> <p>Hvis du ser video på en maskin med vanlig tastatur, da kan du bruke disse hurtigtastene:</p> <ul class=ludo-help__shortcuts> <li> <span class=ludo-help__key>k</span> | <span class=ludo-help__key>mellomrom</span> | <span class=ludo-help__key>enter</span> = spill/pause </li> <li> <span class=ludo-help__key>&larr;</span> | <span class=ludo-help__key>&rarr;</span> = spole fem sekunder </li> <li> <span class=ludo-help__key>shift</span> | <span class=ludo-help__key>ctrl</span> | <span class=ludo-help__key>alt</span> | <span class=ludo-help__key>cmd</span> + <span class=ludo-help__key>&larr;</span> | <span class=ludo-help__key>&rarr;</span> = spole ett minutt </li> <li> <span class=ludo-help__key>j</span> | <span class=ludo-help__key>l</span> = spole ti sekunder bakover eller framover </li> <li> <span class=ludo-help__key>0</span> - <span class=ludo-help__key>9</span> = hopp til 0-90 % inn i videoen </li> <li> <span class=ludo-help__key>&uarr;</span> | <span class=ludo-help__key>&darr;</span> = lydstyrke opp eller ned 10 % </li> <li> <span class=ludo-help__key>m</span> = demp eller skru på lyd </li> <li> <span class=ludo-help__key>c</span> = skru av eller på undertekst </li> <li> <span class=ludo-help__key>f</span> = gå til eller tilbake fra fullskjerm </li> <li> <span class=ludo-help__key>p</span> = picture-in-picture (kun macOS Sierra eller nyere) </li> </ul> </div> ';
},function(e,t){e.exports="<pre class=ludo-console></pre> "},function(e,t){e.exports='<div class="ludo-notifications ludo-stage__overlay"> </div> '},function(e,t){e.exports='<div class=ludo-overlay> <div class=ludo-overlay__container> <div class=ludo-overlay__actions> <button type=button class="ludo-overlay__close ludo-bar__button" aria-label=Close> <svg class="ludo-bar__icon ludo-bar__icon--close"> <use xmlns:xlink=http://www.w3.org/1999/xlink xlink:href=#ludo-close></use> </svg> </button> </div> <div class=ludo-overlay__content></div> </div> </div> '},function(e,t){e.exports='<div class="ludo-poster ludo-stage__overlay"> <img class=ludo-poster__image alt=Poster /> <div class=ludo-poster__overlay></div> <div class=ludo-poster__details> <div class=ludo-poster__age></div> <div class=ludo-poster__info> <h2 class=ludo-poster__title></h2> <p class=ludo-poster__description></p> </div> <span class=ludo-poster__duration></span> </div> <div class=ludo-poster__svg> <svg class=ludo-poster__play viewBox="0 0 112 112"> <title>play icon with progress</title> <circle class=ludo-poster__play-fill r=54.5 cx=56 cy=56 fill=transparent></circle> <circle class=ludo-poster__play-progress r=53 cx=56 cy=56 fill=transparent stroke-dasharray=333 stroke-dashoffset=333 transform="rotate(-90 56 56)"></circle> <use class=ludo-poster__playicon x=32 y=32 width=50 height=50 xmlns:xlink=http://www.w3.org/1999/xlink xlink:href=#ludo-playpause--paused></use> </svg> </div> </div> '},function(e,t){e.exports='<div class="ludo-scrubber ludo-controlbar__row"> <div class=ludo-progressbar> <div class=ludo-scrubber__played></div> <div class=ludo-scrubber__full></div> </div> <div class=ludo-playhead tabindex=0></div> <div class=ludo-thumbnail> <img class=ludo-thumbnail__image /> <span class=ludo-thumbnail__label></span> </div> <span class=ludo-scrubber__notch></span> <span class="ludo-scrubber__time ludo-scrubber__time--start"></span> <span class="ludo-scrubber__time ludo-scrubber__time--end"></span> <span class="ludo-scrubber__time ludo-scrubber__time--current"></span> <span class="ludo-scrubber__time ludo-scrubber__time--pointer"></span> <div class=ludo-scrubber__clickzone></div> </div> '},function(e,t){e.exports='<div class="ludo-spinner ludo-stage__overlay"> <svg class=ludo-spinner__icon> <use xmlns:xlink=http://www.w3.org/1999/xlink xlink:href=#ludo-spinner-tail></use> </svg> </div> '},function(e,t){e.exports='<div class="ludo-layout__row ludo-captions"></div> '},function(e,t){e.exports='<button type=button class="ludo-bar__button ludo-bar__button--volume ludo-bar__button--volume-muted" aria-label=Mute> <svg class="ludo-bar__icon ludo-bar__icon--volume-muted"> <use xmlns:xlink=http://www.w3.org/1999/xlink xlink:href=#ludo-volume-control--muted></use> </svg> <svg class="ludo-bar__icon ludo-bar__icon--volume-on"> <use xmlns:xlink=http://www.w3.org/1999/xlink xlink:href=#ludo-volume-control--3></use> </svg> </button> '},function(e,t){e.exports='<div class="ludo-controller ludo-stage__overlay"> <div class=ludo-layout> <div class="ludo-layout__row ludo-controlbar"> <div class=ludo-layout__topbar></div> <div class=ludo-layout__gradient></div> <div class="ludo-bar ludo-controlbar__row"> <div class="ludo-bar__col js-button-bar"></div> <div class="ludo-bar__col js-button-bar"></div> </div> </div> </div> </div> '},function(e,t,n){function r(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=h[r.id];if(i){i.refs++;for(var a=0;a<i.parts.length;a++)i.parts[a](r.parts[a]);for(;a<r.parts.length;a++)i.parts.push(l(r.parts[a],t))}else{for(var o=[],a=0;a<r.parts.length;a++)o.push(l(r.parts[a],t));h[r.id]={id:r.id,refs:1,parts:o}}}}function i(e){for(var t=[],n={},r=0;r<e.length;r++){var i=e[r],a=i[0],o=i[1],s=i[2],u=i[3],l={css:o,media:s,sourceMap:u};n[a]?n[a].parts.push(l):t.push(n[a]={id:a,parts:[l]})}return t}function a(e,t){var n=m(),r=b[b.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),b.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function o(e){e.parentNode.removeChild(e);var t=b.indexOf(e);t>=0&&b.splice(t,1)}function s(e){var t=document.createElement("style");return t.type="text/css",a(e,t),t}function u(e){var t=document.createElement("link");return t.rel="stylesheet",a(e,t),t}function l(e,t){var n,r,i;if(t.singleton){var a=y++;n=g||(g=s(t)),r=d.bind(null,n,a,!1),i=d.bind(null,n,a,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=u(t),r=f.bind(null,n),i=function(){o(n),n.href&&URL.revokeObjectURL(n.href)}):(n=s(t),r=c.bind(null,n),i=function(){o(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}function d(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=E(t,i);else{var a=document.createTextNode(i),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(a,o[t]):e.appendChild(a)}}function c(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function f(e,t){var n=t.css,r=t.sourceMap;r&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var i=new Blob([n],{type:"text/css"}),a=e.href;e.href=URL.createObjectURL(i),a&&URL.revokeObjectURL(a)}var h={},p=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},v=p(function(){return/msie [6-9]\b/.test(self.navigator.userAgent.toLowerCase())}),m=p(function(){return document.head||document.getElementsByTagName("head")[0]}),g=null,y=0,b=[];e.exports=function(e,t){t=t||{},"undefined"==typeof t.singleton&&(t.singleton=v()),"undefined"==typeof t.insertAt&&(t.insertAt="bottom");var n=i(e);return r(n,t),function(e){for(var a=[],o=0;o<n.length;o++){var s=n[o],u=h[s.id];u.refs--,a.push(u)}if(e){var l=i(e);r(l,t)}for(var o=0;o<a.length;o++){var u=a[o];if(0===u.refs){for(var d=0;d<u.parts.length;d++)u.parts[d]();delete h[u.id]}}}};var E=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t,n){var r=n(89);"string"==typeof r&&(r=[[e.id,r,""]]),n(101)(r,{singleton:!0}),r.locals&&(e.exports=r.locals)}])})},5,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){function n(e){return e.replace(/(^https?:\/\/|\/.*?$)/g,"")}var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=e.querySelector("img"),a=e.querySelector("video,audio"),o=r["pinned-control-overlay"],s=(0,d.LudoUI)(e,{"pinned-control-overlay":o,lang:d.LudoLangNbNo,version:"4.1.128"}),v=(0,d.poster)(s),m=e.querySelector(".ludo-poster");a&&e.insertBefore(a,e.firstChild),i&&a&&(a.poster=i.src),i&&(m.querySelector("img").src=i.src,i.parentElement.removeChild(i));var g=(0,u.default)({},p(),r),y=(g.chromecast,(0,l.objectAssign)({},{stageElement:e,posterElement:m,use:[(0,d.spinner)(s),(0,d.controller)(s),(0,d.defaultControllers)(s),(0,d.notificationCenter)(s),(0,d.navKeys)(s),c.LudoErrorMessageHandler]},g)),b=[new c.LudoHLSPlayerAdapter,new c.LudoHTML5PlayerAdapter],E=(0,f.nrkApiClient)({domain:n(g.apiBaseUrl),headers:{Accept:g.apiAccept}}),_=g.debug||!1;_&&h.enableBrowserConsole&&h.enableBrowserConsole(),h("Using options",y);var T=(0,c.ludo)({loaders:[(0,f.nrkMediaItemLoader)(E)],preparators:[v],adapters:b})(t,y);return T}var a=n(91),o=r(a),s=n(93),u=r(s),l=n(89),d=n(90),c=n(87),f=n(88),h=(0,o.default)("ludo:embed"),p=function(){return{autoplay:!1,autoadvance:!1,nativeControls:!1,controls:!0,loop:!0,mute:!1,thumbnails:!0,adapter:null,apiBaseUrl:"psapi.nrk.no",apiAccept:"application/vnd.nrk.psapi+json; version=9; ludo-client=true",gaTrackingId:"UA-55865429-2",userId:null,DEFAULT_LIVE_OFFSET:15,LIVE_DELAY_BETWEEN_TIMESTAMP_AND_STREAM:3,SUPPORTS_DVR:!0,versions:{"@nrk/ludo":"4.1.128","@nrk/analytics-core":"2.0.4","@nrk/flashls.js":"1.1.7","@nrk/ludo-akamai-flash-adapter":"3.0.17","@nrk/ludo-cast":"0.3.11","@nrk/ludo-core":"4.5.16","@nrk/ludo-flashls-adapter":"3.0.17","@nrk/ludo-nrk-psapi-client":"3.1.19","@nrk/ludo-ponyfills":"0.2.11","@nrk/ludo-ui":"3.2.29","array-find":"1.0.0","array-find-index":"1.0.2","array-includes":"3.0.3","browser-supports-log-styles":"1.1.7","define-properties":"1.1.2","es-abstract":"1.7.0","es-to-primitive":"1.1.1","es6-object-assign":"1.1.0",eventemitter3:"2.0.3","fetch-ponyfill":"4.0.0",foreach:"2.0.5","function-bind":"1.1.0",global:"4.3.2",has:"1.0.1","hls.js":"0.6.21","is-callable":"1.1.3","is-date-object":"1.0.1","is-regex":"1.0.4","is-symbol":"1.0.1","iso8601-duration":"1.0.6","lodash.get":"4.4.2","lodash.merge":"4.6.0","lodash.throttle":"4.1.1","object-keys":"1.0.11",pinkie:"2.0.4","pinkie-promise":"2.0.1",qs:"6.4.0",setimmediate:"1.0.5","style-loader":"0.13.2"},version:"4.1.128"}};e.exports=i},function(e,t,n){(function(e,n){function r(e,t){return e.set(t[0],t[1]),e}function i(e,t){return e.add(t),e}function a(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function o(e,t){for(var n=-1,r=e?e.length:0;++n<r&&t(e[n],n,e)!==!1;);return e}function s(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function u(e,t,n,r){var i=-1,a=e?e.length:0;for(r&&a&&(n=e[++i]);++i<a;)n=t(n,e[i],i,e);return n}function l(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function d(e){return function(t){return e(t)}}function c(e,t){return null==e?void 0:e[t]}function f(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function h(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function p(e,t){return function(n){return e(t(n))}}function v(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function m(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function g(){this.__data__=an?an(null):{}}function y(e){return this.has(e)&&delete this.__data__[e]}function b(e){var t=this.__data__;if(an){var n=t[e];return n===He?void 0:n}return Bt.call(t,e)?t[e]:void 0}function E(e){var t=this.__data__;return an?void 0!==t[e]:Bt.call(t,e)}function _(e,t){var n=this.__data__;return n[e]=an&&void 0===t?He:t,this}function T(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function S(){this.__data__=[]}function A(e){var t=this.__data__,n=V(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():qt.call(t,n,1),!0}function L(e){var t=this.__data__,n=V(t,e);return n<0?void 0:t[n][1]}function R(e){return V(this.__data__,e)>-1}function O(e,t){var n=this.__data__,r=V(n,e);return r<0?n.push([e,t]):n[r][1]=t,this}function k(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function w(){this.__data__={hash:new m,map:new(en||T),string:new m}}function D(e){return ve(this,e).delete(e)}function P(e){return ve(this,e).get(e)}function I(e){return ve(this,e).has(e)}function x(e,t){return ve(this,e).set(e,t),this}function C(e){this.__data__=new T(e)}function M(){this.__data__=new T}function N(e){return this.__data__.delete(e)}function F(e){return this.__data__.get(e)}function B(e){return this.__data__.has(e)}function U(e,t){var n=this.__data__;if(n instanceof T){var r=n.__data__;if(!en||r.length<Ge-1)return r.push([e,t]),this;n=this.__data__=new k(r)}return n.set(e,t),this}function j(e,t){var n=vn(e)||ke(e)?l(e.length,String):[],r=n.length,i=!!r;for(var a in e)!t&&!Bt.call(e,a)||i&&("length"==a||Ee(a,r))||n.push(a);return n}function G(e,t,n){(void 0===n||Oe(e[t],n))&&("number"!=typeof t||void 0!==n||t in e)||(e[t]=n)}function H(e,t,n){var r=e[t];Bt.call(e,t)&&Oe(r,n)&&(void 0!==n||t in e)||(e[t]=n)}function V(e,t){for(var n=e.length;n--;)if(Oe(e[n][0],t))return n;return-1}function K(e,t){return e&&ce(t,Fe(t),e)}function W(e,t,n,r,i,a,s){var u;if(r&&(u=a?r(e,i,a,s):r(e)),void 0!==u)return u;if(!xe(e))return e;var l=vn(e);if(l){if(u=ge(e),!t)return de(e,u)}else{var d=pn(e),c=d==Xe||d==$e;if(mn(e))return ne(e,t);if(d==Je||d==Ke||c&&!a){if(f(e))return a?e:{};if(u=ye(c?{}:e),!t)return fe(e,K(u,e))}else{if(!Tt[d])return a?e:{};u=be(e,d,W,t)}}s||(s=new C);var h=s.get(e);if(h)return h;if(s.set(e,u),!l)var p=n?pe(e):Fe(e);return o(p||e,function(i,a){p&&(a=i,i=e[a]),H(u,a,W(i,t,n,r,a,e,s))}),u}function Y(e){return xe(e)?Yt(e):{}}function z(e,t,n){var r=t(e);return vn(e)?r:s(r,n(e))}function q(e){return jt.call(e)}function X(e){if(!xe(e)||Se(e))return!1;var t=Pe(e)||f(e)?Gt:bt;return t.test(Re(e))}function $(e){return Ce(e)&&Ie(e.length)&&!!_t[jt.call(e)]}function Q(e){if(!Ae(e))return Qt(e);var t=[];for(var n in Object(e))Bt.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Z(e){if(!xe(e))return Le(e);var t=Ae(e),n=[];for(var r in e)("constructor"!=r||!t&&Bt.call(e,r))&&n.push(r);return n}function J(e,t,n,r,i){if(e!==t){if(!vn(t)&&!gn(t))var a=Z(t);o(a||t,function(o,s){if(a&&(s=o,o=t[s]),xe(o))i||(i=new C),ee(e,t,s,n,J,r,i);else{var u=r?r(e[s],o,s+"",e,t,i):void 0;void 0===u&&(u=o),G(e,s,u)}})}}function ee(e,t,n,r,i,a,o){var s=e[n],u=t[n],l=o.get(u);if(l)return void G(e,n,l);var d=a?a(s,u,n+"",e,t,o):void 0,c=void 0===d;c&&(d=u,vn(u)||gn(u)?vn(s)?d=s:De(s)?d=de(s):(c=!1,d=W(u,!0)):Me(u)||ke(u)?ke(s)?d=Ne(s):!xe(s)||r&&Pe(s)?(c=!1,d=W(u,!0)):d=s:c=!1),c&&(o.set(u,d),i(d,u,r,a,o),o.delete(u)),G(e,n,d)}function te(e,t){return t=Zt(void 0===t?e.length-1:t,0),function(){for(var n=arguments,r=-1,i=Zt(n.length-t,0),o=Array(i);++r<i;)o[r]=n[t+r];r=-1;for(var s=Array(t+1);++r<t;)s[r]=n[r];return s[t]=o,a(e,this,s)}}function ne(e,t){if(t)return e.slice();var n=new e.constructor(e.length);return e.copy(n),n}function re(e){var t=new e.constructor(e.byteLength);return new Kt(t).set(new Kt(e)),t}function ie(e,t){var n=t?re(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function ae(e,t,n){var i=t?n(h(e),!0):h(e);return u(i,r,new e.constructor)}function oe(e){var t=new e.constructor(e.source,yt.exec(e));return t.lastIndex=e.lastIndex,t}function se(e,t,n){var r=t?n(v(e),!0):v(e);return u(r,i,new e.constructor)}function ue(e){return fn?Object(fn.call(e)):{}}function le(e,t){var n=t?re(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function de(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}function ce(e,t,n,r){n||(n={});for(var i=-1,a=t.length;++i<a;){var o=t[i],s=r?r(n[o],e[o],o,n,e):void 0;H(n,o,void 0===s?e[o]:s)}return n}function fe(e,t){return ce(e,hn(e),t)}function he(e){return te(function(t,n){var r=-1,i=n.length,a=i>1?n[i-1]:void 0,o=i>2?n[2]:void 0;for(a=e.length>3&&"function"==typeof a?(i--,a):void 0,o&&_e(n[0],n[1],o)&&(a=i<3?void 0:a,i=1),t=Object(t);++r<i;){var s=n[r];s&&e(t,s,r,a)}return t})}function pe(e){return z(e,Fe,hn)}function ve(e,t){var n=e.__data__;return Te(t)?n["string"==typeof t?"string":"hash"]:n.map}function me(e,t){var n=c(e,t);return X(n)?n:void 0}function ge(e){var t=e.length,n=e.constructor(t);return t&&"string"==typeof e[0]&&Bt.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function ye(e){return"function"!=typeof e.constructor||Ae(e)?{}:Y(Wt(e))}function be(e,t,n,r){var i=e.constructor;switch(t){case ot:return re(e);case Ye:case ze:return new i(+e);case st:return ie(e,r);case ut:case lt:case dt:case ct:case ft:case ht:case pt:case vt:case mt:return le(e,r);case Qe:return ae(e,r,n);case Ze:case rt:return new i(e);case tt:return oe(e);case nt:return se(e,r,n);case it:return ue(e)}}function Ee(e,t){return t=null==t?Ve:t,!!t&&("number"==typeof e||Et.test(e))&&e>-1&&e%1==0&&e<t}function _e(e,t,n){if(!xe(n))return!1;var r=typeof t;return!!("number"==r?we(n)&&Ee(t,n.length):"string"==r&&t in n)&&Oe(n[t],e)}function Te(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function Se(e){return!!Nt&&Nt in e}function Ae(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||Ct;return e===n}function Le(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}function Re(e){if(null!=e){try{return Ft.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Oe(e,t){return e===t||e!==e&&t!==t}function ke(e){return De(e)&&Bt.call(e,"callee")&&(!zt.call(e,"callee")||jt.call(e)==Ke)}function we(e){return null!=e&&Ie(e.length)&&!Pe(e)}function De(e){return Ce(e)&&we(e)}function Pe(e){var t=xe(e)?jt.call(e):"";return t==Xe||t==$e}function Ie(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Ve}function xe(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Ce(e){return!!e&&"object"==typeof e}function Me(e){if(!Ce(e)||jt.call(e)!=Je||f(e))return!1;var t=Wt(e);if(null===t)return!0;var n=Bt.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Ft.call(n)==Ut}function Ne(e){return ce(e,Be(e))}function Fe(e){return we(e)?j(e):Q(e)}function Be(e){return we(e)?j(e,!0):Z(e)}function Ue(){return[]}function je(){return!1}var Ge=200,He="__lodash_hash_undefined__",Ve=9007199254740991,Ke="[object Arguments]",We="[object Array]",Ye="[object Boolean]",ze="[object Date]",qe="[object Error]",Xe="[object Function]",$e="[object GeneratorFunction]",Qe="[object Map]",Ze="[object Number]",Je="[object Object]",et="[object Promise]",tt="[object RegExp]",nt="[object Set]",rt="[object String]",it="[object Symbol]",at="[object WeakMap]",ot="[object ArrayBuffer]",st="[object DataView]",ut="[object Float32Array]",lt="[object Float64Array]",dt="[object Int8Array]",ct="[object Int16Array]",ft="[object Int32Array]",ht="[object Uint8Array]",pt="[object Uint8ClampedArray]",vt="[object Uint16Array]",mt="[object Uint32Array]",gt=/[\\^$.*+?()[\]{}|]/g,yt=/\w*$/,bt=/^\[object .+?Constructor\]$/,Et=/^(?:0|[1-9]\d*)$/,_t={};_t[ut]=_t[lt]=_t[dt]=_t[ct]=_t[ft]=_t[ht]=_t[pt]=_t[vt]=_t[mt]=!0,_t[Ke]=_t[We]=_t[ot]=_t[Ye]=_t[st]=_t[ze]=_t[qe]=_t[Xe]=_t[Qe]=_t[Ze]=_t[Je]=_t[tt]=_t[nt]=_t[rt]=_t[at]=!1;var Tt={};Tt[Ke]=Tt[We]=Tt[ot]=Tt[st]=Tt[Ye]=Tt[ze]=Tt[ut]=Tt[lt]=Tt[dt]=Tt[ct]=Tt[ft]=Tt[Qe]=Tt[Ze]=Tt[Je]=Tt[tt]=Tt[nt]=Tt[rt]=Tt[it]=Tt[ht]=Tt[pt]=Tt[vt]=Tt[mt]=!0,Tt[qe]=Tt[Xe]=Tt[at]=!1;var St="object"==typeof e&&e&&e.Object===Object&&e,At="object"==typeof self&&self&&self.Object===Object&&self,Lt=St||At||Function("return this")(),Rt="object"==typeof t&&t&&!t.nodeType&&t,Ot=Rt&&"object"==typeof n&&n&&!n.nodeType&&n,kt=Ot&&Ot.exports===Rt,wt=kt&&St.process,Dt=function(){try{return wt&&wt.binding("util")}catch(e){}}(),Pt=Dt&&Dt.isTypedArray,It=Array.prototype,xt=Function.prototype,Ct=Object.prototype,Mt=Lt["__core-js_shared__"],Nt=function(){var e=/[^.]+$/.exec(Mt&&Mt.keys&&Mt.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Ft=xt.toString,Bt=Ct.hasOwnProperty,Ut=Ft.call(Object),jt=Ct.toString,Gt=RegExp("^"+Ft.call(Bt).replace(gt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ht=kt?Lt.Buffer:void 0,Vt=Lt.Symbol,Kt=Lt.Uint8Array,Wt=p(Object.getPrototypeOf,Object),Yt=Object.create,zt=Ct.propertyIsEnumerable,qt=It.splice,Xt=Object.getOwnPropertySymbols,$t=Ht?Ht.isBuffer:void 0,Qt=p(Object.keys,Object),Zt=Math.max,Jt=me(Lt,"DataView"),en=me(Lt,"Map"),tn=me(Lt,"Promise"),nn=me(Lt,"Set"),rn=me(Lt,"WeakMap"),an=me(Object,"create"),on=Re(Jt),sn=Re(en),un=Re(tn),ln=Re(nn),dn=Re(rn),cn=Vt?Vt.prototype:void 0,fn=cn?cn.valueOf:void 0;m.prototype.clear=g,m.prototype.delete=y,m.prototype.get=b,m.prototype.has=E,m.prototype.set=_,T.prototype.clear=S,T.prototype.delete=A,T.prototype.get=L,T.prototype.has=R,T.prototype.set=O,k.prototype.clear=w,k.prototype.delete=D,k.prototype.get=P,k.prototype.has=I,k.prototype.set=x,C.prototype.clear=M,C.prototype.delete=N,C.prototype.get=F,C.prototype.has=B,C.prototype.set=U;var hn=Xt?p(Xt,Object):Ue,pn=q;(Jt&&pn(new Jt(new ArrayBuffer(1)))!=st||en&&pn(new en)!=Qe||tn&&pn(tn.resolve())!=et||nn&&pn(new nn)!=nt||rn&&pn(new rn)!=at)&&(pn=function(e){var t=jt.call(e),n=t==Je?e.constructor:void 0,r=n?Re(n):void 0;if(r)switch(r){case on:return st;case sn:return Qe;case un:return et;case ln:return nt;case dn:return at}return t});var vn=Array.isArray,mn=$t||je,gn=Pt?d(Pt):$,yn=he(function(e,t,n){J(e,t,n)});n.exports=yn}).call(t,function(){return this}(),n(24)(e))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(d===setTimeout)return setTimeout(e,0);if((d===n||!d)&&setTimeout)return d=setTimeout,setTimeout(e,0);try{return d(e,0)}catch(t){try{return d.call(null,e,0)}catch(t){return d.call(this,e,0)}}}function a(e){if(c===clearTimeout)return clearTimeout(e);if((c===r||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(e);try{return c(e)}catch(t){try{return c.call(null,e)}catch(t){return c.call(this,e)}}}function o(){v&&h&&(v=!1,h.length?p=h.concat(p):m=-1,p.length&&s())}function s(){if(!v){var e=i(o);v=!0;for(var t=p.length;t;){for(h=p,p=[];++m<t;)h&&h[m].run();m=-1,t=p.length}h=null,v=!1,a(e)}}function u(e,t){this.fun=e,this.array=t}function l(){}var d,c,f=e.exports={};!function(){try{d="function"==typeof setTimeout?setTimeout:n}catch(e){d=n}try{c="function"==typeof clearTimeout?clearTimeout:r}catch(e){c=r}}();var h,p=[],v=!1,m=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new u(e,t)),1!==p.length||v||i(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=l,f.addListener=l,f.once=l,f.off=l,f.removeListener=l,f.removeAllListeners=l,f.emit=l,f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(e,t,n){(function(e,t){!function(e,n){"use strict";function r(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return v[p]=r,h(p),p++}function i(e){delete v[e]}function a(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}function o(e){if(m)setTimeout(o,0,e);else{var t=v[e];if(t){m=!0;try{a(t)}finally{i(e),m=!1}}}}function s(){h=function(e){t.nextTick(function(){o(e)})}}function u(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}function l(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&o(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),h=function(n){e.postMessage(t+n,"*")}}function d(){var e=new MessageChannel;e.port1.onmessage=function(e){var t=e.data;o(t)},h=function(t){e.port2.postMessage(t)}}function c(){var e=g.documentElement;h=function(t){var n=g.createElement("script");n.onreadystatechange=function(){o(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}function f(){h=function(e){setTimeout(o,0,e)}}if(!e.setImmediate){var h,p=1,v={},m=!1,g=e.document,y=Object.getPrototypeOf&&Object.getPrototypeOf(e);y=y&&y.setTimeout?y:e,"[object process]"==={}.toString.call(e.process)?s():u()?l():e.MessageChannel?d():g&&"onreadystatechange"in g.createElement("script")?c():f(),y.setImmediate=r,y.clearImmediate=i}}("undefined"==typeof self?"undefined"==typeof e?this:e:self)}).call(t,function(){return this}(),n(94))},function(e,t,n){function r(e,t){this._id=e,this._clearFn=t}var i=Function.prototype.apply;t.setTimeout=function(){return new r(i.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new r(i.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(95),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},function(e,t){},97,function(e,t,n,r){(function(t){var i,a="undefined"!=typeof t?t:"undefined"!=typeof window?window:{},o=n(r);"undefined"!=typeof document?i=document:(i=a["__GLOBAL_DOCUMENT_CACHE@4"],i||(i=a["__GLOBAL_DOCUMENT_CACHE@4"]=o)),e.exports=i}).call(t,function(){return this}())}]))});
//# sourceMappingURL=ludo_sync.js.map